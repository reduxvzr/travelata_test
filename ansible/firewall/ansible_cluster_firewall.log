2025-02-25 13:39:33,552 p=6909 u=digitd n=ansible | {
    "_meta": {
        "hostvars": {
            "db.etcd.lan": {
                "ansible_port": 22,
                "ansible_python_interpreter": "auto_silent",
                "ansible_ssh_private_key_file": "../ssh-keys/.keys/my_key",
                "ansible_user": "root"
            },
            "db.master.lan": {
                "ansible_port": 22,
                "ansible_python_interpreter": "auto_silent",
                "ansible_ssh_private_key_file": "../ssh-keys/.keys/my_key",
                "ansible_user": "root"
            },
            "db.slave.lan": {
                "ansible_port": 22,
                "ansible_python_interpreter": "auto_silent",
                "ansible_ssh_private_key_file": "../ssh-keys/.keys/my_key",
                "ansible_user": "root"
            },
            "db.test.lan": {
                "ansible_port": 22,
                "ansible_python_interpreter": "auto_silent",
                "ansible_ssh_private_key_file": "../ssh-keys/.keys/my_key",
                "ansible_user": "root"
            },
            "db.test1.lan": {
                "ansible_port": 22,
                "ansible_python_interpreter": "auto_silent",
                "ansible_ssh_private_key_file": "../ssh-keys/.keys/my_key",
                "ansible_user": "root"
            }
        }
    },
    "all": {
        "children": [
            "ungrouped",
            "cluster",
            "database",
            "vip_hap",
            "etcd_cluster"
        ]
    },
    "cluster": {
        "children": [
            "haproxy",
            "haproxy_vip",
            "master",
            "slave",
            "etcd"
        ]
    },
    "database": {
        "children": [
            "master",
            "slave"
        ]
    },
    "etcd": {
        "hosts": [
            "db.etcd.lan"
        ]
    },
    "etcd_cluster": {
        "children": [
            "master",
            "slave",
            "etcd"
        ]
    },
    "haproxy": {
        "hosts": [
            "db.test.lan"
        ]
    },
    "haproxy_vip": {
        "hosts": [
            "db.test1.lan"
        ]
    },
    "master": {
        "hosts": [
            "db.master.lan"
        ]
    },
    "slave": {
        "hosts": [
            "db.slave.lan"
        ]
    },
    "vip_hap": {
        "children": [
            "haproxy",
            "haproxy_vip"
        ]
    }
}
2025-02-25 13:39:58,107 p=7098 u=digitd n=ansible | {
    "_meta": {
        "hostvars": {
            "db.etcd.lan": {
                "ansible_port": 22,
                "ansible_python_interpreter": "auto_silent",
                "ansible_ssh_private_key_file": "../ssh-keys/.keys/my_key",
                "ansible_user": "root"
            },
            "db.master.lan": {
                "ansible_port": 22,
                "ansible_python_interpreter": "auto_silent",
                "ansible_ssh_private_key_file": "../ssh-keys/.keys/my_key",
                "ansible_user": "root"
            },
            "db.slave.lan": {
                "ansible_port": 22,
                "ansible_python_interpreter": "auto_silent",
                "ansible_ssh_private_key_file": "../ssh-keys/.keys/my_key",
                "ansible_user": "root"
            },
            "db.test.lan": {
                "ansible_port": 22,
                "ansible_python_interpreter": "auto_silent",
                "ansible_ssh_private_key_file": "../ssh-keys/.keys/my_key",
                "ansible_user": "root"
            },
            "db.test1.lan": {
                "ansible_port": 22,
                "ansible_python_interpreter": "auto_silent",
                "ansible_ssh_private_key_file": "../ssh-keys/.keys/my_key",
                "ansible_user": "root"
            }
        }
    },
    "all": {
        "children": [
            "ungrouped",
            "cluster",
            "database",
            "vip_hap",
            "etcd_cluster"
        ]
    },
    "cluster": {
        "children": [
            "haproxy",
            "haproxy_vip",
            "master",
            "slave",
            "etcd"
        ]
    },
    "database": {
        "children": [
            "master",
            "slave"
        ]
    },
    "etcd": {
        "hosts": [
            "db.etcd.lan"
        ]
    },
    "etcd_cluster": {
        "children": [
            "master",
            "slave",
            "etcd"
        ]
    },
    "haproxy": {
        "hosts": [
            "db.test.lan"
        ]
    },
    "haproxy_vip": {
        "hosts": [
            "db.test1.lan"
        ]
    },
    "master": {
        "hosts": [
            "db.master.lan"
        ]
    },
    "slave": {
        "hosts": [
            "db.slave.lan"
        ]
    },
    "vip_hap": {
        "children": [
            "haproxy",
            "haproxy_vip"
        ]
    }
}
2025-02-26 10:31:07,515 p=1029 u=digitd n=ansible | [WARNING]: Unable to parse /home/digitd/git/travelata_test/ansible/firewall/cluster.ini as an inventory source

2025-02-26 10:31:07,516 p=1029 u=digitd n=ansible | [WARNING]: No inventory was parsed, only implicit localhost is available

2025-02-26 10:31:07,521 p=1029 u=digitd n=ansible | {
    "_meta": {
        "hostvars": {}
    },
    "all": {
        "children": [
            "ungrouped"
        ]
    }
}
2025-02-26 10:31:24,007 p=1144 u=digitd n=ansible | {
    "_meta": {
        "hostvars": {
            "db.etcd.lan": {
                "ansible_port": 22,
                "ansible_python_interpreter": "auto_silent",
                "ansible_ssh_private_key_file": "../ssh-keys/.keys/my_key",
                "ansible_user": "root"
            },
            "db.master.lan": {
                "ansible_port": 22,
                "ansible_python_interpreter": "auto_silent",
                "ansible_ssh_private_key_file": "../ssh-keys/.keys/my_key",
                "ansible_user": "root"
            },
            "db.slave.lan": {
                "ansible_port": 22,
                "ansible_python_interpreter": "auto_silent",
                "ansible_ssh_private_key_file": "../ssh-keys/.keys/my_key",
                "ansible_user": "root"
            },
            "db.test.lan": {
                "ansible_port": 22,
                "ansible_python_interpreter": "auto_silent",
                "ansible_ssh_private_key_file": "../ssh-keys/.keys/my_key",
                "ansible_user": "root"
            },
            "db.test1.lan": {
                "ansible_port": 22,
                "ansible_python_interpreter": "auto_silent",
                "ansible_ssh_private_key_file": "../ssh-keys/.keys/my_key",
                "ansible_user": "root"
            }
        }
    },
    "all": {
        "children": [
            "ungrouped",
            "cluster",
            "database",
            "vip_hap",
            "etcd_cluster"
        ]
    },
    "cluster": {
        "children": [
            "haproxy",
            "haproxy_vip",
            "master",
            "slave",
            "etcd"
        ]
    },
    "database": {
        "children": [
            "master",
            "slave"
        ]
    },
    "etcd": {
        "hosts": [
            "db.etcd.lan"
        ]
    },
    "etcd_cluster": {
        "children": [
            "master",
            "slave",
            "etcd"
        ]
    },
    "haproxy": {
        "hosts": [
            "db.test.lan"
        ]
    },
    "haproxy_vip": {
        "hosts": [
            "db.test1.lan"
        ]
    },
    "master": {
        "hosts": [
            "db.master.lan"
        ]
    },
    "slave": {
        "hosts": [
            "db.slave.lan"
        ]
    },
    "vip_hap": {
        "children": [
            "haproxy",
            "haproxy_vip"
        ]
    }
}
2025-02-26 10:49:12,715 p=7520 u=digitd n=ansible | db.test.lan | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: no such identity: ../ssh-keys/.keys/my_key: No such file or directory\r\nroot@db.test.lan: Permission denied (publickey,password).",
    "unreachable": true
}
2025-02-26 10:49:12,725 p=7520 u=digitd n=ansible | db.master.lan | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: no such identity: ../ssh-keys/.keys/my_key: No such file or directory\r\nroot@db.master.lan: Permission denied (publickey,password).",
    "unreachable": true
}
2025-02-26 10:49:12,730 p=7520 u=digitd n=ansible | db.test1.lan | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: no such identity: ../ssh-keys/.keys/my_key: No such file or directory\r\nroot@db.test1.lan: Permission denied (publickey,password).",
    "unreachable": true
}
2025-02-26 10:49:12,742 p=7520 u=digitd n=ansible | db.slave.lan | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: no such identity: ../ssh-keys/.keys/my_key: No such file or directory\r\nroot@db.slave.lan: Permission denied (publickey,password).",
    "unreachable": true
}
2025-02-26 10:49:13,078 p=7520 u=digitd n=ansible | db.etcd.lan | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: no such identity: ../ssh-keys/.keys/my_key: No such file or directory\r\nroot@db.etcd.lan: Permission denied (publickey,password).",
    "unreachable": true
}
2025-02-26 10:53:44,591 p=8383 u=digitd n=ansible | db.test.lan | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: no such identity: ../ssh-keys/.keys/my_key: No such file or directory\r\nroot@db.test.lan: Permission denied (publickey,password).",
    "unreachable": true
}
2025-02-26 10:53:44,607 p=8383 u=digitd n=ansible | db.master.lan | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: no such identity: ../ssh-keys/.keys/my_key: No such file or directory\r\nroot@db.master.lan: Permission denied (publickey,password).",
    "unreachable": true
}
2025-02-26 10:53:44,607 p=8383 u=digitd n=ansible | db.slave.lan | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: no such identity: ../ssh-keys/.keys/my_key: No such file or directory\r\nroot@db.slave.lan: Permission denied (publickey,password).",
    "unreachable": true
}
2025-02-26 10:53:44,612 p=8383 u=digitd n=ansible | db.test1.lan | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: no such identity: ../ssh-keys/.keys/my_key: No such file or directory\r\nroot@db.test1.lan: Permission denied (publickey,password).",
    "unreachable": true
}
2025-02-26 10:53:44,613 p=8383 u=digitd n=ansible | db.etcd.lan | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: no such identity: ../ssh-keys/.keys/my_key: No such file or directory\r\nroot@db.etcd.lan: Permission denied (publickey,password).",
    "unreachable": true
}
2025-02-26 10:54:20,603 p=8714 u=digitd n=ansible | db.test1.lan | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2025-02-26 10:54:20,603 p=8714 u=digitd n=ansible | db.test.lan | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2025-02-26 10:54:20,610 p=8714 u=digitd n=ansible | db.master.lan | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2025-02-26 10:54:20,610 p=8714 u=digitd n=ansible | db.slave.lan | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2025-02-26 10:54:20,638 p=8714 u=digitd n=ansible | db.etcd.lan | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2025-02-26 10:54:27,137 p=8824 u=digitd n=ansible | db.test1.lan | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2025-02-26 10:54:27,140 p=8824 u=digitd n=ansible | db.test.lan | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2025-02-26 10:54:27,143 p=8824 u=digitd n=ansible | db.etcd.lan | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2025-02-26 10:54:27,222 p=8824 u=digitd n=ansible | db.master.lan | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2025-02-26 10:54:27,222 p=8824 u=digitd n=ansible | db.slave.lan | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2025-02-26 10:54:59,041 p=9182 u=digitd n=ansible | PLAY [Setup firewall on the postgres machines] ***********************************************************************************************************************************************************************
2025-02-26 10:54:59,056 p=9182 u=digitd n=ansible | TASK [Ensure that nftables package is installed] *********************************************************************************************************************************************************************
2025-02-26 10:55:12,620 p=9182 u=digitd n=ansible | ok: [db.slave.lan]
2025-02-26 10:55:19,472 p=9182 u=digitd n=ansible | ok: [db.master.lan]
2025-02-26 10:55:19,477 p=9182 u=digitd n=ansible | TASK [Copy files to the machines] ************************************************************************************************************************************************************************************
2025-02-26 10:55:21,166 p=9182 u=digitd n=ansible | changed: [db.slave.lan]
2025-02-26 10:55:22,015 p=9182 u=digitd n=ansible | changed: [db.master.lan]
2025-02-26 10:55:22,032 p=9182 u=digitd n=ansible | TASK [Start and enable nftables service] *****************************************************************************************************************************************************************************
2025-02-26 10:55:27,015 p=9182 u=digitd n=ansible | changed: [db.slave.lan]
2025-02-26 10:55:29,607 p=9182 u=digitd n=ansible | changed: [db.master.lan]
2025-02-26 10:55:29,623 p=9182 u=digitd n=ansible | PLAY [Setup firewall on the haproxy machines] ************************************************************************************************************************************************************************
2025-02-26 10:55:29,634 p=9182 u=digitd n=ansible | TASK [Ensure that nftables package is installed] *********************************************************************************************************************************************************************
2025-02-26 10:55:29,874 p=9182 u=digitd n=ansible | fatal: [db.test.lan]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: no such identity: ../ssh-keys/.keys/my_key: No such file or directory\r\nroot@db.test.lan: Permission denied (publickey,password).", "unreachable": true}
2025-02-26 10:55:29,894 p=9182 u=digitd n=ansible | fatal: [db.test1.lan]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: no such identity: ../ssh-keys/.keys/my_key: No such file or directory\r\nroot@db.test1.lan: Permission denied (publickey,password).", "unreachable": true}
2025-02-26 10:55:29,895 p=9182 u=digitd n=ansible | PLAY RECAP ***********************************************************************************************************************************************************************************************************
2025-02-26 10:55:29,896 p=9182 u=digitd n=ansible | db.master.lan              : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-26 10:55:29,896 p=9182 u=digitd n=ansible | db.slave.lan               : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-26 10:55:29,896 p=9182 u=digitd n=ansible | db.test.lan                : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-26 10:55:29,896 p=9182 u=digitd n=ansible | db.test1.lan               : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-26 10:56:26,964 p=9848 u=digitd n=ansible | PLAY [Setup firewall on the postgres machines] ***********************************************************************************************************************************************************************
2025-02-26 10:56:26,976 p=9848 u=digitd n=ansible | TASK [Ensure that nftables package is installed] *********************************************************************************************************************************************************************
2025-02-26 10:56:27,269 p=9848 u=digitd n=ansible | fatal: [db.slave.lan]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: no such identity: ../ssh-keys/.keys/my_key: No such file or directory\r\nroot@db.slave.lan: Permission denied (publickey,password).", "unreachable": true}
2025-02-26 10:56:32,759 p=9848 u=digitd n=ansible |  [ERROR]: User interrupted execution

2025-02-26 10:59:31,505 p=10806 u=digitd n=ansible | PLAY [Setup firewall on the postgres machines] ***********************************************************************************************************************************************************************
2025-02-26 10:59:31,519 p=10806 u=digitd n=ansible | TASK [Ensure that nftables package is installed] *********************************************************************************************************************************************************************
2025-02-26 10:59:31,758 p=10806 u=digitd n=ansible | fatal: [db.slave.lan]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: no such identity: ../ssh-keys/.keys/my_key: No such file or directory\r\nroot@db.slave.lan: Permission denied (publickey,password).", "unreachable": true}
2025-02-26 10:59:31,935 p=10806 u=digitd n=ansible | fatal: [db.master.lan]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: no such identity: ../ssh-keys/.keys/my_key: No such file or directory\r\nroot@db.master.lan: Permission denied (publickey,password).", "unreachable": true}
2025-02-26 10:59:31,936 p=10806 u=digitd n=ansible | PLAY RECAP ***********************************************************************************************************************************************************************************************************
2025-02-26 10:59:31,936 p=10806 u=digitd n=ansible | db.master.lan              : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-26 10:59:31,937 p=10806 u=digitd n=ansible | db.slave.lan               : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-26 11:00:01,449 p=10988 u=digitd n=ansible | db.test.lan | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2025-02-26 11:00:01,458 p=10988 u=digitd n=ansible | db.test1.lan | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2025-02-26 11:00:01,606 p=10988 u=digitd n=ansible | db.etcd.lan | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2025-02-26 11:00:01,750 p=10988 u=digitd n=ansible | db.master.lan | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2025-02-26 11:00:01,959 p=10988 u=digitd n=ansible | db.slave.lan | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2025-02-26 11:00:11,631 p=11132 u=digitd n=ansible | PLAY [Setup firewall on the postgres machines] ***********************************************************************************************************************************************************************
2025-02-26 11:00:11,649 p=11132 u=digitd n=ansible | TASK [Ensure that nftables package is installed] *********************************************************************************************************************************************************************
2025-02-26 11:00:14,060 p=11132 u=digitd n=ansible | ok: [db.master.lan]
2025-02-26 11:00:18,244 p=11132 u=digitd n=ansible | ok: [db.slave.lan]
2025-02-26 11:00:18,247 p=11132 u=digitd n=ansible | TASK [Copy files to the machines] ************************************************************************************************************************************************************************************
2025-02-26 11:00:19,342 p=11132 u=digitd n=ansible | ok: [db.slave.lan]
2025-02-26 11:00:19,342 p=11132 u=digitd n=ansible | ok: [db.master.lan]
2025-02-26 11:00:19,345 p=11132 u=digitd n=ansible | TASK [Start and enable nftables service] *****************************************************************************************************************************************************************************
2025-02-26 11:00:21,037 p=11132 u=digitd n=ansible | ok: [db.slave.lan]
2025-02-26 11:00:21,077 p=11132 u=digitd n=ansible | ok: [db.master.lan]
2025-02-26 11:00:21,094 p=11132 u=digitd n=ansible | PLAY [Setup firewall on the haproxy machines] ************************************************************************************************************************************************************************
2025-02-26 11:00:21,102 p=11132 u=digitd n=ansible | TASK [Ensure that nftables package is installed] *********************************************************************************************************************************************************************
2025-02-26 11:00:38,660 p=11132 u=digitd n=ansible | ok: [db.test.lan]
2025-02-26 11:00:42,187 p=11132 u=digitd n=ansible | ok: [db.test1.lan]
2025-02-26 11:00:42,190 p=11132 u=digitd n=ansible | TASK [Copy files to the machines] ************************************************************************************************************************************************************************************
2025-02-26 11:00:43,132 p=11132 u=digitd n=ansible | changed: [db.test1.lan]
2025-02-26 11:00:43,160 p=11132 u=digitd n=ansible | changed: [db.test.lan]
2025-02-26 11:00:43,164 p=11132 u=digitd n=ansible | TASK [Start and enable nftables service] *****************************************************************************************************************************************************************************
2025-02-26 11:00:44,370 p=11132 u=digitd n=ansible | changed: [db.test.lan]
2025-02-26 11:00:45,282 p=11132 u=digitd n=ansible | changed: [db.test1.lan]
2025-02-26 11:00:45,294 p=11132 u=digitd n=ansible | PLAY RECAP ***********************************************************************************************************************************************************************************************************
2025-02-26 11:00:45,294 p=11132 u=digitd n=ansible | db.master.lan              : ok=3    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-26 11:00:45,308 p=11132 u=digitd n=ansible | db.slave.lan               : ok=3    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-26 11:00:45,309 p=11132 u=digitd n=ansible | db.test.lan                : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-26 11:00:45,309 p=11132 u=digitd n=ansible | db.test1.lan               : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-26 11:02:16,747 p=11880 u=digitd n=ansible | PLAY [Setup firewall on the postgres machines] ***********************************************************************************************************************************************************************
2025-02-26 11:02:16,763 p=11880 u=digitd n=ansible | TASK [Ensure that nftables package is installed] *********************************************************************************************************************************************************************
2025-02-26 11:02:18,876 p=11880 u=digitd n=ansible | ok: [db.master.lan]
2025-02-26 11:02:19,004 p=11880 u=digitd n=ansible | ok: [db.slave.lan]
2025-02-26 11:02:19,007 p=11880 u=digitd n=ansible | TASK [Copy files to the machines] ************************************************************************************************************************************************************************************
2025-02-26 11:02:19,977 p=11880 u=digitd n=ansible | ok: [db.master.lan]
2025-02-26 11:02:19,979 p=11880 u=digitd n=ansible | ok: [db.slave.lan]
2025-02-26 11:02:19,981 p=11880 u=digitd n=ansible | TASK [Start and enable nftables service] *****************************************************************************************************************************************************************************
2025-02-26 11:02:21,613 p=11880 u=digitd n=ansible | ok: [db.master.lan]
2025-02-26 11:02:21,627 p=11880 u=digitd n=ansible | ok: [db.slave.lan]
2025-02-26 11:02:21,651 p=11880 u=digitd n=ansible | PLAY [Setup firewall on the haproxy machines] ************************************************************************************************************************************************************************
2025-02-26 11:02:21,695 p=11880 u=digitd n=ansible | TASK [Ensure that nftables package is installed] *********************************************************************************************************************************************************************
2025-02-26 11:02:23,834 p=11880 u=digitd n=ansible | ok: [db.test.lan]
2025-02-26 11:02:23,842 p=11880 u=digitd n=ansible | ok: [db.test1.lan]
2025-02-26 11:02:23,845 p=11880 u=digitd n=ansible | TASK [Copy files to the machines] ************************************************************************************************************************************************************************************
2025-02-26 11:02:24,778 p=11880 u=digitd n=ansible | changed: [db.test1.lan]
2025-02-26 11:02:24,778 p=11880 u=digitd n=ansible | changed: [db.test.lan]
2025-02-26 11:02:24,781 p=11880 u=digitd n=ansible | TASK [Start and enable nftables service] *****************************************************************************************************************************************************************************
2025-02-26 11:02:25,852 p=11880 u=digitd n=ansible | ok: [db.test.lan]
2025-02-26 11:02:25,862 p=11880 u=digitd n=ansible | ok: [db.test1.lan]
2025-02-26 11:02:25,876 p=11880 u=digitd n=ansible | PLAY RECAP ***********************************************************************************************************************************************************************************************************
2025-02-26 11:02:25,876 p=11880 u=digitd n=ansible | db.master.lan              : ok=3    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-26 11:02:25,876 p=11880 u=digitd n=ansible | db.slave.lan               : ok=3    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-26 11:02:25,876 p=11880 u=digitd n=ansible | db.test.lan                : ok=3    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-26 11:02:25,876 p=11880 u=digitd n=ansible | db.test1.lan               : ok=3    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-26 11:05:27,839 p=13180 u=digitd n=ansible | PLAY [Setup firewall on the postgres machines] ***********************************************************************************************************************************************************************
2025-02-26 11:05:27,852 p=13180 u=digitd n=ansible | TASK [Ensure that nftables package is installed] *********************************************************************************************************************************************************************
2025-02-26 11:05:29,988 p=13180 u=digitd n=ansible | ok: [db.slave.lan]
2025-02-26 11:05:30,102 p=13180 u=digitd n=ansible | ok: [db.master.lan]
2025-02-26 11:05:30,104 p=13180 u=digitd n=ansible | TASK [Copy files to the machines] ************************************************************************************************************************************************************************************
2025-02-26 11:05:31,069 p=13180 u=digitd n=ansible | ok: [db.slave.lan]
2025-02-26 11:05:31,111 p=13180 u=digitd n=ansible | ok: [db.master.lan]
2025-02-26 11:05:31,114 p=13180 u=digitd n=ansible | TASK [Start and enable nftables service] *****************************************************************************************************************************************************************************
2025-02-26 11:05:33,031 p=13180 u=digitd n=ansible | changed: [db.slave.lan]
2025-02-26 11:05:33,072 p=13180 u=digitd n=ansible | changed: [db.master.lan]
2025-02-26 11:05:33,085 p=13180 u=digitd n=ansible | PLAY [Setup firewall on the haproxy machines] ************************************************************************************************************************************************************************
2025-02-26 11:05:33,094 p=13180 u=digitd n=ansible | TASK [Ensure that nftables package is installed] *********************************************************************************************************************************************************************
2025-02-26 11:05:34,902 p=13180 u=digitd n=ansible | ok: [db.test.lan]
2025-02-26 11:05:35,077 p=13180 u=digitd n=ansible | ok: [db.test1.lan]
2025-02-26 11:05:35,080 p=13180 u=digitd n=ansible | TASK [Copy files to the machines] ************************************************************************************************************************************************************************************
2025-02-26 11:05:35,770 p=13180 u=digitd n=ansible | ok: [db.test.lan]
2025-02-26 11:05:35,783 p=13180 u=digitd n=ansible | ok: [db.test1.lan]
2025-02-26 11:05:35,786 p=13180 u=digitd n=ansible | TASK [Start and enable nftables service] *****************************************************************************************************************************************************************************
2025-02-26 11:05:36,969 p=13180 u=digitd n=ansible | changed: [db.test1.lan]
2025-02-26 11:05:37,011 p=13180 u=digitd n=ansible | changed: [db.test.lan]
2025-02-26 11:05:37,022 p=13180 u=digitd n=ansible | PLAY RECAP ***********************************************************************************************************************************************************************************************************
2025-02-26 11:05:37,022 p=13180 u=digitd n=ansible | db.master.lan              : ok=3    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-26 11:05:37,022 p=13180 u=digitd n=ansible | db.slave.lan               : ok=3    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-26 11:05:37,022 p=13180 u=digitd n=ansible | db.test.lan                : ok=3    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-26 11:05:37,022 p=13180 u=digitd n=ansible | db.test1.lan               : ok=3    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-26 11:48:26,253 p=24527 u=digitd n=ansible | db.test.lan | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n@         WARNING: UNPROTECTED PRIVATE KEY FILE!          @\r\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\nPermissions 0644 for '../../ssh-keys/.keys/my_key' are too open.\r\nIt is required that your private key files are NOT accessible by others.\r\nThis private key will be ignored.\r\nLoad key \"../../ssh-keys/.keys/my_key\": bad permissions\r\nroot@db.test.lan: Permission denied (publickey,password).",
    "unreachable": true
}
2025-02-26 11:48:26,266 p=24527 u=digitd n=ansible | db.test1.lan | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n@         WARNING: UNPROTECTED PRIVATE KEY FILE!          @\r\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\nPermissions 0644 for '../../ssh-keys/.keys/my_key' are too open.\r\nIt is required that your private key files are NOT accessible by others.\r\nThis private key will be ignored.\r\nLoad key \"../../ssh-keys/.keys/my_key\": bad permissions\r\nroot@db.test1.lan: Permission denied (publickey,password).",
    "unreachable": true
}
2025-02-26 11:48:26,270 p=24527 u=digitd n=ansible | db.slave.lan | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n@         WARNING: UNPROTECTED PRIVATE KEY FILE!          @\r\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\nPermissions 0644 for '../../ssh-keys/.keys/my_key' are too open.\r\nIt is required that your private key files are NOT accessible by others.\r\nThis private key will be ignored.\r\nLoad key \"../../ssh-keys/.keys/my_key\": bad permissions\r\nroot@db.slave.lan: Permission denied (publickey,password).",
    "unreachable": true
}
2025-02-26 11:48:26,285 p=24527 u=digitd n=ansible | db.etcd.lan | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n@         WARNING: UNPROTECTED PRIVATE KEY FILE!          @\r\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\nPermissions 0644 for '../../ssh-keys/.keys/my_key' are too open.\r\nIt is required that your private key files are NOT accessible by others.\r\nThis private key will be ignored.\r\nLoad key \"../../ssh-keys/.keys/my_key\": bad permissions\r\nroot@db.etcd.lan: Permission denied (publickey,password).",
    "unreachable": true
}
2025-02-26 11:48:26,288 p=24527 u=digitd n=ansible | db.master.lan | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n@         WARNING: UNPROTECTED PRIVATE KEY FILE!          @\r\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\nPermissions 0644 for '../../ssh-keys/.keys/my_key' are too open.\r\nIt is required that your private key files are NOT accessible by others.\r\nThis private key will be ignored.\r\nLoad key \"../../ssh-keys/.keys/my_key\": bad permissions\r\nroot@db.master.lan: Permission denied (publickey,password).",
    "unreachable": true
}
2025-02-26 11:48:33,576 p=24610 u=digitd n=ansible | db.test.lan | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n@         WARNING: UNPROTECTED PRIVATE KEY FILE!          @\r\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\nPermissions 0644 for '../../ssh-keys/.keys/my_key' are too open.\r\nIt is required that your private key files are NOT accessible by others.\r\nThis private key will be ignored.\r\nLoad key \"../../ssh-keys/.keys/my_key\": bad permissions\r\nroot@db.test.lan: Permission denied (publickey,password).",
    "unreachable": true
}
2025-02-26 11:48:33,588 p=24610 u=digitd n=ansible | db.test1.lan | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n@         WARNING: UNPROTECTED PRIVATE KEY FILE!          @\r\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\nPermissions 0644 for '../../ssh-keys/.keys/my_key' are too open.\r\nIt is required that your private key files are NOT accessible by others.\r\nThis private key will be ignored.\r\nLoad key \"../../ssh-keys/.keys/my_key\": bad permissions\r\nroot@db.test1.lan: Permission denied (publickey,password).",
    "unreachable": true
}
2025-02-26 11:48:33,593 p=24610 u=digitd n=ansible | db.slave.lan | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n@         WARNING: UNPROTECTED PRIVATE KEY FILE!          @\r\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\nPermissions 0644 for '../../ssh-keys/.keys/my_key' are too open.\r\nIt is required that your private key files are NOT accessible by others.\r\nThis private key will be ignored.\r\nLoad key \"../../ssh-keys/.keys/my_key\": bad permissions\r\nroot@db.slave.lan: Permission denied (publickey,password).",
    "unreachable": true
}
2025-02-26 11:48:33,599 p=24610 u=digitd n=ansible | db.master.lan | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n@         WARNING: UNPROTECTED PRIVATE KEY FILE!          @\r\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\nPermissions 0644 for '../../ssh-keys/.keys/my_key' are too open.\r\nIt is required that your private key files are NOT accessible by others.\r\nThis private key will be ignored.\r\nLoad key \"../../ssh-keys/.keys/my_key\": bad permissions\r\nroot@db.master.lan: Permission denied (publickey,password).",
    "unreachable": true
}
2025-02-26 11:48:33,602 p=24610 u=digitd n=ansible | db.etcd.lan | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n@         WARNING: UNPROTECTED PRIVATE KEY FILE!          @\r\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\nPermissions 0644 for '../../ssh-keys/.keys/my_key' are too open.\r\nIt is required that your private key files are NOT accessible by others.\r\nThis private key will be ignored.\r\nLoad key \"../../ssh-keys/.keys/my_key\": bad permissions\r\nroot@db.etcd.lan: Permission denied (publickey,password).",
    "unreachable": true
}
2025-02-27 12:16:40,679 p=1076 u=digitd n=ansible | db.test1.lan | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2025-02-27 12:16:40,680 p=1076 u=digitd n=ansible | db.test.lan | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2025-02-27 12:16:43,561 p=1076 u=digitd n=ansible | db.slave.lan | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2025-02-27 12:16:43,581 p=1076 u=digitd n=ansible | db.etcd.lan | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2025-02-27 12:16:44,352 p=1076 u=digitd n=ansible | db.master.lan | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
2025-03-01 15:59:55,378 p=681099 u=digitd n=ansible INFO| Using /run/media/digitd/NFS/git/travelata_test/ansible/firewall/ansible.cfg as config file
2025-03-01 15:59:55,505 p=681099 u=digitd n=ansible INFO| PLAY [Setup firewall on the postgres machines] ***************************************************************************************************************************************************************************************************
2025-03-01 15:59:55,511 p=681099 u=digitd n=ansible INFO| TASK [Ensure that nftables package is installed] *************************************************************************************************************************************************************************************************
2025-03-01 15:59:58,724 p=681099 u=digitd n=ansible INFO| ok: [db.slave.lan] => {"ansible_facts": {"discovered_interpreter_python": "/usr/bin/python3.11"}, "cache_update_time": 1740833281, "cache_updated": false, "changed": false}
2025-03-01 15:59:58,772 p=681099 u=digitd n=ansible INFO| ok: [db.master.lan] => {"ansible_facts": {"discovered_interpreter_python": "/usr/bin/python3.11"}, "cache_update_time": 1740830385, "cache_updated": false, "changed": false}
2025-03-01 15:59:58,773 p=681099 u=digitd n=ansible INFO| TASK [Copy files to the machines] ****************************************************************************************************************************************************************************************************************
2025-03-01 15:59:59,605 p=681099 u=digitd n=ansible INFO| changed: [db.master.lan] => {"changed": true, "checksum": "224bc7896c8b2d435b11fccc3cb7f03b38d7f537", "dest": "/etc/nftables.conf", "gid": 0, "group": "root", "md5sum": "84f91d51000a65b16b65ff1db3f4dc46", "mode": "0751", "owner": "root", "size": 866, "src": "/root/.ansible/tmp/ansible-tmp-1740833998.8535137-681293-107238041501541/.source.conf", "state": "file", "uid": 0}
2025-03-01 15:59:59,672 p=681099 u=digitd n=ansible INFO| changed: [db.slave.lan] => {"changed": true, "checksum": "224bc7896c8b2d435b11fccc3cb7f03b38d7f537", "dest": "/etc/nftables.conf", "gid": 0, "group": "root", "md5sum": "84f91d51000a65b16b65ff1db3f4dc46", "mode": "0751", "owner": "root", "size": 866, "src": "/root/.ansible/tmp/ansible-tmp-1740833998.852899-681294-4151575240075/.source.conf", "state": "file", "uid": 0}
2025-03-01 15:59:59,673 p=681099 u=digitd n=ansible INFO| TASK [Start and enable nftables service] *********************************************************************************************************************************************************************************************************
2025-03-01 16:00:01,282 p=681099 u=digitd n=ansible INFO| changed: [db.slave.lan] => {"changed": true, "enabled": true, "name": "nftables", "state": "started", "status": {"ActiveEnterTimestamp": "Sat 2025-03-01 12:30:28 MSK", "ActiveEnterTimestampMonotonic": "34203888", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "systemd-journald.socket system.slice", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Sat 2025-03-01 12:30:23 MSK", "AssertTimestampMonotonic": "28724317", "Before": "network-pre.target shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "29570000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "yes", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Sat 2025-03-01 12:30:23 MSK", "ConditionTimestampMonotonic": "28724315", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroupId": "716", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "no", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "nftables", "DevicePolicy": "auto", "Documentation": "\"man:nft(8)\" http://wiki.nftables.org", "DynamicUser": "no", "EffectiveMemoryHigh": "2069450752", "EffectiveMemoryMax": "2069450752", "EffectiveTasksMax": "2305", "ExecMainCode": "1", "ExecMainExitTimestamp": "Sat 2025-03-01 12:30:28 MSK", "ExecMainExitTimestampMonotonic": "34203425", "ExecMainHandoffTimestamp": "Sat 2025-03-01 12:30:23 MSK", "ExecMainHandoffTimestampMonotonic": "28832157", "ExecMainPID": "290", "ExecMainStartTimestamp": "Sat 2025-03-01 12:30:23 MSK", "ExecMainStartTimestampMonotonic": "28725104", "ExecMainStatus": "0", "ExecReload": "{ path=/usr/sbin/nft ; argv[]=/usr/sbin/nft -f /etc/nftables.conf ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/usr/sbin/nft ; argv[]=/usr/sbin/nft -f /etc/nftables.conf ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/sbin/nft ; argv[]=/usr/sbin/nft -f /etc/nftables.conf ; ignore_errors=no ; start_time=[Sat 2025-03-01 12:30:23 MSK] ; stop_time=[Sat 2025-03-01 12:30:28 MSK] ; pid=290 ; code=exited ; status=0 }", "ExecStartEx": "{ path=/usr/sbin/nft ; argv[]=/usr/sbin/nft -f /etc/nftables.conf ; flags= ; start_time=[Sat 2025-03-01 12:30:23 MSK] ; stop_time=[Sat 2025-03-01 12:30:28 MSK] ; pid=290 ; code=exited ; status=0 }", "ExecStop": "{ path=/usr/sbin/nft ; argv[]=/usr/sbin/nft flush ruleset ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStopEx": "{ path=/usr/sbin/nft ; argv[]=/usr/sbin/nft flush ruleset ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/nftables.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "nftables.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Sat 2025-03-01 12:30:23 MSK", "InactiveExitTimestampMonotonic": "28729513", "InvocationID": "3a59dbe064324267b3263cd6877cd62a", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "7686", "LimitNPROCSoft": "7686", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "7686", "LimitSIGPENDINGSoft": "7686", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "1668939776", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "3854336", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "[not set]", "MemorySwapMax": "infinity", "MemorySwapPeak": "0", "MemoryZSwapCurrent": "[not set]", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "nftables.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "yes", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "full", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "yes", "RemoveIPC": "no", "Requires": "system.slice", "Restart": "no", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "no", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Sat 2025-03-01 12:30:28 MSK", "StateChangeTimestampMonotonic": "34203888", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "exited", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "2305", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "oneshot", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "sysinit.target", "Wants": "network-pre.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-03-01 16:00:01,440 p=681099 u=digitd n=ansible INFO| changed: [db.master.lan] => {"changed": true, "enabled": true, "name": "nftables", "state": "started", "status": {"ActiveEnterTimestamp": "Sat 2025-03-01 12:29:28 MSK", "ActiveEnterTimestampMonotonic": "15935816", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "systemd-journald.socket system.slice", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Sat 2025-03-01 12:29:24 MSK", "AssertTimestampMonotonic": "11605838", "Before": "network-pre.target shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "26929000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "yes", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Sat 2025-03-01 12:29:24 MSK", "ConditionTimestampMonotonic": "11605835", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroupId": "716", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "no", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "nftables", "DevicePolicy": "auto", "Documentation": "\"man:nft(8)\" http://wiki.nftables.org", "DynamicUser": "no", "EffectiveMemoryHigh": "2069450752", "EffectiveMemoryMax": "2069450752", "EffectiveTasksMax": "2305", "ExecMainCode": "1", "ExecMainExitTimestamp": "Sat 2025-03-01 12:29:28 MSK", "ExecMainExitTimestampMonotonic": "15935378", "ExecMainHandoffTimestamp": "Sat 2025-03-01 12:29:24 MSK", "ExecMainHandoffTimestampMonotonic": "11690190", "ExecMainPID": "292", "ExecMainStartTimestamp": "Sat 2025-03-01 12:29:24 MSK", "ExecMainStartTimestampMonotonic": "11606674", "ExecMainStatus": "0", "ExecReload": "{ path=/usr/sbin/nft ; argv[]=/usr/sbin/nft -f /etc/nftables.conf ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/usr/sbin/nft ; argv[]=/usr/sbin/nft -f /etc/nftables.conf ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/sbin/nft ; argv[]=/usr/sbin/nft -f /etc/nftables.conf ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/sbin/nft ; argv[]=/usr/sbin/nft -f /etc/nftables.conf ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStop": "{ path=/usr/sbin/nft ; argv[]=/usr/sbin/nft flush ruleset ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStopEx": "{ path=/usr/sbin/nft ; argv[]=/usr/sbin/nft flush ruleset ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/nftables.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "nftables.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Sat 2025-03-01 12:29:24 MSK", "InactiveExitTimestampMonotonic": "11608416", "InvocationID": "38d18fce81654b528ff123dedaf3eb22", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "7685", "LimitNPROCSoft": "7685", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "7685", "LimitSIGPENDINGSoft": "7685", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "1597009920", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "4141056", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "[not set]", "MemorySwapMax": "infinity", "MemorySwapPeak": "0", "MemoryZSwapCurrent": "[not set]", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "nftables.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "yes", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "full", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "yes", "RemoveIPC": "no", "Requires": "system.slice", "Restart": "no", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "no", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Sat 2025-03-01 12:29:28 MSK", "StateChangeTimestampMonotonic": "15935816", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "exited", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "2305", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "oneshot", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "sysinit.target", "Wants": "network-pre.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-03-01 16:00:01,441 p=681099 u=digitd n=ansible INFO| PLAY [Setup firewall on the haproxy machines] ****************************************************************************************************************************************************************************************************
2025-03-01 16:00:01,474 p=681099 u=digitd n=ansible INFO| TASK [Ensure that nftables package is installed] *************************************************************************************************************************************************************************************************
2025-03-01 16:00:04,320 p=681099 u=digitd n=ansible INFO| ok: [db.test.lan] => {"ansible_facts": {"discovered_interpreter_python": "/usr/bin/python3.11"}, "cache_update_time": 1740833648, "cache_updated": false, "changed": false}
2025-03-01 16:00:06,342 p=681099 u=digitd n=ansible INFO| ok: [db.test1.lan] => {"ansible_facts": {"discovered_interpreter_python": "/usr/bin/python3.11"}, "cache_update_time": 1740834004, "cache_updated": true, "changed": false}
2025-03-01 16:00:06,343 p=681099 u=digitd n=ansible INFO| TASK [Copy files to the machines] ****************************************************************************************************************************************************************************************************************
2025-03-01 16:00:07,404 p=681099 u=digitd n=ansible INFO| changed: [db.test1.lan] => {"changed": true, "checksum": "71443f52188a71935c60980f2164edae0dd205ef", "dest": "/etc/nftables.conf", "gid": 0, "group": "root", "md5sum": "c6258e27eb83d6470c0675f588f39b1a", "mode": "0751", "owner": "root", "size": 879, "src": "/root/.ansible/tmp/ansible-tmp-1740834006.4766707-681688-214720762761336/.source.conf", "state": "file", "uid": 0}
2025-03-01 16:00:07,738 p=681099 u=digitd n=ansible INFO| changed: [db.test.lan] => {"changed": true, "checksum": "71443f52188a71935c60980f2164edae0dd205ef", "dest": "/etc/nftables.conf", "gid": 0, "group": "root", "md5sum": "c6258e27eb83d6470c0675f588f39b1a", "mode": "0751", "owner": "root", "size": 879, "src": "/root/.ansible/tmp/ansible-tmp-1740834006.4783752-681687-170932132791268/.source.conf", "state": "file", "uid": 0}
2025-03-01 16:00:07,739 p=681099 u=digitd n=ansible INFO| TASK [Start and enable nftables service] *********************************************************************************************************************************************************************************************************
2025-03-01 16:00:08,997 p=681099 u=digitd n=ansible INFO| changed: [db.test1.lan] => {"changed": true, "enabled": true, "name": "nftables", "state": "started", "status": {"ActiveEnterTimestamp": "Sat 2025-03-01 12:45:23 MSK", "ActiveEnterTimestampMonotonic": "498104425523", "ActiveExitTimestamp": "Sat 2025-03-01 12:45:23 MSK", "ActiveExitTimestampMonotonic": "498104372585", "ActiveState": "active", "After": "systemd-journald.socket system.slice", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Sat 2025-03-01 12:45:23 MSK", "AssertTimestampMonotonic": "498104397624", "Before": "shutdown.target network-pre.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "14455000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Sat 2025-03-01 12:45:23 MSK", "ConditionTimestampMonotonic": "498104397622", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroupId": "11477", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "no", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "nftables", "DevicePolicy": "auto", "Documentation": "\"man:nft(8)\" http://wiki.nftables.org", "DynamicUser": "no", "ExecMainCode": "1", "ExecMainExitTimestamp": "Sat 2025-03-01 12:45:23 MSK", "ExecMainExitTimestampMonotonic": "498104425384", "ExecMainPID": "11460", "ExecMainStartTimestamp": "Sat 2025-03-01 12:45:23 MSK", "ExecMainStartTimestampMonotonic": "498104408424", "ExecMainStatus": "0", "ExecReload": "{ path=/usr/sbin/nft ; argv[]=/usr/sbin/nft -f /etc/nftables.conf ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/usr/sbin/nft ; argv[]=/usr/sbin/nft -f /etc/nftables.conf ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/sbin/nft ; argv[]=/usr/sbin/nft -f /etc/nftables.conf ; ignore_errors=no ; start_time=[Sat 2025-03-01 12:45:23 MSK] ; stop_time=[Sat 2025-03-01 12:45:23 MSK] ; pid=11460 ; code=exited ; status=0 }", "ExecStartEx": "{ path=/usr/sbin/nft ; argv[]=/usr/sbin/nft -f /etc/nftables.conf ; flags= ; start_time=[Sat 2025-03-01 12:45:23 MSK] ; stop_time=[Sat 2025-03-01 12:45:23 MSK] ; pid=11460 ; code=exited ; status=0 }", "ExecStop": "{ path=/usr/sbin/nft ; argv[]=/usr/sbin/nft flush ruleset ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStopEx": "{ path=/usr/sbin/nft ; argv[]=/usr/sbin/nft flush ruleset ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExitType": "main", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/nftables.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "nftables.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Sat 2025-03-01 12:45:23 MSK", "InactiveEnterTimestampMonotonic": "498104397091", "InactiveExitTimestamp": "Sat 2025-03-01 12:45:23 MSK", "InactiveExitTimestampMonotonic": "498104408975", "InvocationID": "1d12f9cc2c7f49d28e8e8b49d61c95b2", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "nftables.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "yes", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "full", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "yes", "RemoveIPC": "no", "Requires": "system.slice", "Restart": "no", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Sat 2025-03-01 12:45:23 MSK", "StateChangeTimestampMonotonic": "498104425523", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "exited", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "oneshot", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "sysinit.target", "Wants": "network-pre.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-03-01 16:00:09,614 p=681099 u=digitd n=ansible INFO| changed: [db.test.lan] => {"changed": true, "enabled": true, "name": "nftables", "state": "started", "status": {"ActiveEnterTimestamp": "Sat 2025-03-01 12:43:40 MSK", "ActiveEnterTimestampMonotonic": "498007516904", "ActiveExitTimestamp": "Sat 2025-03-01 12:43:40 MSK", "ActiveExitTimestampMonotonic": "498007463752", "ActiveState": "active", "After": "system.slice systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Sat 2025-03-01 12:43:40 MSK", "AssertTimestampMonotonic": "498007489743", "Before": "shutdown.target network-pre.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "14378000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Sat 2025-03-01 12:43:40 MSK", "ConditionTimestampMonotonic": "498007489741", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroupId": "12093", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "no", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "nftables", "DevicePolicy": "auto", "Documentation": "\"man:nft(8)\" http://wiki.nftables.org", "DynamicUser": "no", "ExecMainCode": "1", "ExecMainExitTimestamp": "Sat 2025-03-01 12:43:40 MSK", "ExecMainExitTimestampMonotonic": "498007516765", "ExecMainPID": "13461", "ExecMainStartTimestamp": "Sat 2025-03-01 12:43:40 MSK", "ExecMainStartTimestampMonotonic": "498007500311", "ExecMainStatus": "0", "ExecReload": "{ path=/usr/sbin/nft ; argv[]=/usr/sbin/nft -f /etc/nftables.conf ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/usr/sbin/nft ; argv[]=/usr/sbin/nft -f /etc/nftables.conf ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/sbin/nft ; argv[]=/usr/sbin/nft -f /etc/nftables.conf ; ignore_errors=no ; start_time=[Sat 2025-03-01 12:43:40 MSK] ; stop_time=[Sat 2025-03-01 12:43:40 MSK] ; pid=13461 ; code=exited ; status=0 }", "ExecStartEx": "{ path=/usr/sbin/nft ; argv[]=/usr/sbin/nft -f /etc/nftables.conf ; flags= ; start_time=[Sat 2025-03-01 12:43:40 MSK] ; stop_time=[Sat 2025-03-01 12:43:40 MSK] ; pid=13461 ; code=exited ; status=0 }", "ExecStop": "{ path=/usr/sbin/nft ; argv[]=/usr/sbin/nft flush ruleset ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStopEx": "{ path=/usr/sbin/nft ; argv[]=/usr/sbin/nft flush ruleset ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExitType": "main", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/nftables.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "nftables.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Sat 2025-03-01 12:43:40 MSK", "InactiveEnterTimestampMonotonic": "498007489199", "InactiveExitTimestamp": "Sat 2025-03-01 12:43:40 MSK", "InactiveExitTimestampMonotonic": "498007500756", "InvocationID": "7ca3902101e34cb1bec1544005d0de2c", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "nftables.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "yes", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "full", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "yes", "RemoveIPC": "no", "Requires": "system.slice", "Restart": "no", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Sat 2025-03-01 12:43:40 MSK", "StateChangeTimestampMonotonic": "498007516904", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "exited", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "oneshot", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "sysinit.target", "Wants": "network-pre.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-03-01 16:00:09,615 p=681099 u=digitd n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************************************************************************************************
2025-03-01 16:00:09,696 p=681099 u=digitd n=ansible INFO| db.master.lan              : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-03-01 16:00:09,729 p=681099 u=digitd n=ansible INFO| db.slave.lan               : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-03-01 16:00:09,763 p=681099 u=digitd n=ansible INFO| db.test.lan                : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-03-01 16:00:09,838 p=681099 u=digitd n=ansible INFO| db.test1.lan               : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
