2025-03-01 14:59:18,386 p=572215 u=digitd n=ansible INFO| db.test1.lan | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3.11"
    },
    "changed": false,
    "ping": "pong"
}
2025-03-01 14:59:18,544 p=572215 u=digitd n=ansible INFO| db.slave.lan | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3.11"
    },
    "changed": false,
    "ping": "pong"
}
2025-03-01 14:59:19,020 p=572215 u=digitd n=ansible INFO| db.master.lan | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3.11"
    },
    "changed": false,
    "ping": "pong"
}
2025-03-01 14:59:20,618 p=572215 u=digitd n=ansible INFO| db.test.lan | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3.11"
    },
    "changed": false,
    "ping": "pong"
}
2025-03-01 14:59:21,283 p=572215 u=digitd n=ansible INFO| db.etcd.lan | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3.11"
    },
    "changed": false,
    "ping": "pong"
}
2025-03-01 14:59:27,274 p=572487 u=digitd n=ansible INFO| db.master.lan | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3.11"
    },
    "changed": false,
    "ping": "pong"
}
2025-03-01 14:59:37,227 p=572818 u=digitd n=ansible INFO| PLAY [Install packages] **************************************************************************************************************************************************************************************************************************
2025-03-01 14:59:37,231 p=572818 u=digitd n=ansible INFO| TASK [Install restic and rclone] *****************************************************************************************************************************************************************************************************************
2025-03-01 14:59:50,646 p=572818 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 14:59:50,647 p=572818 u=digitd n=ansible INFO| PLAY [Configure rclone] **************************************************************************************************************************************************************************************************************************
2025-03-01 14:59:50,684 p=572818 u=digitd n=ansible INFO| TASK [Create directory for storing rclone config] ************************************************************************************************************************************************************************************************
2025-03-01 14:59:51,123 p=572818 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 14:59:51,124 p=572818 u=digitd n=ansible INFO| TASK [Copy configuration rclone file to the Master node] *****************************************************************************************************************************************************************************************
2025-03-01 14:59:52,024 p=572818 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 14:59:52,025 p=572818 u=digitd n=ansible INFO| PLAY [Create systemd daemon and timer for restic backup] *****************************************************************************************************************************************************************************************
2025-03-01 14:59:52,074 p=572818 u=digitd n=ansible INFO| TASK [Copy service file] *************************************************************************************************************************************************************************************************************************
2025-03-01 14:59:53,254 p=572818 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 14:59:53,255 p=572818 u=digitd n=ansible INFO| TASK [Copy timer file] ***************************************************************************************************************************************************************************************************************************
2025-03-01 14:59:53,997 p=572818 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 14:59:53,998 p=572818 u=digitd n=ansible INFO| TASK [Scan sha1-hash] ****************************************************************************************************************************************************************************************************************************
2025-03-01 14:59:59,976 p=572818 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 14:59:59,977 p=572818 u=digitd n=ansible INFO| TASK [Reload daemons] ****************************************************************************************************************************************************************************************************************************
2025-03-01 15:00:01,995 p=572818 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:00:01,996 p=572818 u=digitd n=ansible INFO| TASK [Start service] *****************************************************************************************************************************************************************************************************************************
2025-03-01 15:00:03,894 p=572818 u=digitd n=ansible INFO| fatal: [db.master.lan]: FAILED! => {"changed": false, "msg": "Unable to start service restic.service: Job for restic.service failed because of unavailable resources or another system error.\nSee \"systemctl status restic.service\" and \"journalctl -xeu restic.service\" for details.\n"}
2025-03-01 15:00:03,895 p=572818 u=digitd n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************************************************************************************************
2025-03-01 15:00:03,930 p=572818 u=digitd n=ansible INFO| db.master.lan              : ok=7    changed=5    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-03-01 15:08:20,362 p=588016 u=digitd n=ansible INFO| PLAY [Install packages] **************************************************************************************************************************************************************************************************************************
2025-03-01 15:08:20,366 p=588016 u=digitd n=ansible INFO| TASK [Install restic and rclone] *****************************************************************************************************************************************************************************************************************
2025-03-01 15:08:22,520 p=588016 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:08:22,521 p=588016 u=digitd n=ansible INFO| PLAY [Configure rclone] **************************************************************************************************************************************************************************************************************************
2025-03-01 15:08:22,565 p=588016 u=digitd n=ansible INFO| TASK [Create directory for storing rclone config] ************************************************************************************************************************************************************************************************
2025-03-01 15:08:23,009 p=588016 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:08:23,010 p=588016 u=digitd n=ansible INFO| TASK [Copy configuration rclone file to the Master node] *****************************************************************************************************************************************************************************************
2025-03-01 15:08:23,743 p=588016 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:08:23,744 p=588016 u=digitd n=ansible INFO| PLAY [Create systemd daemon and timer for restic backup] *****************************************************************************************************************************************************************************************
2025-03-01 15:08:23,807 p=588016 u=digitd n=ansible INFO| TASK [Copy service file] *************************************************************************************************************************************************************************************************************************
2025-03-01 15:08:24,647 p=588016 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:08:24,648 p=588016 u=digitd n=ansible INFO| TASK [Copy timer file] ***************************************************************************************************************************************************************************************************************************
2025-03-01 15:08:25,400 p=588016 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:08:25,401 p=588016 u=digitd n=ansible INFO| TASK [Create environment file] *******************************************************************************************************************************************************************************************************************
2025-03-01 15:08:27,258 p=588016 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:08:27,259 p=588016 u=digitd n=ansible INFO| TASK [Scan sha1-hash] ****************************************************************************************************************************************************************************************************************************
2025-03-01 15:08:30,064 p=588016 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:08:30,065 p=588016 u=digitd n=ansible INFO| TASK [Reload daemons] ****************************************************************************************************************************************************************************************************************************
2025-03-01 15:08:33,710 p=588016 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:08:33,712 p=588016 u=digitd n=ansible INFO| TASK [Start service] *****************************************************************************************************************************************************************************************************************************
2025-03-01 15:08:35,886 p=588016 u=digitd n=ansible INFO| fatal: [db.master.lan]: FAILED! => {"changed": false, "msg": "Unable to start service restic.service: Job for restic.service failed because the control process exited with error code.\nSee \"systemctl status restic.service\" and \"journalctl -xeu restic.service\" for details.\n"}
2025-03-01 15:08:35,887 p=588016 u=digitd n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************************************************************************************************
2025-03-01 15:08:35,921 p=588016 u=digitd n=ansible INFO| db.master.lan              : ok=8    changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-03-01 15:10:42,093 p=592208 u=digitd n=ansible INFO| PLAY [Install packages] **************************************************************************************************************************************************************************************************************************
2025-03-01 15:10:42,097 p=592208 u=digitd n=ansible INFO| TASK [Install restic and rclone] *****************************************************************************************************************************************************************************************************************
2025-03-01 15:10:44,270 p=592208 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:10:44,271 p=592208 u=digitd n=ansible INFO| PLAY [Configure rclone] **************************************************************************************************************************************************************************************************************************
2025-03-01 15:10:44,296 p=592208 u=digitd n=ansible INFO| TASK [Create directory for storing rclone config] ************************************************************************************************************************************************************************************************
2025-03-01 15:10:44,748 p=592208 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:10:44,749 p=592208 u=digitd n=ansible INFO| TASK [Copy configuration rclone file to the Master node] *****************************************************************************************************************************************************************************************
2025-03-01 15:10:45,496 p=592208 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:10:45,497 p=592208 u=digitd n=ansible INFO| PLAY [Create systemd daemon and timer for restic backup] *****************************************************************************************************************************************************************************************
2025-03-01 15:10:46,845 p=592208 u=digitd n=ansible INFO| TASK [Copy service file] *************************************************************************************************************************************************************************************************************************
2025-03-01 15:10:49,790 p=592208 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:10:49,791 p=592208 u=digitd n=ansible INFO| TASK [Copy timer file] ***************************************************************************************************************************************************************************************************************************
2025-03-01 15:10:52,944 p=592208 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:10:52,945 p=592208 u=digitd n=ansible INFO| TASK [Create environment file] *******************************************************************************************************************************************************************************************************************
2025-03-01 15:10:53,541 p=592208 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:10:53,542 p=592208 u=digitd n=ansible INFO| TASK [Scan sha1-hash] ****************************************************************************************************************************************************************************************************************************
2025-03-01 15:10:54,454 p=592208 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:10:54,456 p=592208 u=digitd n=ansible INFO| TASK [Reload daemons] ****************************************************************************************************************************************************************************************************************************
2025-03-01 15:10:55,514 p=592208 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:10:55,515 p=592208 u=digitd n=ansible INFO| TASK [Start service] *****************************************************************************************************************************************************************************************************************************
2025-03-01 15:10:57,022 p=592208 u=digitd n=ansible INFO| fatal: [db.master.lan]: FAILED! => {"changed": false, "msg": "Unable to start service restic.service: Job for restic.service failed because the control process exited with error code.\nSee \"systemctl status restic.service\" and \"journalctl -xeu restic.service\" for details.\n"}
2025-03-01 15:10:57,023 p=592208 u=digitd n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************************************************************************************************
2025-03-01 15:10:57,143 p=592208 u=digitd n=ansible INFO| db.master.lan              : ok=8    changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-03-01 15:11:39,058 p=593906 u=digitd n=ansible INFO| PLAY [Install packages] **************************************************************************************************************************************************************************************************************************
2025-03-01 15:11:39,062 p=593906 u=digitd n=ansible INFO| TASK [Install restic and rclone] *****************************************************************************************************************************************************************************************************************
2025-03-01 15:11:41,140 p=593906 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:11:41,141 p=593906 u=digitd n=ansible INFO| PLAY [Configure rclone] **************************************************************************************************************************************************************************************************************************
2025-03-01 15:11:41,199 p=593906 u=digitd n=ansible INFO| TASK [Create directory for storing rclone config] ************************************************************************************************************************************************************************************************
2025-03-01 15:11:41,802 p=593906 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:11:41,803 p=593906 u=digitd n=ansible INFO| TASK [Copy configuration rclone file to the Master node] *****************************************************************************************************************************************************************************************
2025-03-01 15:11:42,592 p=593906 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:11:42,593 p=593906 u=digitd n=ansible INFO| PLAY [Create systemd daemon and timer for restic backup] *****************************************************************************************************************************************************************************************
2025-03-01 15:11:42,691 p=593906 u=digitd n=ansible INFO| TASK [Copy service file] *************************************************************************************************************************************************************************************************************************
2025-03-01 15:11:43,694 p=593906 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:11:43,695 p=593906 u=digitd n=ansible INFO| TASK [Copy timer file] ***************************************************************************************************************************************************************************************************************************
2025-03-01 15:11:45,595 p=593906 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:11:45,596 p=593906 u=digitd n=ansible INFO| TASK [Create environment file] *******************************************************************************************************************************************************************************************************************
2025-03-01 15:11:47,395 p=593906 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:11:47,396 p=593906 u=digitd n=ansible INFO| TASK [Scan sha1-hash] ****************************************************************************************************************************************************************************************************************************
2025-03-01 15:11:49,447 p=593906 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:11:49,448 p=593906 u=digitd n=ansible INFO| TASK [Reload daemons] ****************************************************************************************************************************************************************************************************************************
2025-03-01 15:11:50,960 p=593906 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:11:50,961 p=593906 u=digitd n=ansible INFO| TASK [Start service] *****************************************************************************************************************************************************************************************************************************
2025-03-01 15:12:09,366 p=593906 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:12:09,367 p=593906 u=digitd n=ansible INFO| TASK [Enable timer] ******************************************************************************************************************************************************************************************************************************
2025-03-01 15:12:10,604 p=593906 u=digitd n=ansible INFO| fatal: [db.master.lan]: FAILED! => {"changed": false, "msg": "Unsupported parameters for (ansible.legacy.systemd) module: stated. Supported parameters include: daemon_reexec, daemon_reload, enabled, force, masked, name, no_block, scope, state (daemon-reexec, daemon-reload, service, unit)."}
2025-03-01 15:12:10,605 p=593906 u=digitd n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************************************************************************************************
2025-03-01 15:12:10,645 p=593906 u=digitd n=ansible INFO| db.master.lan              : ok=9    changed=4    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-03-01 15:13:20,468 p=597118 u=digitd n=ansible INFO| PLAY [Install packages] **************************************************************************************************************************************************************************************************************************
2025-03-01 15:13:20,472 p=597118 u=digitd n=ansible INFO| TASK [Install restic and rclone] *****************************************************************************************************************************************************************************************************************
2025-03-01 15:13:24,741 p=597118 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:13:24,742 p=597118 u=digitd n=ansible INFO| PLAY [Configure rclone] **************************************************************************************************************************************************************************************************************************
2025-03-01 15:13:24,833 p=597118 u=digitd n=ansible INFO| TASK [Create directory for storing rclone config] ************************************************************************************************************************************************************************************************
2025-03-01 15:13:25,293 p=597118 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:13:25,294 p=597118 u=digitd n=ansible INFO| TASK [Copy configuration rclone file to the Master node] *****************************************************************************************************************************************************************************************
2025-03-01 15:13:26,137 p=597118 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:13:26,139 p=597118 u=digitd n=ansible INFO| PLAY [Create systemd daemon and timer for restic backup] *****************************************************************************************************************************************************************************************
2025-03-01 15:13:26,291 p=597118 u=digitd n=ansible INFO| TASK [Copy service file] *************************************************************************************************************************************************************************************************************************
2025-03-01 15:13:27,058 p=597118 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:13:27,059 p=597118 u=digitd n=ansible INFO| TASK [Copy timer file] ***************************************************************************************************************************************************************************************************************************
2025-03-01 15:13:27,745 p=597118 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:13:27,746 p=597118 u=digitd n=ansible INFO| TASK [Create environment file] *******************************************************************************************************************************************************************************************************************
2025-03-01 15:13:28,209 p=597118 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:13:28,210 p=597118 u=digitd n=ansible INFO| TASK [Scan sha1-hash] ****************************************************************************************************************************************************************************************************************************
2025-03-01 15:13:29,411 p=597118 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:13:29,412 p=597118 u=digitd n=ansible INFO| TASK [Reload daemons] ****************************************************************************************************************************************************************************************************************************
2025-03-01 15:13:30,512 p=597118 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:13:30,513 p=597118 u=digitd n=ansible INFO| TASK [Start service] *****************************************************************************************************************************************************************************************************************************
2025-03-01 15:13:39,888 p=597118 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:13:39,889 p=597118 u=digitd n=ansible INFO| TASK [Enable timer] ******************************************************************************************************************************************************************************************************************************
2025-03-01 15:13:41,679 p=597118 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:13:41,680 p=597118 u=digitd n=ansible INFO| PLAY [Backup creation] ***************************************************************************************************************************************************************************************************************************
2025-03-01 15:13:41,774 p=597118 u=digitd n=ansible INFO| TASK [Initialize repo] ***************************************************************************************************************************************************************************************************************************
2025-03-01 15:13:42,225 p=597118 u=digitd n=ansible INFO| fatal: [db.master.lan]: FAILED! => {"changed": true, "cmd": ["restic", "-r", "rclone:etcd-serv:/mnt/restic_backups", "init"], "delta": "0:00:00.037066", "end": "2025-03-01 15:13:42.185804", "msg": "non-zero return code", "rc": 1, "start": "2025-03-01 15:13:42.148738", "stderr": "unable to get terminal state: inappropriate ioctl for device\ninappropriate ioctl for device\nunable to read password\nmain.ReadPassword\n\tgithub.com/restic/restic/cmd/restic/global.go:370\nmain.ReadPasswordTwice\n\tgithub.com/restic/restic/cmd/restic/global.go:384\nmain.runInit\n\tgithub.com/restic/restic/cmd/restic/cmd_init.go:85\nmain.init.func21\n\tgithub.com/restic/restic/cmd/restic/cmd_init.go:32\ngithub.com/spf13/cobra.(*Command).execute\n\tgithub.com/spf13/cobra/command.go:985\ngithub.com/spf13/cobra.(*Command).ExecuteC\n\tgithub.com/spf13/cobra/command.go:1117\ngithub.com/spf13/cobra.(*Command).Execute\n\tgithub.com/spf13/cobra/command.go:1041\ngithub.com/spf13/cobra.(*Command).ExecuteContext\n\tgithub.com/spf13/cobra/command.go:1034\nmain.main\n\tgithub.com/restic/restic/cmd/restic/main.go:142\nruntime.main\n\truntime/proc.go:272\nruntime.goexit\n\truntime/asm_amd64.s:1700", "stderr_lines": ["unable to get terminal state: inappropriate ioctl for device", "inappropriate ioctl for device", "unable to read password", "main.ReadPassword", "\tgithub.com/restic/restic/cmd/restic/global.go:370", "main.ReadPasswordTwice", "\tgithub.com/restic/restic/cmd/restic/global.go:384", "main.runInit", "\tgithub.com/restic/restic/cmd/restic/cmd_init.go:85", "main.init.func21", "\tgithub.com/restic/restic/cmd/restic/cmd_init.go:32", "github.com/spf13/cobra.(*Command).execute", "\tgithub.com/spf13/cobra/command.go:985", "github.com/spf13/cobra.(*Command).ExecuteC", "\tgithub.com/spf13/cobra/command.go:1117", "github.com/spf13/cobra.(*Command).Execute", "\tgithub.com/spf13/cobra/command.go:1041", "github.com/spf13/cobra.(*Command).ExecuteContext", "\tgithub.com/spf13/cobra/command.go:1034", "main.main", "\tgithub.com/restic/restic/cmd/restic/main.go:142", "runtime.main", "\truntime/proc.go:272", "runtime.goexit", "\truntime/asm_amd64.s:1700"], "stdout": "", "stdout_lines": []}
2025-03-01 15:13:42,225 p=597118 u=digitd n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************************************************************************************************
2025-03-01 15:13:42,271 p=597118 u=digitd n=ansible INFO| db.master.lan              : ok=10   changed=4    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-03-01 15:26:50,293 p=620806 u=digitd n=ansible INFO| PLAY [Install packages] **************************************************************************************************************************************************************************************************************************
2025-03-01 15:26:50,297 p=620806 u=digitd n=ansible INFO| TASK [Install restic and rclone] *****************************************************************************************************************************************************************************************************************
2025-03-01 15:26:52,598 p=620806 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:26:52,599 p=620806 u=digitd n=ansible INFO| PLAY [Configure rclone] **************************************************************************************************************************************************************************************************************************
2025-03-01 15:26:52,657 p=620806 u=digitd n=ansible INFO| TASK [Create directory for storing rclone config] ************************************************************************************************************************************************************************************************
2025-03-01 15:26:53,116 p=620806 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:26:53,117 p=620806 u=digitd n=ansible INFO| TASK [Copy configuration rclone file to the Master node] *****************************************************************************************************************************************************************************************
2025-03-01 15:26:53,897 p=620806 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:26:53,898 p=620806 u=digitd n=ansible INFO| PLAY [Create systemd daemon and timer for restic backup] *****************************************************************************************************************************************************************************************
2025-03-01 15:26:53,940 p=620806 u=digitd n=ansible INFO| TASK [Copy service file] *************************************************************************************************************************************************************************************************************************
2025-03-01 15:26:54,620 p=620806 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:26:54,621 p=620806 u=digitd n=ansible INFO| TASK [Copy timer file] ***************************************************************************************************************************************************************************************************************************
2025-03-01 15:26:55,331 p=620806 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:26:55,332 p=620806 u=digitd n=ansible INFO| TASK [Create environment file] *******************************************************************************************************************************************************************************************************************
2025-03-01 15:26:55,725 p=620806 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:26:55,726 p=620806 u=digitd n=ansible INFO| TASK [Scan sha1-hash] ****************************************************************************************************************************************************************************************************************************
2025-03-01 15:26:56,676 p=620806 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:26:56,677 p=620806 u=digitd n=ansible INFO| TASK [Reload daemons] ****************************************************************************************************************************************************************************************************************************
2025-03-01 15:27:00,205 p=620806 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:27:00,207 p=620806 u=digitd n=ansible INFO| TASK [Start service] *****************************************************************************************************************************************************************************************************************************
2025-03-01 15:27:10,061 p=620806 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:27:10,061 p=620806 u=digitd n=ansible INFO| TASK [Enable timer] ******************************************************************************************************************************************************************************************************************************
2025-03-01 15:27:11,672 p=620806 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:27:11,673 p=620806 u=digitd n=ansible INFO| PLAY [Backup creation] ***************************************************************************************************************************************************************************************************************************
2025-03-01 15:27:11,714 p=620806 u=digitd n=ansible INFO| TASK [Initialize repo] ***************************************************************************************************************************************************************************************************************************
2025-03-01 15:27:12,371 p=620806 u=digitd n=ansible INFO| fatal: [db.master.lan]: FAILED! => {"changed": true, "cmd": ["restic", "-r", "rclone:etcd-serv:/mnt/restic_backups", "init"], "delta": "0:00:00.283924", "end": "2025-03-01 15:27:12.327041", "msg": "non-zero return code", "rc": 1, "start": "2025-03-01 15:27:12.043117", "stderr": "Fatal: create repository at rclone:etcd-serv:/mnt/restic_backups failed: Fatal: unable to open repository at rclone:etcd-serv:/mnt/restic_backups: config file already exists", "stderr_lines": ["Fatal: create repository at rclone:etcd-serv:/mnt/restic_backups failed: Fatal: unable to open repository at rclone:etcd-serv:/mnt/restic_backups: config file already exists"], "stdout": "", "stdout_lines": []}
2025-03-01 15:27:12,372 p=620806 u=digitd n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************************************************************************************************
2025-03-01 15:27:12,412 p=620806 u=digitd n=ansible INFO| db.master.lan              : ok=10   changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-03-01 15:27:31,128 p=622115 u=digitd n=ansible INFO| PLAY [Install packages] **************************************************************************************************************************************************************************************************************************
2025-03-01 15:27:31,132 p=622115 u=digitd n=ansible INFO| TASK [Install restic and rclone] *****************************************************************************************************************************************************************************************************************
2025-03-01 15:27:37,496 p=622115 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:27:37,497 p=622115 u=digitd n=ansible INFO| PLAY [Configure rclone] **************************************************************************************************************************************************************************************************************************
2025-03-01 15:27:37,620 p=622115 u=digitd n=ansible INFO| TASK [Create directory for storing rclone config] ************************************************************************************************************************************************************************************************
2025-03-01 15:27:38,110 p=622115 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:27:38,112 p=622115 u=digitd n=ansible INFO| TASK [Copy configuration rclone file to the Master node] *****************************************************************************************************************************************************************************************
2025-03-01 15:27:38,904 p=622115 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:27:38,905 p=622115 u=digitd n=ansible INFO| PLAY [Create systemd daemon and timer for restic backup] *****************************************************************************************************************************************************************************************
2025-03-01 15:27:38,995 p=622115 u=digitd n=ansible INFO| TASK [Copy service file] *************************************************************************************************************************************************************************************************************************
2025-03-01 15:27:39,692 p=622115 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:27:39,692 p=622115 u=digitd n=ansible INFO| TASK [Copy timer file] ***************************************************************************************************************************************************************************************************************************
2025-03-01 15:27:40,345 p=622115 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:27:40,346 p=622115 u=digitd n=ansible INFO| TASK [Create environment file] *******************************************************************************************************************************************************************************************************************
2025-03-01 15:27:40,933 p=622115 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:27:40,934 p=622115 u=digitd n=ansible INFO| TASK [Scan sha1-hash] ****************************************************************************************************************************************************************************************************************************
2025-03-01 15:27:41,846 p=622115 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:27:41,847 p=622115 u=digitd n=ansible INFO| TASK [Reload daemons] ****************************************************************************************************************************************************************************************************************************
2025-03-01 15:27:43,319 p=622115 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:27:43,320 p=622115 u=digitd n=ansible INFO| TASK [Start service] *****************************************************************************************************************************************************************************************************************************
2025-03-01 15:27:52,229 p=622115 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:27:52,229 p=622115 u=digitd n=ansible INFO| TASK [Enable timer] ******************************************************************************************************************************************************************************************************************************
2025-03-01 15:27:53,306 p=622115 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:27:53,308 p=622115 u=digitd n=ansible INFO| PLAY [Backup creation] ***************************************************************************************************************************************************************************************************************************
2025-03-01 15:27:53,344 p=622115 u=digitd n=ansible INFO| TASK [] ******************************************************************************************************************************************************************************************************************************************
2025-03-01 15:27:53,383 p=622115 u=digitd n=ansible INFO| fatal: [db.master.lan]: FAILED! => {"msg": "The task includes an option with an undefined variable.. 'restic_init' is undefined\n\nThe error appears to be in '/run/media/digitd/NFS/git/travelata_test/ansible/restic_setup/restic_backup.yml': line 96, column 7, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n    - name: \" \"\n      ^ here\n"}
2025-03-01 15:27:53,409 p=622115 u=digitd n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************************************************************************************************
2025-03-01 15:27:53,442 p=622115 u=digitd n=ansible INFO| db.master.lan              : ok=10   changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-03-01 15:28:28,427 p=623896 u=digitd n=ansible INFO| PLAY [Install packages] **************************************************************************************************************************************************************************************************************************
2025-03-01 15:28:28,430 p=623896 u=digitd n=ansible INFO| TASK [Install restic and rclone] *****************************************************************************************************************************************************************************************************************
2025-03-01 15:28:30,433 p=623896 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:28:30,434 p=623896 u=digitd n=ansible INFO| PLAY [Configure rclone] **************************************************************************************************************************************************************************************************************************
2025-03-01 15:28:30,501 p=623896 u=digitd n=ansible INFO| TASK [Create directory for storing rclone config] ************************************************************************************************************************************************************************************************
2025-03-01 15:28:31,033 p=623896 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:28:31,034 p=623896 u=digitd n=ansible INFO| TASK [Copy configuration rclone file to the Master node] *****************************************************************************************************************************************************************************************
2025-03-01 15:28:31,741 p=623896 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:28:31,743 p=623896 u=digitd n=ansible INFO| PLAY [Create systemd daemon and timer for restic backup] *****************************************************************************************************************************************************************************************
2025-03-01 15:28:31,774 p=623896 u=digitd n=ansible INFO| TASK [Copy service file] *************************************************************************************************************************************************************************************************************************
2025-03-01 15:28:32,475 p=623896 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:28:32,476 p=623896 u=digitd n=ansible INFO| TASK [Copy timer file] ***************************************************************************************************************************************************************************************************************************
2025-03-01 15:28:33,174 p=623896 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:28:33,175 p=623896 u=digitd n=ansible INFO| TASK [Create environment file] *******************************************************************************************************************************************************************************************************************
2025-03-01 15:28:33,532 p=623896 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:28:33,533 p=623896 u=digitd n=ansible INFO| TASK [Scan sha1-hash] ****************************************************************************************************************************************************************************************************************************
2025-03-01 15:28:34,427 p=623896 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:28:34,428 p=623896 u=digitd n=ansible INFO| TASK [Reload daemons] ****************************************************************************************************************************************************************************************************************************
2025-03-01 15:28:35,528 p=623896 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:28:35,529 p=623896 u=digitd n=ansible INFO| TASK [Start service] *****************************************************************************************************************************************************************************************************************************
2025-03-01 15:28:44,600 p=623896 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:28:44,600 p=623896 u=digitd n=ansible INFO| TASK [Enable timer] ******************************************************************************************************************************************************************************************************************************
2025-03-01 15:28:46,794 p=623896 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:28:46,795 p=623896 u=digitd n=ansible INFO| PLAY [Backup creation] ***************************************************************************************************************************************************************************************************************************
2025-03-01 15:28:46,831 p=623896 u=digitd n=ansible INFO| TASK [] ******************************************************************************************************************************************************************************************************************************************
2025-03-01 15:28:46,862 p=623896 u=digitd n=ansible INFO| fatal: [db.master.lan]: FAILED! => {"msg": "The task includes an option with an undefined variable.. 'restic_init' is undefined\n\nThe error appears to be in '/run/media/digitd/NFS/git/travelata_test/ansible/restic_setup/restic_backup.yml': line 96, column 7, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n    - name: \" \"\n      ^ here\n"}
2025-03-01 15:28:46,888 p=623896 u=digitd n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************************************************************************************************
2025-03-01 15:28:46,987 p=623896 u=digitd n=ansible INFO| db.master.lan              : ok=10   changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-03-01 15:34:27,759 p=634595 u=digitd n=ansible INFO| PLAY [Install packages] **************************************************************************************************************************************************************************************************************************
2025-03-01 15:34:27,763 p=634595 u=digitd n=ansible INFO| TASK [Install restic and rclone] *****************************************************************************************************************************************************************************************************************
2025-03-01 15:34:30,279 p=634595 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:34:30,281 p=634595 u=digitd n=ansible INFO| PLAY [Configure rclone] **************************************************************************************************************************************************************************************************************************
2025-03-01 15:34:30,310 p=634595 u=digitd n=ansible INFO| TASK [Create directory for storing rclone config] ************************************************************************************************************************************************************************************************
2025-03-01 15:34:30,766 p=634595 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:34:30,767 p=634595 u=digitd n=ansible INFO| TASK [Copy configuration rclone file to the Master node] *****************************************************************************************************************************************************************************************
2025-03-01 15:34:31,461 p=634595 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:34:31,462 p=634595 u=digitd n=ansible INFO| PLAY [Create systemd daemon and timer for restic backup] *****************************************************************************************************************************************************************************************
2025-03-01 15:34:31,510 p=634595 u=digitd n=ansible INFO| TASK [Copy service file] *************************************************************************************************************************************************************************************************************************
2025-03-01 15:34:32,212 p=634595 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:34:32,214 p=634595 u=digitd n=ansible INFO| TASK [Copy timer file] ***************************************************************************************************************************************************************************************************************************
2025-03-01 15:34:33,011 p=634595 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:34:33,012 p=634595 u=digitd n=ansible INFO| TASK [Create environment file] *******************************************************************************************************************************************************************************************************************
2025-03-01 15:34:33,435 p=634595 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:34:33,436 p=634595 u=digitd n=ansible INFO| TASK [Scan sha1-hash] ****************************************************************************************************************************************************************************************************************************
2025-03-01 15:34:34,631 p=634595 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:34:34,632 p=634595 u=digitd n=ansible INFO| TASK [Reload daemons] ****************************************************************************************************************************************************************************************************************************
2025-03-01 15:34:35,723 p=634595 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:34:35,724 p=634595 u=digitd n=ansible INFO| TASK [Start service] *****************************************************************************************************************************************************************************************************************************
2025-03-01 15:34:49,566 p=634595 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:34:49,567 p=634595 u=digitd n=ansible INFO| TASK [Enable timer] ******************************************************************************************************************************************************************************************************************************
2025-03-01 15:34:51,922 p=634595 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:34:51,923 p=634595 u=digitd n=ansible INFO| PLAY [Backup creation] ***************************************************************************************************************************************************************************************************************************
2025-03-01 15:34:51,959 p=634595 u=digitd n=ansible INFO| TASK [] ******************************************************************************************************************************************************************************************************************************************
2025-03-01 15:34:52,047 p=634595 u=digitd n=ansible INFO| fatal: [db.master.lan]: FAILED! => {"msg": "The task includes an option with an undefined variable.. 'restic_init' is undefined\n\nThe error appears to be in '/run/media/digitd/NFS/git/travelata_test/ansible/restic_setup/restic_backup.yml': line 96, column 7, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n    - name: \" \"\n      ^ here\n"}
2025-03-01 15:34:52,082 p=634595 u=digitd n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************************************************************************************************
2025-03-01 15:34:52,124 p=634595 u=digitd n=ansible INFO| db.master.lan              : ok=10   changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-03-01 15:35:55,325 p=637198 u=digitd n=ansible INFO| PLAY [Install packages] **************************************************************************************************************************************************************************************************************************
2025-03-01 15:35:55,329 p=637198 u=digitd n=ansible INFO| TASK [Install restic and rclone] *****************************************************************************************************************************************************************************************************************
2025-03-01 15:35:57,636 p=637198 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:35:57,638 p=637198 u=digitd n=ansible INFO| PLAY [Configure rclone] **************************************************************************************************************************************************************************************************************************
2025-03-01 15:35:57,670 p=637198 u=digitd n=ansible INFO| TASK [Create directory for storing rclone config] ************************************************************************************************************************************************************************************************
2025-03-01 15:35:58,188 p=637198 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:35:58,190 p=637198 u=digitd n=ansible INFO| TASK [Copy configuration rclone file to the Master node] *****************************************************************************************************************************************************************************************
2025-03-01 15:35:58,936 p=637198 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:35:58,937 p=637198 u=digitd n=ansible INFO| PLAY [Create systemd daemon and timer for restic backup] *****************************************************************************************************************************************************************************************
2025-03-01 15:35:59,004 p=637198 u=digitd n=ansible INFO| TASK [Copy service file] *************************************************************************************************************************************************************************************************************************
2025-03-01 15:35:59,770 p=637198 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:35:59,771 p=637198 u=digitd n=ansible INFO| TASK [Copy timer file] ***************************************************************************************************************************************************************************************************************************
2025-03-01 15:36:00,477 p=637198 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:36:00,478 p=637198 u=digitd n=ansible INFO| TASK [Create environment file] *******************************************************************************************************************************************************************************************************************
2025-03-01 15:36:00,899 p=637198 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:36:00,900 p=637198 u=digitd n=ansible INFO| TASK [Scan sha1-hash] ****************************************************************************************************************************************************************************************************************************
2025-03-01 15:36:01,812 p=637198 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:36:01,813 p=637198 u=digitd n=ansible INFO| TASK [Reload daemons] ****************************************************************************************************************************************************************************************************************************
2025-03-01 15:36:02,908 p=637198 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:36:02,909 p=637198 u=digitd n=ansible INFO| TASK [Start service] *****************************************************************************************************************************************************************************************************************************
2025-03-01 15:36:12,778 p=637198 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:36:12,779 p=637198 u=digitd n=ansible INFO| TASK [Enable timer] ******************************************************************************************************************************************************************************************************************************
2025-03-01 15:36:15,623 p=637198 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:36:15,624 p=637198 u=digitd n=ansible INFO| PLAY [Backup creation] ***************************************************************************************************************************************************************************************************************************
2025-03-01 15:36:15,702 p=637198 u=digitd n=ansible INFO| TASK [Create backup] *****************************************************************************************************************************************************************************************************************************
2025-03-01 15:36:16,128 p=637198 u=digitd n=ansible INFO| fatal: [db.master.lan]: FAILED! => {"changed": true, "cmd": ["restic", "-r", "rclone:etcd-serv:/mnt/restic_backups", "backup", "/", "--tab", "master_node_patroni", "--one-file-system"], "delta": "0:00:00.016276", "end": "2025-03-01 15:36:16.097096", "msg": "non-zero return code", "rc": 1, "start": "2025-03-01 15:36:16.080820", "stderr": "unknown flag: --tab", "stderr_lines": ["unknown flag: --tab"], "stdout": "", "stdout_lines": []}
2025-03-01 15:36:16,129 p=637198 u=digitd n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************************************************************************************************
2025-03-01 15:36:16,167 p=637198 u=digitd n=ansible INFO| db.master.lan              : ok=10   changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-03-01 15:36:33,404 p=638561 u=digitd n=ansible INFO| PLAY [Install packages] **************************************************************************************************************************************************************************************************************************
2025-03-01 15:36:33,408 p=638561 u=digitd n=ansible INFO| TASK [Install restic and rclone] *****************************************************************************************************************************************************************************************************************
2025-03-01 15:36:35,470 p=638561 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:36:35,472 p=638561 u=digitd n=ansible INFO| PLAY [Configure rclone] **************************************************************************************************************************************************************************************************************************
2025-03-01 15:36:35,517 p=638561 u=digitd n=ansible INFO| TASK [Create directory for storing rclone config] ************************************************************************************************************************************************************************************************
2025-03-01 15:36:36,002 p=638561 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:36:36,004 p=638561 u=digitd n=ansible INFO| TASK [Copy configuration rclone file to the Master node] *****************************************************************************************************************************************************************************************
2025-03-01 15:36:36,830 p=638561 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:36:36,831 p=638561 u=digitd n=ansible INFO| PLAY [Create systemd daemon and timer for restic backup] *****************************************************************************************************************************************************************************************
2025-03-01 15:36:36,942 p=638561 u=digitd n=ansible INFO| TASK [Copy service file] *************************************************************************************************************************************************************************************************************************
2025-03-01 15:36:37,937 p=638561 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:36:37,938 p=638561 u=digitd n=ansible INFO| TASK [Copy timer file] ***************************************************************************************************************************************************************************************************************************
2025-03-01 15:36:38,646 p=638561 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:36:38,647 p=638561 u=digitd n=ansible INFO| TASK [Create environment file] *******************************************************************************************************************************************************************************************************************
2025-03-01 15:36:39,119 p=638561 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:36:39,121 p=638561 u=digitd n=ansible INFO| TASK [Scan sha1-hash] ****************************************************************************************************************************************************************************************************************************
2025-03-01 15:36:40,110 p=638561 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:36:40,112 p=638561 u=digitd n=ansible INFO| TASK [Reload daemons] ****************************************************************************************************************************************************************************************************************************
2025-03-01 15:36:41,226 p=638561 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:36:41,228 p=638561 u=digitd n=ansible INFO| TASK [Start service] *****************************************************************************************************************************************************************************************************************************
2025-03-01 15:36:50,974 p=638561 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:36:50,975 p=638561 u=digitd n=ansible INFO| TASK [Enable timer] ******************************************************************************************************************************************************************************************************************************
2025-03-01 15:36:55,527 p=638561 u=digitd n=ansible INFO| ok: [db.master.lan]
2025-03-01 15:36:55,528 p=638561 u=digitd n=ansible INFO| PLAY [Backup creation] ***************************************************************************************************************************************************************************************************************************
2025-03-01 15:36:55,573 p=638561 u=digitd n=ansible INFO| TASK [Create backup] *****************************************************************************************************************************************************************************************************************************
2025-03-01 15:37:02,302 p=638561 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:37:02,303 p=638561 u=digitd n=ansible INFO| TASK [] ******************************************************************************************************************************************************************************************************************************************
2025-03-01 15:37:03,665 p=638561 u=digitd n=ansible INFO| ok: [db.master.lan] => {
    "msg": [
        "using parent snapshot c18af8c2",
        "",
        "Files:           1 new,     3 changed, 71856 unmodified",
        "Dirs:            1 new,     8 changed,  8767 unmodified",
        "Added to the repository: 52.470 MiB (10.850 MiB stored)",
        "",
        "processed 71860 files, 6.639 GiB in 0:05",
        "snapshot 6400fecd saved"
    ]
}
2025-03-01 15:37:04,085 p=638561 u=digitd n=ansible INFO| TASK [View restic snapshots in repo] *************************************************************************************************************************************************************************************************************
2025-03-01 15:37:05,732 p=638561 u=digitd n=ansible INFO| changed: [db.master.lan]
2025-03-01 15:37:05,733 p=638561 u=digitd n=ansible INFO| TASK [] ******************************************************************************************************************************************************************************************************************************************
2025-03-01 15:37:05,783 p=638561 u=digitd n=ansible INFO| ok: [db.master.lan] => {
    "msg": [
        "ID        Time                 Host        Tags                 Paths  Size",
        "--------------------------------------------------------------------------------",
        "7a675871  2025-03-01 13:39:12  dbmaster    master_node_patroni  /      6.499 GiB",
        "0af09dba  2025-03-01 15:11:52  dbmaster    master_node_patroni  /      6.554 GiB",
        "070a30f8  2025-03-01 15:13:31  dbmaster    master_node_patroni  /      6.562 GiB",
        "31bf49ae  2025-03-01 15:27:01  dbmaster    master_node_patroni  /      6.593 GiB",
        "180d922a  2025-03-01 15:27:44  dbmaster    master_node_patroni  /      6.601 GiB",
        "f31cccc3  2025-03-01 15:28:36  dbmaster    master_node_patroni  /      6.616 GiB",
        "ed436dcb  2025-03-01 15:31:02  dbmaster    master_node_patroni  /      6.624 GiB",
        "994922de  2025-03-01 15:34:37  dbmaster    master_node_patroni  /      6.632 GiB",
        "fec35391  2025-03-01 15:36:04  dbmaster    master_node_patroni  /      6.632 GiB",
        "c18af8c2  2025-03-01 15:36:42  dbmaster    master_node_patroni  /      6.640 GiB",
        "6400fecd  2025-03-01 15:36:56  dbmaster    master_node_patroni  /      6.639 GiB",
        "--------------------------------------------------------------------------------",
        "11 snapshots"
    ]
}
2025-03-01 15:37:05,805 p=638561 u=digitd n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************************************************************************************************
2025-03-01 15:37:05,896 p=638561 u=digitd n=ansible INFO| db.master.lan              : ok=14   changed=5    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-03-01 16:13:28,886 p=706312 u=digitd n=ansible INFO| Using /run/media/digitd/NFS/git/travelata_test/ansible/restic_setup/ansible.cfg as config file
2025-03-01 16:13:29,014 p=706312 u=digitd n=ansible INFO| PLAY [Install packages] **************************************************************************************************************************************************************************************************************************
2025-03-01 16:13:29,018 p=706312 u=digitd n=ansible INFO| TASK [Install restic and rclone] *****************************************************************************************************************************************************************************************************************
2025-03-01 16:13:32,343 p=706312 u=digitd n=ansible INFO| ok: [db.master.lan] => {"ansible_facts": {"discovered_interpreter_python": "/usr/bin/python3.11"}, "cache_update_time": 1740830385, "cache_updated": false, "changed": false}
2025-03-01 16:13:32,344 p=706312 u=digitd n=ansible INFO| PLAY [Configure rclone] **************************************************************************************************************************************************************************************************************************
2025-03-01 16:13:32,373 p=706312 u=digitd n=ansible INFO| TASK [Create directory for storing rclone config] ************************************************************************************************************************************************************************************************
2025-03-01 16:13:32,826 p=706312 u=digitd n=ansible INFO| ok: [db.master.lan] => {"changed": false, "gid": 0, "group": "root", "mode": "0764", "owner": "root", "path": "/root/.config/rclone", "size": 4096, "state": "directory", "uid": 0}
2025-03-01 16:13:32,828 p=706312 u=digitd n=ansible INFO| TASK [Copy configuration rclone file to the Master node] *****************************************************************************************************************************************************************************************
2025-03-01 16:13:33,531 p=706312 u=digitd n=ansible INFO| ok: [db.master.lan] => {"changed": false, "checksum": "e174fa86f9ffd5ab047a37d664e9b990210c5a8a", "dest": "/root/.config/rclone/rclone.conf", "gid": 0, "group": "root", "mode": "0764", "owner": "root", "path": "/root/.config/rclone/rclone.conf", "size": 201, "state": "file", "uid": 0}
2025-03-01 16:13:33,532 p=706312 u=digitd n=ansible INFO| PLAY [Create systemd daemon and timer for restic backup] *****************************************************************************************************************************************************************************************
2025-03-01 16:13:33,648 p=706312 u=digitd n=ansible INFO| TASK [Copy service file] *************************************************************************************************************************************************************************************************************************
2025-03-01 16:13:34,333 p=706312 u=digitd n=ansible INFO| ok: [db.master.lan] => {"changed": false, "checksum": "6eadb31f765b6bb78ab0fbfae9b015e232fc10f6", "dest": "/etc/systemd/system/restic.service", "gid": 0, "group": "root", "mode": "0641", "owner": "root", "path": "/etc/systemd/system/restic.service", "size": 400, "state": "file", "uid": 0}
2025-03-01 16:13:34,334 p=706312 u=digitd n=ansible INFO| TASK [Copy timer file] ***************************************************************************************************************************************************************************************************************************
2025-03-01 16:13:35,050 p=706312 u=digitd n=ansible INFO| ok: [db.master.lan] => {"changed": false, "checksum": "944c74304c438963936533fe9b51dcd6fbf1c470", "dest": "/etc/systemd/system/restic.timer", "gid": 0, "group": "root", "mode": "0641", "owner": "root", "path": "/etc/systemd/system/restic.timer", "size": 134, "state": "file", "uid": 0}
2025-03-01 16:13:35,050 p=706312 u=digitd n=ansible INFO| TASK [Create environment file] *******************************************************************************************************************************************************************************************************************
2025-03-01 16:13:35,466 p=706312 u=digitd n=ansible INFO| changed: [db.master.lan] => {"changed": true, "dest": "/root/.restic.env", "gid": 0, "group": "root", "mode": "0640", "owner": "root", "size": 27, "state": "file", "uid": 0}
2025-03-01 16:13:35,467 p=706312 u=digitd n=ansible INFO| TASK [Scan sha1-hash] ****************************************************************************************************************************************************************************************************************************
2025-03-01 16:13:36,415 p=706312 u=digitd n=ansible INFO| changed: [db.master.lan] => {"changed": true, "cmd": ["sudo", "-u", "postgres", "ssh-keyscan", "-H", "db.etcd.lan", ">>", "/var/lib/postgresql/.ssh/known_hosts"], "delta": "0:00:00.432232", "end": "2025-03-01 16:13:36.366845", "msg": "", "rc": 0, "start": "2025-03-01 16:13:35.934613", "stderr": "getaddrinfo >>: Name or service not known\r\ngetaddrinfo >>: Name or service not known\r\ngetaddrinfo >>: Name or service not known\r\ngetaddrinfo >>: Name or service not known\r\ngetaddrinfo >>: Name or service not known\r\ngetaddrinfo /var/lib/postgresql/.ssh/known_hosts: Name or service not known\r\ngetaddrinfo /var/lib/postgresql/.ssh/known_hosts: Name or service not known\r\ngetaddrinfo /var/lib/postgresql/.ssh/known_hosts: Name or service not known\r\ngetaddrinfo /var/lib/postgresql/.ssh/known_hosts: Name or service not known\r\ngetaddrinfo /var/lib/postgresql/.ssh/known_hosts: Name or service not known", "stderr_lines": ["getaddrinfo >>: Name or service not known", "getaddrinfo >>: Name or service not known", "getaddrinfo >>: Name or service not known", "getaddrinfo >>: Name or service not known", "getaddrinfo >>: Name or service not known", "getaddrinfo /var/lib/postgresql/.ssh/known_hosts: Name or service not known", "getaddrinfo /var/lib/postgresql/.ssh/known_hosts: Name or service not known", "getaddrinfo /var/lib/postgresql/.ssh/known_hosts: Name or service not known", "getaddrinfo /var/lib/postgresql/.ssh/known_hosts: Name or service not known", "getaddrinfo /var/lib/postgresql/.ssh/known_hosts: Name or service not known"], "stdout": "# db.etcd.lan:22 SSH-2.0-OpenSSH_9.2p1 Debian-2+deb12u5\n|1|d0wzsnmT6uYrfgEQUYel2fH8XJs=|nWCENYz3mq7GG+3LIIZH9iir6Ug= ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBN0skod/ZCxD3lltYw6hNIrGwdY2fpKwhnmxWL3Zs9JWXPGf4kaUxp40PAFr8npVzyuNNe94fzpzkym5zfiEp2E=\n# db.etcd.lan:22 SSH-2.0-OpenSSH_9.2p1 Debian-2+deb12u5\n|1|VUxaMHTW6jJQeckJqD0GyDHtLwY=|CLbmjifY93hf35tqfw9fcuFF2e0= ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCYYtwr+bKyS0H5pOMJsfddOblcEno3Ir8wPO/Qaiyu0LwmK6eRfnoEo6NgXCCNGM0PgcLIVuUMIImS7x6Htyh2EBYNkJwWmSy90ol5sUX7AdiploT+xxg7kA65MEE4tU+FtVyYygvd0mnSlQsUVXRL+w82sCLsC7ufpmBX2LQDiUhqjFvNRuIyfm4PH+e06mYqOT3h+9bIFLrIuGBLEWLtbl488nAmBtzzn6ahvctrvYPrH0W0jlpM7Qk69LMz8156aZHTot9LIVotZlnqSmxV41I2E4Y/VGuAVavbicKg4JqimU9kSJz7pNRZb771pDU4QBJxeRXipWXDWsVOkL3wZPsjWDKDfqW5aQERWITCQ0inhjO/H993zgMTqVGlbJeCvwakCe0F0y1/js7iGe8ZaH6IwQpp46sgg4cad9itdWejjPrgsLx8HE7f6Eo9Ue2S7OZhIp6vN6PWIUX+e/ARq4Qebyl3quCku0ZVAXgi4aH5c0Kc3niPAOc5hT/jM9c=\n# db.etcd.lan:22 SSH-2.0-OpenSSH_9.2p1 Debian-2+deb12u5\n|1|B3h4ArU7/cNLbBsu7HyrAV8V+6g=|yLdk7S5f/lSYjx90pXryDJBQ8Js= ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIL/ZaaTZgBm91hbmIrW7xo4q28fr4Cg6DCQwx/JJT3On\n# db.etcd.lan:22 SSH-2.0-OpenSSH_9.2p1 Debian-2+deb12u5\n# db.etcd.lan:22 SSH-2.0-OpenSSH_9.2p1 Debian-2+deb12u5", "stdout_lines": ["# db.etcd.lan:22 SSH-2.0-OpenSSH_9.2p1 Debian-2+deb12u5", "|1|d0wzsnmT6uYrfgEQUYel2fH8XJs=|nWCENYz3mq7GG+3LIIZH9iir6Ug= ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBN0skod/ZCxD3lltYw6hNIrGwdY2fpKwhnmxWL3Zs9JWXPGf4kaUxp40PAFr8npVzyuNNe94fzpzkym5zfiEp2E=", "# db.etcd.lan:22 SSH-2.0-OpenSSH_9.2p1 Debian-2+deb12u5", "|1|VUxaMHTW6jJQeckJqD0GyDHtLwY=|CLbmjifY93hf35tqfw9fcuFF2e0= ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCYYtwr+bKyS0H5pOMJsfddOblcEno3Ir8wPO/Qaiyu0LwmK6eRfnoEo6NgXCCNGM0PgcLIVuUMIImS7x6Htyh2EBYNkJwWmSy90ol5sUX7AdiploT+xxg7kA65MEE4tU+FtVyYygvd0mnSlQsUVXRL+w82sCLsC7ufpmBX2LQDiUhqjFvNRuIyfm4PH+e06mYqOT3h+9bIFLrIuGBLEWLtbl488nAmBtzzn6ahvctrvYPrH0W0jlpM7Qk69LMz8156aZHTot9LIVotZlnqSmxV41I2E4Y/VGuAVavbicKg4JqimU9kSJz7pNRZb771pDU4QBJxeRXipWXDWsVOkL3wZPsjWDKDfqW5aQERWITCQ0inhjO/H993zgMTqVGlbJeCvwakCe0F0y1/js7iGe8ZaH6IwQpp46sgg4cad9itdWejjPrgsLx8HE7f6Eo9Ue2S7OZhIp6vN6PWIUX+e/ARq4Qebyl3quCku0ZVAXgi4aH5c0Kc3niPAOc5hT/jM9c=", "# db.etcd.lan:22 SSH-2.0-OpenSSH_9.2p1 Debian-2+deb12u5", "|1|B3h4ArU7/cNLbBsu7HyrAV8V+6g=|yLdk7S5f/lSYjx90pXryDJBQ8Js= ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIL/ZaaTZgBm91hbmIrW7xo4q28fr4Cg6DCQwx/JJT3On", "# db.etcd.lan:22 SSH-2.0-OpenSSH_9.2p1 Debian-2+deb12u5", "# db.etcd.lan:22 SSH-2.0-OpenSSH_9.2p1 Debian-2+deb12u5"]}
2025-03-01 16:13:36,415 p=706312 u=digitd n=ansible INFO| TASK [Reload daemons] ****************************************************************************************************************************************************************************************************************************
2025-03-01 16:13:37,591 p=706312 u=digitd n=ansible INFO| ok: [db.master.lan] => {"changed": false, "name": null, "status": {}}
2025-03-01 16:13:37,593 p=706312 u=digitd n=ansible INFO| TASK [Start service] *****************************************************************************************************************************************************************************************************************************
2025-03-01 16:13:39,072 p=706312 u=digitd n=ansible INFO| ok: [db.master.lan] => {"changed": false, "enabled": true, "name": "restic.service", "status": {"ActiveEnterTimestampMonotonic": "0", "ActiveExitTimestampMonotonic": "0", "ActiveState": "inactive", "After": "basic.target restic.timer system.slice systemd-journald.socket network-online.target syslog.target sysinit.target", "AllowIsolate": "no", "AmbientCapabilities": "cap_dac_read_search", "AssertResult": "yes", "AssertTimestamp": "Sat 2025-03-01 15:36:42 MSK", "AssertTimestampMonotonic": "11249221866", "Before": "multi-user.target shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "10457727000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Sat 2025-03-01 15:36:42 MSK", "ConditionTimestampMonotonic": "11249221864", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroupId": "3821", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "Restic backup for Patroni Main Node", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveMemoryHigh": "2069450752", "EffectiveMemoryMax": "2069450752", "EffectiveTasksMax": "2305", "EnvironmentFiles": "/root/.restic.env (ignore_errors=no)", "ExecMainCode": "1", "ExecMainExitTimestamp": "Sat 2025-03-01 15:36:50 MSK", "ExecMainExitTimestampMonotonic": "11257395392", "ExecMainHandoffTimestamp": "Sat 2025-03-01 15:36:42 MSK", "ExecMainHandoffTimestampMonotonic": "11249244578", "ExecMainPID": "24481", "ExecMainStartTimestamp": "Sat 2025-03-01 15:36:42 MSK", "ExecMainStartTimestampMonotonic": "11249222778", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/restic ; argv[]=/usr/bin/restic -r rclone:etcd-serv:/mnt/restic_backups backup / --tag master_node_patroni --one-file-system --skip-if-unchanged --verbose=2 ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/restic ; argv[]=/usr/bin/restic -r rclone:etcd-serv:/mnt/restic_backups backup / --tag master_node_patroni --one-file-system --skip-if-unchanged --verbose=2 ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/etc/systemd/system/restic.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "restic.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Sat 2025-03-01 15:36:50 MSK", "InactiveEnterTimestampMonotonic": "11257397691", "InactiveExitTimestamp": "Sat 2025-03-01 15:36:42 MSK", "InactiveExitTimestampMonotonic": "11249224398", "InvocationID": "7cd61be3ba6040e48a47399bf93cdad7", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "7685", "LimitNPROCSoft": "7685", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "7685", "LimitSIGPENDINGSoft": "7685", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "1579683840", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "144990208", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "[not set]", "MemorySwapMax": "infinity", "MemorySwapPeak": "0", "MemoryZSwapCurrent": "[not set]", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "restic.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "no", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Sat 2025-03-01 15:36:50 MSK", "StateChangeTimestampMonotonic": "11257397691", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "2305", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "TriggeredBy": "restic.timer", "Type": "oneshot", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "root", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-03-01 16:13:39,072 p=706312 u=digitd n=ansible INFO| TASK [Enable timer] ******************************************************************************************************************************************************************************************************************************
2025-03-01 16:13:40,166 p=706312 u=digitd n=ansible INFO| ok: [db.master.lan] => {"changed": false, "enabled": true, "name": "restic.timer", "state": "started", "status": {"AccuracyUSec": "1min", "ActiveEnterTimestamp": "Sat 2025-03-01 15:13:41 MSK", "ActiveEnterTimestampMonotonic": "9868130615", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "time-sync.target time-set.target sysinit.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Sat 2025-03-01 15:13:41 MSK", "AssertTimestampMonotonic": "9868130333", "Before": "shutdown.target restic.service timers.target", "CanFreeze": "no", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Sat 2025-03-01 15:13:41 MSK", "ConditionTimestampMonotonic": "9868130330", "Conflicts": "shutdown.target", "DebugInvocation": "no", "DefaultDependencies": "yes", "DeferReactivation": "no", "Description": "restic.timer", "FailureAction": "none", "FixedRandomDelay": "no", "FragmentPath": "/etc/systemd/system/restic.timer", "FreezerState": "running", "Id": "restic.timer", "IgnoreOnIsolate": "no", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Sat 2025-03-01 15:13:41 MSK", "InactiveExitTimestampMonotonic": "9868130615", "InvocationID": "341072496a5d4411b1d1280fe01581ec", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "LastTriggerUSecMonotonic": "0", "LoadState": "loaded", "Names": "restic.timer", "NeedDaemonReload": "no", "NextElapseUSecMonotonic": "0", "NextElapseUSecRealtime": "Sat 2025-03-01 23:45:00 MSK", "OnClockChange": "no", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "OnTimezoneChange": "no", "Perpetual": "no", "Persistent": "no", "RandomizedDelayUSec": "0", "RefuseManualStart": "no", "RefuseManualStop": "no", "RemainAfterElapse": "yes", "Requires": "sysinit.target", "Result": "success", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StateChangeTimestamp": "Sat 2025-03-01 15:36:50 MSK", "StateChangeTimestampMonotonic": "11257398587", "StopWhenUnneeded": "no", "SubState": "waiting", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "TimersCalendar": "{ OnCalendar=*-*-* 23:45:00 ; next_elapse=Sat 2025-03-01 23:45:00 MSK }", "Transient": "no", "Triggers": "restic.service", "Unit": "restic.service", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "WakeSystem": "no", "WantedBy": "timers.target"}}
2025-03-01 16:13:40,167 p=706312 u=digitd n=ansible INFO| PLAY [Backup creation] ***************************************************************************************************************************************************************************************************************************
2025-03-01 16:13:40,264 p=706312 u=digitd n=ansible INFO| TASK [Create backup] *****************************************************************************************************************************************************************************************************************************
2025-03-01 16:14:15,998 p=706312 u=digitd n=ansible INFO| changed: [db.master.lan] => {"changed": true, "cmd": ["restic", "-r", "rclone:etcd-serv:/mnt/restic_backups", "backup", "/", "--tag", "master_node_patroni", "--one-file-system"], "delta": "0:00:35.315991", "end": "2025-03-01 16:14:15.963324", "msg": "", "rc": 0, "start": "2025-03-01 16:13:40.647333", "stderr": "", "stderr_lines": [], "stdout": "using parent snapshot 6400fecd\n\nFiles:        1047 new,   995 changed, 70812 unmodified\nDirs:           29 new,    57 changed,  8717 unmodified\nAdded to the repository: 81.015 MiB (14.904 MiB stored)\n\nprocessed 72854 files, 6.771 GiB in 0:34\nsnapshot e09db5c2 saved", "stdout_lines": ["using parent snapshot 6400fecd", "", "Files:        1047 new,   995 changed, 70812 unmodified", "Dirs:           29 new,    57 changed,  8717 unmodified", "Added to the repository: 81.015 MiB (14.904 MiB stored)", "", "processed 72854 files, 6.771 GiB in 0:34", "snapshot e09db5c2 saved"]}
2025-03-01 16:14:15,999 p=706312 u=digitd n=ansible INFO| TASK [] ******************************************************************************************************************************************************************************************************************************************
2025-03-01 16:14:16,103 p=706312 u=digitd n=ansible INFO| ok: [db.master.lan] => {
    "msg": [
        "using parent snapshot 6400fecd",
        "",
        "Files:        1047 new,   995 changed, 70812 unmodified",
        "Dirs:           29 new,    57 changed,  8717 unmodified",
        "Added to the repository: 81.015 MiB (14.904 MiB stored)",
        "",
        "processed 72854 files, 6.771 GiB in 0:34",
        "snapshot e09db5c2 saved"
    ]
}
2025-03-01 16:14:16,127 p=706312 u=digitd n=ansible INFO| TASK [View restic snapshots in repo] *************************************************************************************************************************************************************************************************************
2025-03-01 16:14:18,142 p=706312 u=digitd n=ansible INFO| changed: [db.master.lan] => {"changed": true, "cmd": ["restic", "-r", "rclone:etcd-serv:/mnt/restic_backups", "snapshots"], "delta": "0:00:01.178451", "end": "2025-03-01 16:14:18.096867", "msg": "", "rc": 0, "start": "2025-03-01 16:14:16.918416", "stderr": "", "stderr_lines": [], "stdout": "ID        Time                 Host        Tags                 Paths  Size\n--------------------------------------------------------------------------------\n7a675871  2025-03-01 13:39:12  dbmaster    master_node_patroni  /      6.499 GiB\n0af09dba  2025-03-01 15:11:52  dbmaster    master_node_patroni  /      6.554 GiB\n070a30f8  2025-03-01 15:13:31  dbmaster    master_node_patroni  /      6.562 GiB\n31bf49ae  2025-03-01 15:27:01  dbmaster    master_node_patroni  /      6.593 GiB\n180d922a  2025-03-01 15:27:44  dbmaster    master_node_patroni  /      6.601 GiB\nf31cccc3  2025-03-01 15:28:36  dbmaster    master_node_patroni  /      6.616 GiB\ned436dcb  2025-03-01 15:31:02  dbmaster    master_node_patroni  /      6.624 GiB\n994922de  2025-03-01 15:34:37  dbmaster    master_node_patroni  /      6.632 GiB\nfec35391  2025-03-01 15:36:04  dbmaster    master_node_patroni  /      6.632 GiB\nc18af8c2  2025-03-01 15:36:42  dbmaster    master_node_patroni  /      6.640 GiB\n6400fecd  2025-03-01 15:36:56  dbmaster    master_node_patroni  /      6.639 GiB\ne09db5c2  2025-03-01 16:13:40  dbmaster    master_node_patroni  /      6.771 GiB\n--------------------------------------------------------------------------------\n12 snapshots", "stdout_lines": ["ID        Time                 Host        Tags                 Paths  Size", "--------------------------------------------------------------------------------", "7a675871  2025-03-01 13:39:12  dbmaster    master_node_patroni  /      6.499 GiB", "0af09dba  2025-03-01 15:11:52  dbmaster    master_node_patroni  /      6.554 GiB", "070a30f8  2025-03-01 15:13:31  dbmaster    master_node_patroni  /      6.562 GiB", "31bf49ae  2025-03-01 15:27:01  dbmaster    master_node_patroni  /      6.593 GiB", "180d922a  2025-03-01 15:27:44  dbmaster    master_node_patroni  /      6.601 GiB", "f31cccc3  2025-03-01 15:28:36  dbmaster    master_node_patroni  /      6.616 GiB", "ed436dcb  2025-03-01 15:31:02  dbmaster    master_node_patroni  /      6.624 GiB", "994922de  2025-03-01 15:34:37  dbmaster    master_node_patroni  /      6.632 GiB", "fec35391  2025-03-01 15:36:04  dbmaster    master_node_patroni  /      6.632 GiB", "c18af8c2  2025-03-01 15:36:42  dbmaster    master_node_patroni  /      6.640 GiB", "6400fecd  2025-03-01 15:36:56  dbmaster    master_node_patroni  /      6.639 GiB", "e09db5c2  2025-03-01 16:13:40  dbmaster    master_node_patroni  /      6.771 GiB", "--------------------------------------------------------------------------------", "12 snapshots"]}
2025-03-01 16:14:18,143 p=706312 u=digitd n=ansible INFO| TASK [] ******************************************************************************************************************************************************************************************************************************************
2025-03-01 16:14:18,180 p=706312 u=digitd n=ansible INFO| ok: [db.master.lan] => {
    "msg": [
        "ID        Time                 Host        Tags                 Paths  Size",
        "--------------------------------------------------------------------------------",
        "7a675871  2025-03-01 13:39:12  dbmaster    master_node_patroni  /      6.499 GiB",
        "0af09dba  2025-03-01 15:11:52  dbmaster    master_node_patroni  /      6.554 GiB",
        "070a30f8  2025-03-01 15:13:31  dbmaster    master_node_patroni  /      6.562 GiB",
        "31bf49ae  2025-03-01 15:27:01  dbmaster    master_node_patroni  /      6.593 GiB",
        "180d922a  2025-03-01 15:27:44  dbmaster    master_node_patroni  /      6.601 GiB",
        "f31cccc3  2025-03-01 15:28:36  dbmaster    master_node_patroni  /      6.616 GiB",
        "ed436dcb  2025-03-01 15:31:02  dbmaster    master_node_patroni  /      6.624 GiB",
        "994922de  2025-03-01 15:34:37  dbmaster    master_node_patroni  /      6.632 GiB",
        "fec35391  2025-03-01 15:36:04  dbmaster    master_node_patroni  /      6.632 GiB",
        "c18af8c2  2025-03-01 15:36:42  dbmaster    master_node_patroni  /      6.640 GiB",
        "6400fecd  2025-03-01 15:36:56  dbmaster    master_node_patroni  /      6.639 GiB",
        "e09db5c2  2025-03-01 16:13:40  dbmaster    master_node_patroni  /      6.771 GiB",
        "--------------------------------------------------------------------------------",
        "12 snapshots"
    ]
}
2025-03-01 16:14:18,201 p=706312 u=digitd n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************************************************************************************************
2025-03-01 16:14:18,317 p=706312 u=digitd n=ansible INFO| db.master.lan              : ok=14   changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-03-01 16:25:27,074 p=729255 u=digitd n=ansible INFO| Using /run/media/digitd/NFS/git/travelata_test/ansible/restic_setup/ansible.cfg as config file
2025-03-01 16:25:27,199 p=729255 u=digitd n=ansible INFO| PLAY [Install packages] **************************************************************************************************************************************************************************************************************************
2025-03-01 16:25:27,203 p=729255 u=digitd n=ansible INFO| TASK [Install restic and rclone] *****************************************************************************************************************************************************************************************************************
2025-03-01 16:25:29,736 p=729255 u=digitd n=ansible INFO| ok: [db.master.lan] => {"ansible_facts": {"discovered_interpreter_python": "/usr/bin/python3.11"}, "cache_update_time": 1740830385, "cache_updated": true, "changed": false}
2025-03-01 16:25:29,738 p=729255 u=digitd n=ansible INFO| PLAY [Configure rclone] **************************************************************************************************************************************************************************************************************************
2025-03-01 16:25:30,719 p=729255 u=digitd n=ansible INFO| TASK [Create directory for storing rclone config] ************************************************************************************************************************************************************************************************
2025-03-01 16:25:31,661 p=729255 u=digitd n=ansible INFO| ok: [db.master.lan] => {"changed": false, "gid": 0, "group": "root", "mode": "0764", "owner": "root", "path": "/root/.config/rclone", "size": 4096, "state": "directory", "uid": 0}
2025-03-01 16:25:31,662 p=729255 u=digitd n=ansible INFO| TASK [Copy configuration rclone file to the Master node] *****************************************************************************************************************************************************************************************
2025-03-01 16:25:32,474 p=729255 u=digitd n=ansible INFO| ok: [db.master.lan] => {"changed": false, "checksum": "e174fa86f9ffd5ab047a37d664e9b990210c5a8a", "dest": "/root/.config/rclone/rclone.conf", "gid": 0, "group": "root", "mode": "0764", "owner": "root", "path": "/root/.config/rclone/rclone.conf", "size": 201, "state": "file", "uid": 0}
2025-03-01 16:25:32,475 p=729255 u=digitd n=ansible INFO| PLAY [Create systemd daemon and timer for restic backup] *****************************************************************************************************************************************************************************************
2025-03-01 16:25:33,614 p=729255 u=digitd n=ansible INFO| TASK [Copy service file] *************************************************************************************************************************************************************************************************************************
2025-03-01 16:25:34,549 p=729255 u=digitd n=ansible INFO| ok: [db.master.lan] => {"changed": false, "checksum": "6eadb31f765b6bb78ab0fbfae9b015e232fc10f6", "dest": "/etc/systemd/system/restic.service", "gid": 0, "group": "root", "mode": "0641", "owner": "root", "path": "/etc/systemd/system/restic.service", "size": 400, "state": "file", "uid": 0}
2025-03-01 16:25:34,550 p=729255 u=digitd n=ansible INFO| TASK [Copy timer file] ***************************************************************************************************************************************************************************************************************************
2025-03-01 16:25:35,269 p=729255 u=digitd n=ansible INFO| ok: [db.master.lan] => {"changed": false, "checksum": "944c74304c438963936533fe9b51dcd6fbf1c470", "dest": "/etc/systemd/system/restic.timer", "gid": 0, "group": "root", "mode": "0641", "owner": "root", "path": "/etc/systemd/system/restic.timer", "size": 134, "state": "file", "uid": 0}
2025-03-01 16:25:35,270 p=729255 u=digitd n=ansible INFO| TASK [Create environment file] *******************************************************************************************************************************************************************************************************************
2025-03-01 16:25:35,738 p=729255 u=digitd n=ansible INFO| changed: [db.master.lan] => {"changed": true, "dest": "/root/.restic.env", "gid": 0, "group": "root", "mode": "0640", "owner": "root", "size": 27, "state": "file", "uid": 0}
2025-03-01 16:25:35,739 p=729255 u=digitd n=ansible INFO| TASK [Scan sha1-hash] ****************************************************************************************************************************************************************************************************************************
2025-03-01 16:25:36,189 p=729255 u=digitd n=ansible INFO| skipping: [db.master.lan] => {"changed": false, "cmd": ["sudo", "-u", "postgres", "ssh-keyscan", "-H", "db.etcd.lan", ">>", "/var/lib/postgresql/.ssh/known_hosts"], "delta": null, "end": null, "msg": "Command would have run if not in check mode", "rc": 0, "start": null, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2025-03-01 16:25:36,190 p=729255 u=digitd n=ansible INFO| TASK [Reload daemons] ****************************************************************************************************************************************************************************************************************************
2025-03-01 16:25:36,970 p=729255 u=digitd n=ansible INFO| ok: [db.master.lan] => {"changed": false, "name": null, "status": {}}
2025-03-01 16:25:36,971 p=729255 u=digitd n=ansible INFO| TASK [Start service] *****************************************************************************************************************************************************************************************************************************
2025-03-01 16:25:38,282 p=729255 u=digitd n=ansible INFO| ok: [db.master.lan] => {"changed": false, "enabled": true, "name": "restic.service", "status": {"ActiveEnterTimestampMonotonic": "0", "ActiveExitTimestampMonotonic": "0", "ActiveState": "inactive", "After": "basic.target restic.timer system.slice systemd-journald.socket network-online.target syslog.target sysinit.target", "AllowIsolate": "no", "AmbientCapabilities": "cap_dac_read_search", "AssertResult": "yes", "AssertTimestamp": "Sat 2025-03-01 15:36:42 MSK", "AssertTimestampMonotonic": "11249221866", "Before": "multi-user.target shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "10457727000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Sat 2025-03-01 15:36:42 MSK", "ConditionTimestampMonotonic": "11249221864", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroupId": "3821", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "Restic backup for Patroni Main Node", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveMemoryHigh": "2069450752", "EffectiveMemoryMax": "2069450752", "EffectiveTasksMax": "2305", "EnvironmentFiles": "/root/.restic.env (ignore_errors=no)", "ExecMainCode": "1", "ExecMainExitTimestamp": "Sat 2025-03-01 15:36:50 MSK", "ExecMainExitTimestampMonotonic": "11257395392", "ExecMainHandoffTimestamp": "Sat 2025-03-01 15:36:42 MSK", "ExecMainHandoffTimestampMonotonic": "11249244578", "ExecMainPID": "24481", "ExecMainStartTimestamp": "Sat 2025-03-01 15:36:42 MSK", "ExecMainStartTimestampMonotonic": "11249222778", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/restic ; argv[]=/usr/bin/restic -r rclone:etcd-serv:/mnt/restic_backups backup / --tag master_node_patroni --one-file-system --skip-if-unchanged --verbose=2 ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/restic ; argv[]=/usr/bin/restic -r rclone:etcd-serv:/mnt/restic_backups backup / --tag master_node_patroni --one-file-system --skip-if-unchanged --verbose=2 ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/etc/systemd/system/restic.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "restic.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Sat 2025-03-01 15:36:50 MSK", "InactiveEnterTimestampMonotonic": "11257397691", "InactiveExitTimestamp": "Sat 2025-03-01 15:36:42 MSK", "InactiveExitTimestampMonotonic": "11249224398", "InvocationID": "7cd61be3ba6040e48a47399bf93cdad7", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "7685", "LimitNPROCSoft": "7685", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "7685", "LimitSIGPENDINGSoft": "7685", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "1579155456", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "144990208", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "[not set]", "MemorySwapMax": "infinity", "MemorySwapPeak": "0", "MemoryZSwapCurrent": "[not set]", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "restic.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "no", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Sat 2025-03-01 15:36:50 MSK", "StateChangeTimestampMonotonic": "11257397691", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "2305", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "TriggeredBy": "restic.timer", "Type": "oneshot", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "root", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-03-01 16:25:38,282 p=729255 u=digitd n=ansible INFO| TASK [Enable timer] ******************************************************************************************************************************************************************************************************************************
2025-03-01 16:25:39,453 p=729255 u=digitd n=ansible INFO| ok: [db.master.lan] => {"changed": false, "enabled": true, "name": "restic.timer", "state": "started", "status": {"AccuracyUSec": "1min", "ActiveEnterTimestamp": "Sat 2025-03-01 15:13:41 MSK", "ActiveEnterTimestampMonotonic": "9868130615", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "time-sync.target time-set.target sysinit.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Sat 2025-03-01 15:13:41 MSK", "AssertTimestampMonotonic": "9868130333", "Before": "shutdown.target restic.service timers.target", "CanFreeze": "no", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Sat 2025-03-01 15:13:41 MSK", "ConditionTimestampMonotonic": "9868130330", "Conflicts": "shutdown.target", "DebugInvocation": "no", "DefaultDependencies": "yes", "DeferReactivation": "no", "Description": "restic.timer", "FailureAction": "none", "FixedRandomDelay": "no", "FragmentPath": "/etc/systemd/system/restic.timer", "FreezerState": "running", "Id": "restic.timer", "IgnoreOnIsolate": "no", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Sat 2025-03-01 15:13:41 MSK", "InactiveExitTimestampMonotonic": "9868130615", "InvocationID": "341072496a5d4411b1d1280fe01581ec", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "LastTriggerUSecMonotonic": "0", "LoadState": "loaded", "Names": "restic.timer", "NeedDaemonReload": "no", "NextElapseUSecMonotonic": "0", "NextElapseUSecRealtime": "Sat 2025-03-01 23:45:00 MSK", "OnClockChange": "no", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "OnTimezoneChange": "no", "Perpetual": "no", "Persistent": "no", "RandomizedDelayUSec": "0", "RefuseManualStart": "no", "RefuseManualStop": "no", "RemainAfterElapse": "yes", "Requires": "sysinit.target", "Result": "success", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StateChangeTimestamp": "Sat 2025-03-01 15:36:50 MSK", "StateChangeTimestampMonotonic": "11257398587", "StopWhenUnneeded": "no", "SubState": "waiting", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "TimersCalendar": "{ OnCalendar=*-*-* 23:45:00 ; next_elapse=Sat 2025-03-01 23:45:00 MSK }", "Transient": "no", "Triggers": "restic.service", "Unit": "restic.service", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "WakeSystem": "no", "WantedBy": "timers.target"}}
2025-03-01 16:25:39,455 p=729255 u=digitd n=ansible INFO| PLAY [Backup creation] ***************************************************************************************************************************************************************************************************************************
2025-03-01 16:25:39,485 p=729255 u=digitd n=ansible INFO| TASK [Create backup] *****************************************************************************************************************************************************************************************************************************
2025-03-01 16:25:39,958 p=729255 u=digitd n=ansible INFO| skipping: [db.master.lan] => {"changed": false, "cmd": ["restic", "-r", "rclone:etcd-serv:/mnt/restic_backups", "backup", "/", "--tag", "master_node_patroni", "--one-file-system"], "delta": null, "end": null, "msg": "Command would have run if not in check mode", "rc": 0, "start": null, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2025-03-01 16:25:39,959 p=729255 u=digitd n=ansible INFO| TASK [] ******************************************************************************************************************************************************************************************************************************************
2025-03-01 16:25:40,001 p=729255 u=digitd n=ansible INFO| ok: [db.master.lan] => {
    "msg": []
}
2025-03-01 16:25:40,026 p=729255 u=digitd n=ansible INFO| TASK [View restic snapshots in repo] *************************************************************************************************************************************************************************************************************
2025-03-01 16:25:40,477 p=729255 u=digitd n=ansible INFO| skipping: [db.master.lan] => {"changed": false, "cmd": ["restic", "-r", "rclone:etcd-serv:/mnt/restic_backups", "snapshots"], "delta": null, "end": null, "msg": "Command would have run if not in check mode", "rc": 0, "start": null, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2025-03-01 16:25:40,478 p=729255 u=digitd n=ansible INFO| TASK [] ******************************************************************************************************************************************************************************************************************************************
2025-03-01 16:25:40,527 p=729255 u=digitd n=ansible INFO| ok: [db.master.lan] => {
    "msg": []
}
2025-03-01 16:25:40,608 p=729255 u=digitd n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************************************************************************************************
2025-03-01 16:25:40,650 p=729255 u=digitd n=ansible INFO| db.master.lan              : ok=11   changed=1    unreachable=0    failed=0    skipped=3    rescued=0    ignored=0   
2025-03-02 19:56:52,881 p=1092985 u=digitd n=ansible INFO| Using /run/media/digitd/NFS/git/travelata_test/ansible/restic_setup/ansible.cfg as config file
2025-03-02 19:56:53,004 p=1092985 u=digitd n=ansible INFO| PLAY [Install packages] **************************************************************************************************************************************************************************************************************************
2025-03-02 19:56:53,009 p=1092985 u=digitd n=ansible INFO| TASK [Install restic and rclone] *****************************************************************************************************************************************************************************************************************
2025-03-02 19:56:56,554 p=1092985 u=digitd n=ansible INFO| ok: [db.master.lan] => {"ansible_facts": {"discovered_interpreter_python": "/usr/bin/python3.11"}, "cache_update_time": 1740932854, "cache_updated": false, "changed": false}
2025-03-02 19:56:56,555 p=1092985 u=digitd n=ansible INFO| PLAY [Configure rclone] **************************************************************************************************************************************************************************************************************************
2025-03-02 19:56:56,595 p=1092985 u=digitd n=ansible INFO| TASK [Create directory for storing rclone config] ************************************************************************************************************************************************************************************************
2025-03-02 19:56:57,081 p=1092985 u=digitd n=ansible INFO| ok: [db.master.lan] => {"changed": false, "gid": 0, "group": "root", "mode": "0764", "owner": "root", "path": "/root/.config/rclone", "size": 4096, "state": "directory", "uid": 0}
2025-03-02 19:56:57,082 p=1092985 u=digitd n=ansible INFO| TASK [Copy configuration rclone file to the Master node] *****************************************************************************************************************************************************************************************
2025-03-02 19:56:58,509 p=1092985 u=digitd n=ansible INFO| ok: [db.master.lan] => {"changed": false, "checksum": "e174fa86f9ffd5ab047a37d664e9b990210c5a8a", "dest": "/root/.config/rclone/rclone.conf", "gid": 0, "group": "root", "mode": "0764", "owner": "root", "path": "/root/.config/rclone/rclone.conf", "size": 201, "state": "file", "uid": 0}
2025-03-02 19:56:58,510 p=1092985 u=digitd n=ansible INFO| PLAY [Create systemd daemon and timer for restic backup] *****************************************************************************************************************************************************************************************
2025-03-02 19:56:58,603 p=1092985 u=digitd n=ansible INFO| TASK [Copy service file] *************************************************************************************************************************************************************************************************************************
2025-03-02 19:56:59,353 p=1092985 u=digitd n=ansible INFO| ok: [db.master.lan] => {"changed": false, "checksum": "6eadb31f765b6bb78ab0fbfae9b015e232fc10f6", "dest": "/etc/systemd/system/restic.service", "gid": 0, "group": "root", "mode": "0641", "owner": "root", "path": "/etc/systemd/system/restic.service", "size": 400, "state": "file", "uid": 0}
2025-03-02 19:56:59,354 p=1092985 u=digitd n=ansible INFO| TASK [Copy timer file] ***************************************************************************************************************************************************************************************************************************
2025-03-02 19:57:00,098 p=1092985 u=digitd n=ansible INFO| ok: [db.master.lan] => {"changed": false, "checksum": "944c74304c438963936533fe9b51dcd6fbf1c470", "dest": "/etc/systemd/system/restic.timer", "gid": 0, "group": "root", "mode": "0641", "owner": "root", "path": "/etc/systemd/system/restic.timer", "size": 134, "state": "file", "uid": 0}
2025-03-02 19:57:00,099 p=1092985 u=digitd n=ansible INFO| TASK [Create environment file] *******************************************************************************************************************************************************************************************************************
2025-03-02 19:57:00,504 p=1092985 u=digitd n=ansible INFO| changed: [db.master.lan] => {"changed": true, "dest": "/root/.restic.env", "gid": 0, "group": "root", "mode": "0640", "owner": "root", "size": 27, "state": "file", "uid": 0}
2025-03-02 19:57:00,505 p=1092985 u=digitd n=ansible INFO| TASK [Scan sha1-hash] ****************************************************************************************************************************************************************************************************************************
2025-03-02 19:57:01,451 p=1092985 u=digitd n=ansible INFO| changed: [db.master.lan] => {"changed": true, "cmd": ["sudo", "-u", "postgres", "ssh-keyscan", "-H", "db.etcd.lan", ">>", "/var/lib/postgresql/.ssh/known_hosts"], "delta": "0:00:00.443056", "end": "2025-03-02 19:57:01.391779", "msg": "", "rc": 0, "start": "2025-03-02 19:57:00.948723", "stderr": "getaddrinfo >>: Name or service not known\r\ngetaddrinfo >>: Name or service not known\r\ngetaddrinfo >>: Name or service not known\r\ngetaddrinfo >>: Name or service not known\r\ngetaddrinfo >>: Name or service not known\r\ngetaddrinfo /var/lib/postgresql/.ssh/known_hosts: Name or service not known\r\ngetaddrinfo /var/lib/postgresql/.ssh/known_hosts: Name or service not known\r\ngetaddrinfo /var/lib/postgresql/.ssh/known_hosts: Name or service not known\r\ngetaddrinfo /var/lib/postgresql/.ssh/known_hosts: Name or service not known\r\ngetaddrinfo /var/lib/postgresql/.ssh/known_hosts: Name or service not known", "stderr_lines": ["getaddrinfo >>: Name or service not known", "getaddrinfo >>: Name or service not known", "getaddrinfo >>: Name or service not known", "getaddrinfo >>: Name or service not known", "getaddrinfo >>: Name or service not known", "getaddrinfo /var/lib/postgresql/.ssh/known_hosts: Name or service not known", "getaddrinfo /var/lib/postgresql/.ssh/known_hosts: Name or service not known", "getaddrinfo /var/lib/postgresql/.ssh/known_hosts: Name or service not known", "getaddrinfo /var/lib/postgresql/.ssh/known_hosts: Name or service not known", "getaddrinfo /var/lib/postgresql/.ssh/known_hosts: Name or service not known"], "stdout": "# db.etcd.lan:22 SSH-2.0-OpenSSH_9.2p1 Debian-2+deb12u5\n|1|jkrlXsGhYciO5pl+2mNYb/mxQT0=|BhVWR6JBap2GbziH1ulbU7x/ysI= ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIL/ZaaTZgBm91hbmIrW7xo4q28fr4Cg6DCQwx/JJT3On\n# db.etcd.lan:22 SSH-2.0-OpenSSH_9.2p1 Debian-2+deb12u5\n|1|XjsVR+8YJKR599v7iKqq2Kebmuw=|vE1DMm5A6KNPoIhAmtLo18VgbXU= ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCYYtwr+bKyS0H5pOMJsfddOblcEno3Ir8wPO/Qaiyu0LwmK6eRfnoEo6NgXCCNGM0PgcLIVuUMIImS7x6Htyh2EBYNkJwWmSy90ol5sUX7AdiploT+xxg7kA65MEE4tU+FtVyYygvd0mnSlQsUVXRL+w82sCLsC7ufpmBX2LQDiUhqjFvNRuIyfm4PH+e06mYqOT3h+9bIFLrIuGBLEWLtbl488nAmBtzzn6ahvctrvYPrH0W0jlpM7Qk69LMz8156aZHTot9LIVotZlnqSmxV41I2E4Y/VGuAVavbicKg4JqimU9kSJz7pNRZb771pDU4QBJxeRXipWXDWsVOkL3wZPsjWDKDfqW5aQERWITCQ0inhjO/H993zgMTqVGlbJeCvwakCe0F0y1/js7iGe8ZaH6IwQpp46sgg4cad9itdWejjPrgsLx8HE7f6Eo9Ue2S7OZhIp6vN6PWIUX+e/ARq4Qebyl3quCku0ZVAXgi4aH5c0Kc3niPAOc5hT/jM9c=\n# db.etcd.lan:22 SSH-2.0-OpenSSH_9.2p1 Debian-2+deb12u5\n|1|JoTXmzA4HmJUG+sHYXI1ePLMeGY=|OhL2yemahZHZF5JAc/YzZV290Cg= ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBN0skod/ZCxD3lltYw6hNIrGwdY2fpKwhnmxWL3Zs9JWXPGf4kaUxp40PAFr8npVzyuNNe94fzpzkym5zfiEp2E=\n# db.etcd.lan:22 SSH-2.0-OpenSSH_9.2p1 Debian-2+deb12u5\n# db.etcd.lan:22 SSH-2.0-OpenSSH_9.2p1 Debian-2+deb12u5", "stdout_lines": ["# db.etcd.lan:22 SSH-2.0-OpenSSH_9.2p1 Debian-2+deb12u5", "|1|jkrlXsGhYciO5pl+2mNYb/mxQT0=|BhVWR6JBap2GbziH1ulbU7x/ysI= ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIL/ZaaTZgBm91hbmIrW7xo4q28fr4Cg6DCQwx/JJT3On", "# db.etcd.lan:22 SSH-2.0-OpenSSH_9.2p1 Debian-2+deb12u5", "|1|XjsVR+8YJKR599v7iKqq2Kebmuw=|vE1DMm5A6KNPoIhAmtLo18VgbXU= ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCYYtwr+bKyS0H5pOMJsfddOblcEno3Ir8wPO/Qaiyu0LwmK6eRfnoEo6NgXCCNGM0PgcLIVuUMIImS7x6Htyh2EBYNkJwWmSy90ol5sUX7AdiploT+xxg7kA65MEE4tU+FtVyYygvd0mnSlQsUVXRL+w82sCLsC7ufpmBX2LQDiUhqjFvNRuIyfm4PH+e06mYqOT3h+9bIFLrIuGBLEWLtbl488nAmBtzzn6ahvctrvYPrH0W0jlpM7Qk69LMz8156aZHTot9LIVotZlnqSmxV41I2E4Y/VGuAVavbicKg4JqimU9kSJz7pNRZb771pDU4QBJxeRXipWXDWsVOkL3wZPsjWDKDfqW5aQERWITCQ0inhjO/H993zgMTqVGlbJeCvwakCe0F0y1/js7iGe8ZaH6IwQpp46sgg4cad9itdWejjPrgsLx8HE7f6Eo9Ue2S7OZhIp6vN6PWIUX+e/ARq4Qebyl3quCku0ZVAXgi4aH5c0Kc3niPAOc5hT/jM9c=", "# db.etcd.lan:22 SSH-2.0-OpenSSH_9.2p1 Debian-2+deb12u5", "|1|JoTXmzA4HmJUG+sHYXI1ePLMeGY=|OhL2yemahZHZF5JAc/YzZV290Cg= ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBN0skod/ZCxD3lltYw6hNIrGwdY2fpKwhnmxWL3Zs9JWXPGf4kaUxp40PAFr8npVzyuNNe94fzpzkym5zfiEp2E=", "# db.etcd.lan:22 SSH-2.0-OpenSSH_9.2p1 Debian-2+deb12u5", "# db.etcd.lan:22 SSH-2.0-OpenSSH_9.2p1 Debian-2+deb12u5"]}
2025-03-02 19:57:01,452 p=1092985 u=digitd n=ansible INFO| TASK [Reload daemons] ****************************************************************************************************************************************************************************************************************************
2025-03-02 19:57:06,171 p=1092985 u=digitd n=ansible INFO| ok: [db.master.lan] => {"changed": false, "name": null, "status": {}}
2025-03-02 19:57:06,173 p=1092985 u=digitd n=ansible INFO| TASK [Enable service] ****************************************************************************************************************************************************************************************************************************
2025-03-02 19:57:07,568 p=1092985 u=digitd n=ansible INFO| ok: [db.master.lan] => {"changed": false, "enabled": true, "name": "restic.service", "status": {"ActiveEnterTimestampMonotonic": "0", "ActiveExitTimestampMonotonic": "0", "ActiveState": "inactive", "After": "syslog.target restic.timer sysinit.target system.slice systemd-journald.socket network-online.target basic.target", "AllowIsolate": "no", "AmbientCapabilities": "cap_dac_read_search", "AssertResult": "yes", "AssertTimestamp": "Sat 2025-03-01 23:45:19 MSK", "AssertTimestampMonotonic": "40566214948", "Before": "shutdown.target multi-user.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "31244038000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Sat 2025-03-01 23:45:19 MSK", "ConditionTimestampMonotonic": "40566214928", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroupId": "6989", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "Restic backup for Patroni Main Node", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveMemoryHigh": "2069450752", "EffectiveMemoryMax": "2069450752", "EffectiveTasksMax": "2305", "EnvironmentFiles": "/root/.restic.env (ignore_errors=no)", "ExecMainCode": "1", "ExecMainExitTimestamp": "Sat 2025-03-01 23:46:21 MSK", "ExecMainExitTimestampMonotonic": "40628344969", "ExecMainHandoffTimestamp": "Sat 2025-03-01 23:45:19 MSK", "ExecMainHandoffTimestampMonotonic": "40566276976", "ExecMainPID": "82478", "ExecMainStartTimestamp": "Sat 2025-03-01 23:45:19 MSK", "ExecMainStartTimestampMonotonic": "40566246719", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/restic ; argv[]=/usr/bin/restic -r rclone:etcd-serv:/mnt/restic_backups backup / --tag master_node_patroni --one-file-system --skip-if-unchanged --verbose=2 ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/restic ; argv[]=/usr/bin/restic -r rclone:etcd-serv:/mnt/restic_backups backup / --tag master_node_patroni --one-file-system --skip-if-unchanged --verbose=2 ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/etc/systemd/system/restic.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "restic.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Sat 2025-03-01 23:46:21 MSK", "InactiveEnterTimestampMonotonic": "40628348663", "InactiveExitTimestamp": "Sat 2025-03-01 23:45:19 MSK", "InactiveExitTimestampMonotonic": "40566247910", "InvocationID": "27af2a2b56a149f49f8b0d6786726280", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "7685", "LimitNPROCSoft": "7685", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "7685", "LimitSIGPENDINGSoft": "7685", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "1638932480", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "618455040", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "[not set]", "MemorySwapMax": "infinity", "MemorySwapPeak": "0", "MemoryZSwapCurrent": "[not set]", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "restic.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "no", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Sat 2025-03-01 23:46:21 MSK", "StateChangeTimestampMonotonic": "40628348663", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "2305", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "TriggeredBy": "restic.timer", "Type": "oneshot", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "root", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-03-02 19:57:07,569 p=1092985 u=digitd n=ansible INFO| TASK [Enable timer] ******************************************************************************************************************************************************************************************************************************
2025-03-02 19:57:08,780 p=1092985 u=digitd n=ansible INFO| ok: [db.master.lan] => {"changed": false, "enabled": true, "name": "restic.timer", "state": "started", "status": {"AccuracyUSec": "1min", "ActiveEnterTimestamp": "Sat 2025-03-01 15:13:41 MSK", "ActiveEnterTimestampMonotonic": "9868130615", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "time-sync.target time-set.target sysinit.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Sat 2025-03-01 15:13:41 MSK", "AssertTimestampMonotonic": "9868130333", "Before": "timers.target shutdown.target restic.service", "CanFreeze": "no", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Sat 2025-03-01 15:13:41 MSK", "ConditionTimestampMonotonic": "9868130330", "Conflicts": "shutdown.target", "DebugInvocation": "no", "DefaultDependencies": "yes", "DeferReactivation": "no", "Description": "restic.timer", "FailureAction": "none", "FixedRandomDelay": "no", "FragmentPath": "/etc/systemd/system/restic.timer", "FreezerState": "running", "Id": "restic.timer", "IgnoreOnIsolate": "no", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Sat 2025-03-01 15:13:41 MSK", "InactiveExitTimestampMonotonic": "9868130615", "InvocationID": "341072496a5d4411b1d1280fe01581ec", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "LastTriggerUSec": "Sat 2025-03-01 23:45:19 MSK", "LastTriggerUSecMonotonic": "11h 16min 6.214204s", "LoadState": "loaded", "Names": "restic.timer", "NeedDaemonReload": "no", "NextElapseUSecMonotonic": "0", "NextElapseUSecRealtime": "Sun 2025-03-02 23:45:00 MSK", "OnClockChange": "no", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "OnTimezoneChange": "no", "Perpetual": "no", "Persistent": "no", "RandomizedDelayUSec": "0", "RefuseManualStart": "no", "RefuseManualStop": "no", "RemainAfterElapse": "yes", "Requires": "sysinit.target", "Result": "success", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StateChangeTimestamp": "Sat 2025-03-01 23:46:21 MSK", "StateChangeTimestampMonotonic": "40628350035", "StopWhenUnneeded": "no", "SubState": "waiting", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "TimersCalendar": "{ OnCalendar=*-*-* 23:45:00 ; next_elapse=Sun 2025-03-02 23:45:00 MSK }", "Transient": "no", "Triggers": "restic.service", "Unit": "restic.service", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "WakeSystem": "no", "WantedBy": "timers.target"}}
2025-03-02 19:57:08,781 p=1092985 u=digitd n=ansible INFO| PLAY [Backup creation] ***************************************************************************************************************************************************************************************************************************
2025-03-02 19:57:08,877 p=1092985 u=digitd n=ansible INFO| TASK [Create backup] *****************************************************************************************************************************************************************************************************************************
2025-03-02 20:12:23,875 p=1092985 u=digitd n=ansible INFO| changed: [db.master.lan] => {"changed": true, "cmd": ["restic", "-r", "rclone:etcd-serv:/mnt/restic_backups", "backup", "/", "--tag", "master_node_patroni", "--one-file-system"], "delta": "0:15:12.488653", "end": "2025-03-02 20:12:21.722335", "msg": "", "rc": 0, "start": "2025-03-02 19:57:09.233682", "stderr": "", "stderr_lines": [], "stdout": "using parent snapshot 089083f2\n\nFiles:          83 new,  1089 changed, 74042 unmodified\nDirs:           13 new,    99 changed,  8759 unmodified\nAdded to the repository: 1.607 GiB (315.930 MiB stored)\n\nprocessed 75214 files, 7.466 GiB in 15:07\nsnapshot 9a24eea7 saved", "stdout_lines": ["using parent snapshot 089083f2", "", "Files:          83 new,  1089 changed, 74042 unmodified", "Dirs:           13 new,    99 changed,  8759 unmodified", "Added to the repository: 1.607 GiB (315.930 MiB stored)", "", "processed 75214 files, 7.466 GiB in 15:07", "snapshot 9a24eea7 saved"]}
2025-03-02 20:12:23,880 p=1092985 u=digitd n=ansible INFO| TASK [] ******************************************************************************************************************************************************************************************************************************************
2025-03-02 20:12:24,387 p=1092985 u=digitd n=ansible INFO| ok: [db.master.lan] => {
    "msg": [
        "using parent snapshot 089083f2",
        "",
        "Files:          83 new,  1089 changed, 74042 unmodified",
        "Dirs:           13 new,    99 changed,  8759 unmodified",
        "Added to the repository: 1.607 GiB (315.930 MiB stored)",
        "",
        "processed 75214 files, 7.466 GiB in 15:07",
        "snapshot 9a24eea7 saved"
    ]
}
2025-03-02 20:12:24,812 p=1092985 u=digitd n=ansible INFO| TASK [View restic snapshots in repo] *************************************************************************************************************************************************************************************************************
2025-03-02 20:12:28,873 p=1092985 u=digitd n=ansible INFO| changed: [db.master.lan] => {"changed": true, "cmd": ["restic", "-r", "rclone:etcd-serv:/mnt/restic_backups", "snapshots"], "delta": "0:00:02.389289", "end": "2025-03-02 20:12:28.819468", "msg": "", "rc": 0, "start": "2025-03-02 20:12:26.430179", "stderr": "", "stderr_lines": [], "stdout": "ID        Time                 Host        Tags                 Paths  Size\n--------------------------------------------------------------------------------\n7a675871  2025-03-01 13:39:12  dbmaster    master_node_patroni  /      6.499 GiB\n0af09dba  2025-03-01 15:11:52  dbmaster    master_node_patroni  /      6.554 GiB\n070a30f8  2025-03-01 15:13:31  dbmaster    master_node_patroni  /      6.562 GiB\n31bf49ae  2025-03-01 15:27:01  dbmaster    master_node_patroni  /      6.593 GiB\n180d922a  2025-03-01 15:27:44  dbmaster    master_node_patroni  /      6.601 GiB\nf31cccc3  2025-03-01 15:28:36  dbmaster    master_node_patroni  /      6.616 GiB\ned436dcb  2025-03-01 15:31:02  dbmaster    master_node_patroni  /      6.624 GiB\n994922de  2025-03-01 15:34:37  dbmaster    master_node_patroni  /      6.632 GiB\nfec35391  2025-03-01 15:36:04  dbmaster    master_node_patroni  /      6.632 GiB\nc18af8c2  2025-03-01 15:36:42  dbmaster    master_node_patroni  /      6.640 GiB\n6400fecd  2025-03-01 15:36:56  dbmaster    master_node_patroni  /      6.639 GiB\ne09db5c2  2025-03-01 16:13:40  dbmaster    master_node_patroni  /      6.771 GiB\n089083f2  2025-03-01 23:45:19  dbmaster    master_node_patroni  /      7.165 GiB\n9a24eea7  2025-03-02 19:57:09  dbmaster    master_node_patroni  /      7.466 GiB\n--------------------------------------------------------------------------------\n14 snapshots", "stdout_lines": ["ID        Time                 Host        Tags                 Paths  Size", "--------------------------------------------------------------------------------", "7a675871  2025-03-01 13:39:12  dbmaster    master_node_patroni  /      6.499 GiB", "0af09dba  2025-03-01 15:11:52  dbmaster    master_node_patroni  /      6.554 GiB", "070a30f8  2025-03-01 15:13:31  dbmaster    master_node_patroni  /      6.562 GiB", "31bf49ae  2025-03-01 15:27:01  dbmaster    master_node_patroni  /      6.593 GiB", "180d922a  2025-03-01 15:27:44  dbmaster    master_node_patroni  /      6.601 GiB", "f31cccc3  2025-03-01 15:28:36  dbmaster    master_node_patroni  /      6.616 GiB", "ed436dcb  2025-03-01 15:31:02  dbmaster    master_node_patroni  /      6.624 GiB", "994922de  2025-03-01 15:34:37  dbmaster    master_node_patroni  /      6.632 GiB", "fec35391  2025-03-01 15:36:04  dbmaster    master_node_patroni  /      6.632 GiB", "c18af8c2  2025-03-01 15:36:42  dbmaster    master_node_patroni  /      6.640 GiB", "6400fecd  2025-03-01 15:36:56  dbmaster    master_node_patroni  /      6.639 GiB", "e09db5c2  2025-03-01 16:13:40  dbmaster    master_node_patroni  /      6.771 GiB", "089083f2  2025-03-01 23:45:19  dbmaster    master_node_patroni  /      7.165 GiB", "9a24eea7  2025-03-02 19:57:09  dbmaster    master_node_patroni  /      7.466 GiB", "--------------------------------------------------------------------------------", "14 snapshots"]}
2025-03-02 20:12:28,873 p=1092985 u=digitd n=ansible INFO| TASK [] ******************************************************************************************************************************************************************************************************************************************
2025-03-02 20:12:29,436 p=1092985 u=digitd n=ansible INFO| ok: [db.master.lan] => {
    "msg": [
        "ID        Time                 Host        Tags                 Paths  Size",
        "--------------------------------------------------------------------------------",
        "7a675871  2025-03-01 13:39:12  dbmaster    master_node_patroni  /      6.499 GiB",
        "0af09dba  2025-03-01 15:11:52  dbmaster    master_node_patroni  /      6.554 GiB",
        "070a30f8  2025-03-01 15:13:31  dbmaster    master_node_patroni  /      6.562 GiB",
        "31bf49ae  2025-03-01 15:27:01  dbmaster    master_node_patroni  /      6.593 GiB",
        "180d922a  2025-03-01 15:27:44  dbmaster    master_node_patroni  /      6.601 GiB",
        "f31cccc3  2025-03-01 15:28:36  dbmaster    master_node_patroni  /      6.616 GiB",
        "ed436dcb  2025-03-01 15:31:02  dbmaster    master_node_patroni  /      6.624 GiB",
        "994922de  2025-03-01 15:34:37  dbmaster    master_node_patroni  /      6.632 GiB",
        "fec35391  2025-03-01 15:36:04  dbmaster    master_node_patroni  /      6.632 GiB",
        "c18af8c2  2025-03-01 15:36:42  dbmaster    master_node_patroni  /      6.640 GiB",
        "6400fecd  2025-03-01 15:36:56  dbmaster    master_node_patroni  /      6.639 GiB",
        "e09db5c2  2025-03-01 16:13:40  dbmaster    master_node_patroni  /      6.771 GiB",
        "089083f2  2025-03-01 23:45:19  dbmaster    master_node_patroni  /      7.165 GiB",
        "9a24eea7  2025-03-02 19:57:09  dbmaster    master_node_patroni  /      7.466 GiB",
        "--------------------------------------------------------------------------------",
        "14 snapshots"
    ]
}
2025-03-02 20:12:29,510 p=1092985 u=digitd n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************************************************************************************************
2025-03-02 20:12:29,860 p=1092985 u=digitd n=ansible INFO| db.master.lan              : ok=14   changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
