2025-02-28 14:49:00,556 p=7775 u=digitd n=ansible | @all:
  |--@ungrouped:
  |--@cluster:
  |  |--@haproxy:
  |  |  |--db.test.lan
  |  |--@haproxy_vip:
  |  |  |--db.test1.lan
  |  |--@master:
  |  |  |--db.master.lan
  |  |--@slave:
  |  |  |--db.slave.lan
  |  |--@etcd:
  |  |  |--db.etcd.lan
  |--@database:
  |  |--@master:
  |  |  |--db.master.lan
  |  |--@slave:
  |  |  |--db.slave.lan
  |--@vip_hap:
  |  |--@haproxy:
  |  |  |--db.test.lan
  |  |--@haproxy_vip:
  |  |  |--db.test1.lan
  |--@etcd_cluster:
  |  |--@master:
  |  |  |--db.master.lan
  |  |--@slave:
  |  |  |--db.slave.lan
  |  |--@etcd:
  |  |  |--db.etcd.lan
2025-02-28 14:49:16,111 p=7877 u=digitd n=ansible | PLAY [Install haproxy and run service] ****************************************************************************************************************************************
2025-02-28 14:49:16,136 p=7877 u=digitd n=ansible | TASK [Install HAProxy] ********************************************************************************************************************************************************
2025-02-28 14:49:26,766 p=7877 u=digitd n=ansible | ok: [db.test.lan]
2025-02-28 14:49:26,769 p=7877 u=digitd n=ansible | TASK [Check service status] ***************************************************************************************************************************************************
2025-02-28 14:49:28,151 p=7877 u=digitd n=ansible | ok: [db.test.lan]
2025-02-28 14:49:28,160 p=7877 u=digitd n=ansible | PLAY [Install PostgreSQL and check status] ************************************************************************************************************************************
2025-02-28 14:49:28,172 p=7877 u=digitd n=ansible | TASK [Install PostgreSQL] *****************************************************************************************************************************************************
2025-02-28 14:49:36,677 p=7877 u=digitd n=ansible | ok: [db.slave.lan]
2025-02-28 14:49:58,811 p=7877 u=digitd n=ansible | ok: [db.master.lan]
2025-02-28 14:49:58,814 p=7877 u=digitd n=ansible | TASK [Check service] **********************************************************************************************************************************************************
2025-02-28 14:50:01,907 p=7877 u=digitd n=ansible | ok: [db.slave.lan]
2025-02-28 14:50:09,419 p=7877 u=digitd n=ansible | changed: [db.master.lan]
2025-02-28 14:50:09,432 p=7877 u=digitd n=ansible | PLAY [Correct configs for PostgreSQL on the master node] **********************************************************************************************************************
2025-02-28 14:50:09,439 p=7877 u=digitd n=ansible | TASK [Edit or ensure port for the service] ************************************************************************************************************************************
2025-02-28 14:50:09,969 p=7877 u=digitd n=ansible | ok: [db.master.lan]
2025-02-28 14:50:09,971 p=7877 u=digitd n=ansible | TASK [Let's listen all incoming connections] **********************************************************************************************************************************
2025-02-28 14:50:10,398 p=7877 u=digitd n=ansible | ok: [db.master.lan]
2025-02-28 14:50:10,401 p=7877 u=digitd n=ansible | TASK [Restart service after editing of configs] *******************************************************************************************************************************
2025-02-28 14:50:11,671 p=7877 u=digitd n=ansible | changed: [db.master.lan]
2025-02-28 14:50:11,678 p=7877 u=digitd n=ansible | PLAY [Change haproxy.cfg and start load balance to the nodes (copy file from the project directory)] **************************************************************************
2025-02-28 14:50:11,687 p=7877 u=digitd n=ansible | TASK [Edit or ensure config file for haproxy] *********************************************************************************************************************************
2025-02-28 14:50:12,717 p=7877 u=digitd n=ansible | ok: [db.test.lan]
2025-02-28 14:50:13,013 p=7877 u=digitd n=ansible | ok: [db.test1.lan]
2025-02-28 14:50:13,015 p=7877 u=digitd n=ansible | TASK [Restart haproxy service] ************************************************************************************************************************************************
2025-02-28 14:50:14,416 p=7877 u=digitd n=ansible | [WARNING]: Module invocation had junk after the JSON data:   Broadcast message from systemd-journald@haproxydeb (Fri 2025-02-28 14:50:14 MSK):    haproxy[11318]: backend
master_back has no server available!      Broadcast message from systemd-journald@haproxydeb (Fri 2025-02-28 14:50:14 MSK):    haproxy[11318]: backend master_back has no
server available!

2025-02-28 14:50:14,444 p=7877 u=digitd n=ansible | changed: [db.test.lan]
2025-02-28 14:50:14,474 p=7877 u=digitd n=ansible | [WARNING]: Module invocation had junk after the JSON data:   Broadcast message from systemd-journald@haproxyvip (Fri 2025-02-28 14:50:14 MSK):    haproxy[9434]: backend
master_back has no server available!      Broadcast message from systemd-journald@haproxyvip (Fri 2025-02-28 14:50:14 MSK):    haproxy[9434]: backend master_back has no
server available!

2025-02-28 14:50:14,494 p=7877 u=digitd n=ansible | changed: [db.test1.lan]
2025-02-28 14:50:14,508 p=7877 u=digitd n=ansible | PLAY [Run keepalived services for MASTER Haproxy] *****************************************************************************************************************************
2025-02-28 14:50:14,514 p=7877 u=digitd n=ansible | TASK [Copy conf on MASTER HAProxy node] ***************************************************************************************************************************************
2025-02-28 14:50:15,448 p=7877 u=digitd n=ansible | changed: [db.test1.lan]
2025-02-28 14:50:15,450 p=7877 u=digitd n=ansible | TASK [Ensure or run keepalived service for Master] ****************************************************************************************************************************
2025-02-28 14:50:18,060 p=7877 u=digitd n=ansible | changed: [db.test1.lan]
2025-02-28 14:50:18,069 p=7877 u=digitd n=ansible | PLAY [Run keepalived services for BACKUP Haproxy] *****************************************************************************************************************************
2025-02-28 14:50:18,075 p=7877 u=digitd n=ansible | TASK [Copy conf on BACKUP HAProxy node] ***************************************************************************************************************************************
2025-02-28 14:50:18,917 p=7877 u=digitd n=ansible | changed: [db.test1.lan]
2025-02-28 14:50:18,919 p=7877 u=digitd n=ansible | TASK [Ensure or run keepalived service for BACKUP] ****************************************************************************************************************************
2025-02-28 14:50:21,158 p=7877 u=digitd n=ansible | changed: [db.test1.lan]
2025-02-28 14:50:21,166 p=7877 u=digitd n=ansible | PLAY [Configure etcd on the MASTER database machine] **************************************************************************************************************************
2025-02-28 14:50:21,172 p=7877 u=digitd n=ansible | TASK [Copy etcd file] *********************************************************************************************************************************************************
2025-02-28 14:50:24,946 p=7877 u=digitd n=ansible | changed: [db.master.lan]
2025-02-28 14:50:24,949 p=7877 u=digitd n=ansible | TASK [Create data directory] **************************************************************************************************************************************************
2025-02-28 14:50:25,402 p=7877 u=digitd n=ansible | changed: [db.master.lan]
2025-02-28 14:50:25,406 p=7877 u=digitd n=ansible | TASK [Install etcd] ***********************************************************************************************************************************************************
2025-02-28 14:50:30,395 p=7877 u=digitd n=ansible | ok: [db.master.lan]
2025-02-28 14:50:30,398 p=7877 u=digitd n=ansible | TASK [Clear old values of the cluster in base] ********************************************************************************************************************************
2025-02-28 14:50:34,076 p=7877 u=digitd n=ansible | ok: [db.master.lan]
2025-02-28 14:50:34,079 p=7877 u=digitd n=ansible | TASK [Restart etcd service] ***************************************************************************************************************************************************
2025-02-28 14:50:44,759 p=7877 u=digitd n=ansible | changed: [db.master.lan]
2025-02-28 14:50:44,765 p=7877 u=digitd n=ansible | PLAY [Configure etcd on the SLAVE database machine] ***************************************************************************************************************************
2025-02-28 14:50:44,771 p=7877 u=digitd n=ansible | TASK [Copy etcd file] *********************************************************************************************************************************************************
2025-02-28 14:50:46,316 p=7877 u=digitd n=ansible | changed: [db.slave.lan]
2025-02-28 14:50:46,318 p=7877 u=digitd n=ansible | TASK [Install etcd] ***********************************************************************************************************************************************************
2025-02-28 14:50:48,537 p=7877 u=digitd n=ansible | ok: [db.slave.lan]
2025-02-28 14:50:48,539 p=7877 u=digitd n=ansible | TASK [Clear old values of the cluster in base] ********************************************************************************************************************************
2025-02-28 14:50:49,549 p=7877 u=digitd n=ansible | ok: [db.slave.lan]
2025-02-28 14:50:49,552 p=7877 u=digitd n=ansible | TASK [Restart etcd service] ***************************************************************************************************************************************************
2025-02-28 14:50:58,031 p=7877 u=digitd n=ansible | changed: [db.slave.lan]
2025-02-28 14:50:58,038 p=7877 u=digitd n=ansible | PLAY [Configure etcd on the another ETCD machine] *****************************************************************************************************************************
2025-02-28 14:50:58,045 p=7877 u=digitd n=ansible | TASK [Copy etcd file] *********************************************************************************************************************************************************
2025-02-28 14:50:59,715 p=7877 u=digitd n=ansible | changed: [db.etcd.lan]
2025-02-28 14:50:59,718 p=7877 u=digitd n=ansible | TASK [Install etcd] ***********************************************************************************************************************************************************
2025-02-28 14:51:21,236 p=7877 u=digitd n=ansible | ok: [db.etcd.lan]
2025-02-28 14:51:21,239 p=7877 u=digitd n=ansible | TASK [Clear old values of the cluster in base] ********************************************************************************************************************************
2025-02-28 14:51:22,918 p=7877 u=digitd n=ansible | ok: [db.etcd.lan]
2025-02-28 14:51:22,921 p=7877 u=digitd n=ansible | TASK [Restart etcd service] ***************************************************************************************************************************************************
2025-02-28 14:51:32,489 p=7877 u=digitd n=ansible | changed: [db.etcd.lan]
2025-02-28 14:51:32,493 p=7877 u=digitd n=ansible | TASK [Get status of etcd] *****************************************************************************************************************************************************
2025-02-28 14:51:32,981 p=7877 u=digitd n=ansible | ok: [db.etcd.lan]
2025-02-28 14:51:32,985 p=7877 u=digitd n=ansible | TASK [Print it] ***************************************************************************************************************************************************************
2025-02-28 14:51:33,000 p=7877 u=digitd n=ansible | ok: [db.etcd.lan] => {
    "msg": [
        "+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+",
        "|         ENDPOINT         |        ID        | VERSION | DB SIZE | IS LEADER | IS LEARNER | RAFT TERM | RAFT INDEX | RAFT APPLIED INDEX | ERRORS |",
        "+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+",
        "| http://192.168.2.16:2379 | 81cab37376d1dc8e |  3.5.16 |  135 kB |      true |      false |      1487 |      33238 |              33238 |        |",
        "| http://192.168.2.18:2379 | ac75029e92c4132b |  3.4.23 |  135 kB |     false |      false |      1487 |      33238 |              33238 |        |",
        "| http://192.168.2.17:2379 | c0cf9bdfef3320b4 |  3.5.16 |  135 kB |     false |      false |      1487 |      33238 |              33238 |        |",
        "+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+"
    ]
}
2025-02-28 14:51:33,002 p=7877 u=digitd n=ansible | TASK [Get etcd members] *******************************************************************************************************************************************************
2025-02-28 14:51:33,446 p=7877 u=digitd n=ansible | ok: [db.etcd.lan]
2025-02-28 14:51:33,449 p=7877 u=digitd n=ansible | TASK [Print it] ***************************************************************************************************************************************************************
2025-02-28 14:51:33,463 p=7877 u=digitd n=ansible | ok: [db.etcd.lan] => {
    "msg": [
        "+------------------+---------+----------+--------------------------+--------------------------+------------+",
        "|        ID        | STATUS  |   NAME   |        PEER ADDRS        |       CLIENT ADDRS       | IS LEARNER |",
        "+------------------+---------+----------+--------------------------+--------------------------+------------+",
        "| 81cab37376d1dc8e | started | masterpg | http://192.168.2.16:2380 | http://192.168.2.16:2379 |      false |",
        "| ac75029e92c4132b | started |   etcdpg | http://192.168.2.18:2380 | http://192.168.2.18:2379 |      false |",
        "| c0cf9bdfef3320b4 | started |  slavepg | http://192.168.2.17:2380 | http://192.168.2.17:2379 |      false |",
        "+------------------+---------+----------+--------------------------+--------------------------+------------+"
    ]
}
2025-02-28 14:51:33,471 p=7877 u=digitd n=ansible | PLAY [Copy patroni config (MASTER)] *******************************************************************************************************************************************
2025-02-28 14:51:33,477 p=7877 u=digitd n=ansible | TASK [Create directory] *******************************************************************************************************************************************************
2025-02-28 14:51:33,920 p=7877 u=digitd n=ansible | ok: [db.master.lan]
2025-02-28 14:51:33,922 p=7877 u=digitd n=ansible | TASK [Copy the patroni configuration file to the MASTER] **********************************************************************************************************************
2025-02-28 14:51:34,833 p=7877 u=digitd n=ansible | changed: [db.master.lan]
2025-02-28 14:51:34,840 p=7877 u=digitd n=ansible | PLAY [Copy patroni config (SLAVE)] ********************************************************************************************************************************************
2025-02-28 14:51:34,846 p=7877 u=digitd n=ansible | TASK [Create directory] *******************************************************************************************************************************************************
2025-02-28 14:51:35,285 p=7877 u=digitd n=ansible | ok: [db.slave.lan]
2025-02-28 14:51:35,288 p=7877 u=digitd n=ansible | TASK [Copy the patroni configuration file to the REPLICA] *********************************************************************************************************************
2025-02-28 14:51:36,184 p=7877 u=digitd n=ansible | changed: [db.slave.lan]
2025-02-28 14:51:36,191 p=7877 u=digitd n=ansible | PLAY [Configure Patroni] ******************************************************************************************************************************************************
2025-02-28 14:51:36,199 p=7877 u=digitd n=ansible | TASK [Install patroni package] ************************************************************************************************************************************************
2025-02-28 14:51:39,141 p=7877 u=digitd n=ansible | ok: [db.master.lan]
2025-02-28 14:51:44,031 p=7877 u=digitd n=ansible | ok: [db.slave.lan]
2025-02-28 14:51:44,033 p=7877 u=digitd n=ansible | TASK [Create unnecessary directory for certs] *********************************************************************************************************************************
2025-02-28 14:51:44,476 p=7877 u=digitd n=ansible | ok: [db.slave.lan]
2025-02-28 14:51:44,477 p=7877 u=digitd n=ansible | ok: [db.master.lan]
2025-02-28 14:51:44,479 p=7877 u=digitd n=ansible | TASK [Create data directory for database] *************************************************************************************************************************************
2025-02-28 14:51:44,912 p=7877 u=digitd n=ansible | changed: [db.master.lan]
2025-02-28 14:51:44,919 p=7877 u=digitd n=ansible | changed: [db.slave.lan]
2025-02-28 14:51:44,922 p=7877 u=digitd n=ansible | TASK [Copy certificates on the machines] **************************************************************************************************************************************
2025-02-28 14:51:48,455 p=7877 u=digitd n=ansible | ok: [db.master.lan]
2025-02-28 14:51:50,101 p=7877 u=digitd n=ansible | ok: [db.slave.lan]
2025-02-28 14:51:50,105 p=7877 u=digitd n=ansible | TASK [Start services] *********************************************************************************************************************************************************
2025-02-28 14:51:51,334 p=7877 u=digitd n=ansible | changed: [db.master.lan]
2025-02-28 14:51:58,929 p=7877 u=digitd n=ansible | changed: [db.slave.lan]
2025-02-28 14:51:58,931 p=7877 u=digitd n=ansible | TASK [Get patronictl status] **************************************************************************************************************************************************
2025-02-28 14:52:02,712 p=7877 u=digitd n=ansible | ok: [db.master.lan]
2025-02-28 14:52:04,731 p=7877 u=digitd n=ansible | ok: [db.slave.lan]
2025-02-28 14:52:04,748 p=7877 u=digitd n=ansible | TASK [Get time for Pantroni initializing] *************************************************************************************************************************************
2025-02-28 14:52:04,762 p=7877 u=digitd n=ansible | Pausing for 120 seconds
2025-02-28 14:52:04,762 p=7877 u=digitd n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2025-02-28 14:52:13,688 p=7877 u=digitd n=ansible | Press 'C' to continue the play or 'A' to abort 
2025-02-28 14:52:16,948 p=7877 u=digitd n=ansible | ok: [db.master.lan]
2025-02-28 14:52:16,950 p=7877 u=digitd n=ansible | TASK [Print it] ***************************************************************************************************************************************************************
2025-02-28 14:52:16,966 p=7877 u=digitd n=ansible | ok: [db.master.lan] => {
    "msg": [
        "+ Cluster: clusterdb (7474708650853863707) -------+----+-----------+",
        "| Member  | Host              | Role    | State   | TL | Lag in MB |",
        "+---------+-------------------+---------+---------+----+-----------+",
        "| slavedb | 192.168.2.17:5050 | Replica | stopped |    |   unknown |",
        "+---------+-------------------+---------+---------+----+-----------+"
    ]
}
2025-02-28 14:52:16,973 p=7877 u=digitd n=ansible | ok: [db.slave.lan] => {
    "msg": [
        "+ Cluster: clusterdb (7474708650853863707) --------+----+-----------+",
        "| Member   | Host              | Role    | State   | TL | Lag in MB |",
        "+----------+-------------------+---------+---------+----+-----------+",
        "| masterdb | 192.168.2.16:5050 | Replica | stopped |    |   unknown |",
        "| slavedb  | 192.168.2.17:5050 | Replica | stopped |    |   unknown |",
        "+----------+-------------------+---------+---------+----+-----------+"
    ]
}
2025-02-28 14:52:16,988 p=7877 u=digitd n=ansible | PLAY RECAP ********************************************************************************************************************************************************************
2025-02-28 14:52:16,988 p=7877 u=digitd n=ansible | db.etcd.lan                : ok=8    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-28 14:52:16,988 p=7877 u=digitd n=ansible | db.master.lan              : ok=20   changed=8    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-28 14:52:16,988 p=7877 u=digitd n=ansible | db.slave.lan               : ok=15   changed=5    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-28 14:52:16,989 p=7877 u=digitd n=ansible | db.test.lan                : ok=4    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-28 14:52:16,989 p=7877 u=digitd n=ansible | db.test1.lan               : ok=6    changed=5    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-28 15:02:35,476 p=12324 u=digitd n=ansible | PLAY [Install PostgreSQL and check status] ************************************************************************************************************************************
2025-02-28 15:02:35,488 p=12324 u=digitd n=ansible | TASK [Install PostgreSQL] *****************************************************************************************************************************************************
2025-02-28 15:02:37,983 p=12324 u=digitd n=ansible | ok: [db.master.lan]
2025-02-28 15:02:38,854 p=12324 u=digitd n=ansible | ok: [db.slave.lan]
2025-02-28 15:02:38,856 p=12324 u=digitd n=ansible | TASK [Check service] **********************************************************************************************************************************************************
2025-02-28 15:02:43,414 p=12324 u=digitd n=ansible | changed: [db.master.lan]
2025-02-28 15:02:43,892 p=12324 u=digitd n=ansible | changed: [db.slave.lan]
2025-02-28 15:02:43,904 p=12324 u=digitd n=ansible | PLAY [Configure etcd on the MASTER database machine] **************************************************************************************************************************
2025-02-28 15:02:43,909 p=12324 u=digitd n=ansible | TASK [Copy etcd file] *********************************************************************************************************************************************************
2025-02-28 15:02:44,975 p=12324 u=digitd n=ansible | ok: [db.master.lan]
2025-02-28 15:02:44,977 p=12324 u=digitd n=ansible | TASK [Create data directory] **************************************************************************************************************************************************
2025-02-28 15:02:45,492 p=12324 u=digitd n=ansible | ok: [db.master.lan]
2025-02-28 15:02:45,494 p=12324 u=digitd n=ansible | TASK [Install etcd] ***********************************************************************************************************************************************************
2025-02-28 15:02:47,116 p=12324 u=digitd n=ansible | ok: [db.master.lan]
2025-02-28 15:02:47,120 p=12324 u=digitd n=ansible | TASK [Clear old values of the cluster in base] ********************************************************************************************************************************
2025-02-28 15:02:47,759 p=12324 u=digitd n=ansible | ok: [db.master.lan]
2025-02-28 15:02:47,763 p=12324 u=digitd n=ansible | TASK [Restart etcd service] ***************************************************************************************************************************************************
2025-02-28 15:02:51,689 p=12324 u=digitd n=ansible | changed: [db.master.lan]
2025-02-28 15:02:51,696 p=12324 u=digitd n=ansible | PLAY [Configure etcd on the SLAVE database machine] ***************************************************************************************************************************
2025-02-28 15:02:51,701 p=12324 u=digitd n=ansible | TASK [Copy etcd file] *********************************************************************************************************************************************************
2025-02-28 15:02:52,512 p=12324 u=digitd n=ansible | ok: [db.slave.lan]
2025-02-28 15:02:52,514 p=12324 u=digitd n=ansible | TASK [Install etcd] ***********************************************************************************************************************************************************
2025-02-28 15:02:54,225 p=12324 u=digitd n=ansible | ok: [db.slave.lan]
2025-02-28 15:02:54,227 p=12324 u=digitd n=ansible | TASK [Clear old values of the cluster in base] ********************************************************************************************************************************
2025-02-28 15:02:54,868 p=12324 u=digitd n=ansible | ok: [db.slave.lan]
2025-02-28 15:02:54,871 p=12324 u=digitd n=ansible | TASK [Restart etcd service] ***************************************************************************************************************************************************
2025-02-28 15:03:07,558 p=12324 u=digitd n=ansible | changed: [db.slave.lan]
2025-02-28 15:03:07,569 p=12324 u=digitd n=ansible | PLAY [Configure etcd on the another ETCD machine] *****************************************************************************************************************************
2025-02-28 15:03:07,574 p=12324 u=digitd n=ansible | TASK [Copy etcd file] *********************************************************************************************************************************************************
2025-02-28 15:03:08,896 p=12324 u=digitd n=ansible | ok: [db.etcd.lan]
2025-02-28 15:03:08,898 p=12324 u=digitd n=ansible | TASK [Install etcd] ***********************************************************************************************************************************************************
2025-02-28 15:03:11,629 p=12324 u=digitd n=ansible | ok: [db.etcd.lan]
2025-02-28 15:03:11,631 p=12324 u=digitd n=ansible | TASK [Clear old values of the cluster in base] ********************************************************************************************************************************
2025-02-28 15:03:12,350 p=12324 u=digitd n=ansible | ok: [db.etcd.lan]
2025-02-28 15:03:12,352 p=12324 u=digitd n=ansible | TASK [Restart etcd service] ***************************************************************************************************************************************************
2025-02-28 15:03:15,410 p=12324 u=digitd n=ansible | changed: [db.etcd.lan]
2025-02-28 15:03:15,412 p=12324 u=digitd n=ansible | TASK [Get status of etcd] *****************************************************************************************************************************************************
2025-02-28 15:03:15,863 p=12324 u=digitd n=ansible | ok: [db.etcd.lan]
2025-02-28 15:03:15,866 p=12324 u=digitd n=ansible | TASK [Print it] ***************************************************************************************************************************************************************
2025-02-28 15:03:15,880 p=12324 u=digitd n=ansible | ok: [db.etcd.lan] => {
    "msg": [
        "+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+",
        "|         ENDPOINT         |        ID        | VERSION | DB SIZE | IS LEADER | IS LEARNER | RAFT TERM | RAFT INDEX | RAFT APPLIED INDEX | ERRORS |",
        "+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+",
        "| http://192.168.2.16:2379 | 81cab37376d1dc8e |  3.5.16 |  135 kB |      true |      false |      1490 |      33287 |              33287 |        |",
        "| http://192.168.2.18:2379 | ac75029e92c4132b |  3.4.23 |  135 kB |     false |      false |      1490 |      33287 |              33287 |        |",
        "| http://192.168.2.17:2379 | c0cf9bdfef3320b4 |  3.5.16 |  135 kB |     false |      false |      1490 |      33287 |              33287 |        |",
        "+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+"
    ]
}
2025-02-28 15:03:15,882 p=12324 u=digitd n=ansible | TASK [Get etcd members] *******************************************************************************************************************************************************
2025-02-28 15:03:16,331 p=12324 u=digitd n=ansible | ok: [db.etcd.lan]
2025-02-28 15:03:16,333 p=12324 u=digitd n=ansible | TASK [Print it] ***************************************************************************************************************************************************************
2025-02-28 15:03:16,347 p=12324 u=digitd n=ansible | ok: [db.etcd.lan] => {
    "msg": [
        "+------------------+---------+----------+--------------------------+--------------------------+------------+",
        "|        ID        | STATUS  |   NAME   |        PEER ADDRS        |       CLIENT ADDRS       | IS LEARNER |",
        "+------------------+---------+----------+--------------------------+--------------------------+------------+",
        "| 81cab37376d1dc8e | started | masterpg | http://192.168.2.16:2380 | http://192.168.2.16:2379 |      false |",
        "| ac75029e92c4132b | started |   etcdpg | http://192.168.2.18:2380 | http://192.168.2.18:2379 |      false |",
        "| c0cf9bdfef3320b4 | started |  slavepg | http://192.168.2.17:2380 | http://192.168.2.17:2379 |      false |",
        "+------------------+---------+----------+--------------------------+--------------------------+------------+"
    ]
}
2025-02-28 15:03:16,356 p=12324 u=digitd n=ansible | PLAY [Copy patroni config (MASTER)] *******************************************************************************************************************************************
2025-02-28 15:03:16,362 p=12324 u=digitd n=ansible | TASK [Create directory] *******************************************************************************************************************************************************
2025-02-28 15:03:16,796 p=12324 u=digitd n=ansible | ok: [db.master.lan]
2025-02-28 15:03:16,798 p=12324 u=digitd n=ansible | TASK [Copy the patroni configuration file to the MASTER] **********************************************************************************************************************
2025-02-28 15:03:17,598 p=12324 u=digitd n=ansible | ok: [db.master.lan]
2025-02-28 15:03:17,605 p=12324 u=digitd n=ansible | PLAY [Copy patroni config (SLAVE)] ********************************************************************************************************************************************
2025-02-28 15:03:17,611 p=12324 u=digitd n=ansible | TASK [Create directory] *******************************************************************************************************************************************************
2025-02-28 15:03:18,035 p=12324 u=digitd n=ansible | ok: [db.slave.lan]
2025-02-28 15:03:18,037 p=12324 u=digitd n=ansible | TASK [Copy the patroni configuration file to the REPLICA] *********************************************************************************************************************
2025-02-28 15:03:18,849 p=12324 u=digitd n=ansible | ok: [db.slave.lan]
2025-02-28 15:03:18,856 p=12324 u=digitd n=ansible | PLAY [Configure Patroni] ******************************************************************************************************************************************************
2025-02-28 15:03:18,864 p=12324 u=digitd n=ansible | TASK [Install patroni package] ************************************************************************************************************************************************
2025-02-28 15:03:20,520 p=12324 u=digitd n=ansible | ok: [db.master.lan]
2025-02-28 15:03:20,596 p=12324 u=digitd n=ansible | ok: [db.slave.lan]
2025-02-28 15:03:20,598 p=12324 u=digitd n=ansible | TASK [Create unnecessary directory for certs] *********************************************************************************************************************************
2025-02-28 15:03:20,991 p=12324 u=digitd n=ansible | ok: [db.master.lan]
2025-02-28 15:03:21,030 p=12324 u=digitd n=ansible | ok: [db.slave.lan]
2025-02-28 15:03:21,033 p=12324 u=digitd n=ansible | TASK [Create data directory for database] *************************************************************************************************************************************
2025-02-28 15:03:21,486 p=12324 u=digitd n=ansible | ok: [db.master.lan]
2025-02-28 15:03:21,502 p=12324 u=digitd n=ansible | ok: [db.slave.lan]
2025-02-28 15:03:21,504 p=12324 u=digitd n=ansible | TASK [Copy certificates on the machines] **************************************************************************************************************************************
2025-02-28 15:03:24,140 p=12324 u=digitd n=ansible | ok: [db.master.lan]
2025-02-28 15:03:24,755 p=12324 u=digitd n=ansible | ok: [db.slave.lan]
2025-02-28 15:03:24,758 p=12324 u=digitd n=ansible | TASK [Start services] *********************************************************************************************************************************************************
2025-02-28 15:03:29,025 p=12324 u=digitd n=ansible | changed: [db.master.lan]
2025-02-28 15:03:40,881 p=12324 u=digitd n=ansible | changed: [db.slave.lan]
2025-02-28 15:03:40,883 p=12324 u=digitd n=ansible | TASK [Get patronictl status] **************************************************************************************************************************************************
2025-02-28 15:03:42,145 p=12324 u=digitd n=ansible | ok: [db.master.lan]
2025-02-28 15:03:43,268 p=12324 u=digitd n=ansible | ok: [db.slave.lan]
2025-02-28 15:03:43,271 p=12324 u=digitd n=ansible | TASK [Get time for Pantroni initializing] *************************************************************************************************************************************
2025-02-28 15:03:43,282 p=12324 u=digitd n=ansible | Pausing for 120 seconds
2025-02-28 15:03:43,283 p=12324 u=digitd n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2025-02-28 15:04:40,164 p=12324 u=digitd n=ansible | Press 'C' to continue the play or 'A' to abort 
2025-02-28 15:04:50,290 p=12324 u=digitd n=ansible | ok: [db.master.lan]
2025-02-28 15:04:50,293 p=12324 u=digitd n=ansible | TASK [Print it] ***************************************************************************************************************************************************************
2025-02-28 15:04:50,309 p=12324 u=digitd n=ansible | ok: [db.master.lan] => {
    "msg": [
        "+ Cluster: clusterdb (7474708650853863707) ---------+----+-----------+",
        "| Member   | Host              | Role    | State    | TL | Lag in MB |",
        "+----------+-------------------+---------+----------+----+-----------+",
        "| masterdb | 192.168.2.16:5050 | Replica | starting |    |   unknown |",
        "| slavedb  | 192.168.2.17:5050 | Replica | stopped  |    |   unknown |",
        "+----------+-------------------+---------+----------+----+-----------+"
    ]
}
2025-02-28 15:04:50,316 p=12324 u=digitd n=ansible | ok: [db.slave.lan] => {
    "msg": [
        "+ Cluster: clusterdb (7474708650853863707) ---------+----+-----------+",
        "| Member   | Host              | Role    | State    | TL | Lag in MB |",
        "+----------+-------------------+---------+----------+----+-----------+",
        "| masterdb | 192.168.2.16:5050 | Replica | starting |    |   unknown |",
        "| slavedb  | 192.168.2.17:5050 | Replica | stopped  |    |   unknown |",
        "+----------+-------------------+---------+----------+----+-----------+"
    ]
}
2025-02-28 15:04:50,333 p=12324 u=digitd n=ansible | PLAY [Install haproxy and run service] ****************************************************************************************************************************************
2025-02-28 15:04:50,338 p=12324 u=digitd n=ansible | TASK [Install HAProxy] ********************************************************************************************************************************************************
2025-02-28 15:04:52,186 p=12324 u=digitd n=ansible | ok: [db.test.lan]
2025-02-28 15:04:52,188 p=12324 u=digitd n=ansible | TASK [Check service status] ***************************************************************************************************************************************************
2025-02-28 15:04:53,244 p=12324 u=digitd n=ansible | ok: [db.test.lan]
2025-02-28 15:04:53,251 p=12324 u=digitd n=ansible | PLAY [Change haproxy.cfg and start load balance to the nodes (copy file from the project directory)] **************************************************************************
2025-02-28 15:04:53,261 p=12324 u=digitd n=ansible | TASK [Edit or ensure config file for haproxy] *********************************************************************************************************************************
2025-02-28 15:04:53,928 p=12324 u=digitd n=ansible | ok: [db.test.lan]
2025-02-28 15:04:54,530 p=12324 u=digitd n=ansible | ok: [db.test1.lan]
2025-02-28 15:04:54,532 p=12324 u=digitd n=ansible | TASK [Restart haproxy service] ************************************************************************************************************************************************
2025-02-28 15:04:55,773 p=12324 u=digitd n=ansible | changed: [db.test1.lan]
2025-02-28 15:04:56,196 p=12324 u=digitd n=ansible | changed: [db.test.lan]
2025-02-28 15:04:56,208 p=12324 u=digitd n=ansible | PLAY [Run keepalived services for MASTER Haproxy] *****************************************************************************************************************************
2025-02-28 15:04:56,215 p=12324 u=digitd n=ansible | TASK [Copy conf on MASTER HAProxy node] ***************************************************************************************************************************************
2025-02-28 15:04:57,129 p=12324 u=digitd n=ansible | changed: [db.test1.lan]
2025-02-28 15:04:57,131 p=12324 u=digitd n=ansible | TASK [Ensure or run keepalived service for Master] ****************************************************************************************************************************
2025-02-28 15:04:59,341 p=12324 u=digitd n=ansible | changed: [db.test1.lan]
2025-02-28 15:04:59,347 p=12324 u=digitd n=ansible | PLAY [Run keepalived services for BACKUP Haproxy] *****************************************************************************************************************************
2025-02-28 15:04:59,353 p=12324 u=digitd n=ansible | TASK [Copy conf on BACKUP HAProxy node] ***************************************************************************************************************************************
2025-02-28 15:05:00,202 p=12324 u=digitd n=ansible | changed: [db.test1.lan]
2025-02-28 15:05:00,205 p=12324 u=digitd n=ansible | TASK [Ensure or run keepalived service for BACKUP] ****************************************************************************************************************************
2025-02-28 15:05:02,459 p=12324 u=digitd n=ansible | changed: [db.test1.lan]
2025-02-28 15:05:02,464 p=12324 u=digitd n=ansible | PLAY RECAP ********************************************************************************************************************************************************************
2025-02-28 15:05:02,464 p=12324 u=digitd n=ansible | db.etcd.lan                : ok=8    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-28 15:05:02,464 p=12324 u=digitd n=ansible | db.master.lan              : ok=17   changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-28 15:05:02,465 p=12324 u=digitd n=ansible | db.slave.lan               : ok=15   changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-28 15:05:02,465 p=12324 u=digitd n=ansible | db.test.lan                : ok=4    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-28 15:05:02,465 p=12324 u=digitd n=ansible | db.test1.lan               : ok=6    changed=5    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-28 16:05:30,010 p=30649 u=digitd n=ansible | ansible-playbook [core 2.14.18]
  config file = /home/digitd/travelata_test/ansible/ansible.cfg
  configured module search path = ['/home/digitd/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python3/dist-packages/ansible
  ansible collection location = /home/digitd/.ansible/collections:/usr/share/ansible/collections
  executable location = /usr/bin/ansible-playbook
  python version = 3.11.2 (main, Sep 14 2024, 03:00:30) [GCC 12.2.0] (/usr/bin/python3)
  jinja version = 3.1.2
  libyaml = True
2025-02-28 16:05:30,011 p=30649 u=digitd n=ansible | Using /home/digitd/travelata_test/ansible/ansible.cfg as config file
2025-02-28 16:05:30,012 p=30649 u=digitd n=ansible | ERROR! the playbook: ./setup_backup.yml could not be found
2025-02-28 16:05:46,041 p=30747 u=digitd n=ansible | ansible-playbook [core 2.14.18]
  config file = /home/digitd/travelata_test/ansible/ansible.cfg
  configured module search path = ['/home/digitd/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python3/dist-packages/ansible
  ansible collection location = /home/digitd/.ansible/collections:/usr/share/ansible/collections
  executable location = /usr/bin/ansible-playbook
  python version = 3.11.2 (main, Sep 14 2024, 03:00:30) [GCC 12.2.0] (/usr/bin/python3)
  jinja version = 3.1.2
  libyaml = True
2025-02-28 16:05:46,041 p=30747 u=digitd n=ansible | Using /home/digitd/travelata_test/ansible/ansible.cfg as config file
2025-02-28 16:05:46,255 p=30747 u=digitd n=ansible | Skipping callback 'default', as we already have a stdout callback.
2025-02-28 16:05:46,255 p=30747 u=digitd n=ansible | Skipping callback 'minimal', as we already have a stdout callback.
2025-02-28 16:05:46,255 p=30747 u=digitd n=ansible | Skipping callback 'oneline', as we already have a stdout callback.
2025-02-28 16:05:46,256 p=30747 u=digitd n=ansible | PLAYBOOK: start_services.yml **************************************************************************************************************************************************
2025-02-28 16:05:46,256 p=30747 u=digitd n=ansible | 15 plays in ./start_services.yml
2025-02-28 16:05:46,258 p=30747 u=digitd n=ansible | PLAY [Install PostgreSQL and check status] ************************************************************************************************************************************
2025-02-28 16:05:46,285 p=30747 u=digitd n=ansible | TASK [Install PostgreSQL] *****************************************************************************************************************************************************
2025-02-28 16:05:48,810 p=30747 u=digitd n=ansible | ok: [db.slave.lan] => {"ansible_facts": {"discovered_interpreter_python": "/usr/bin/python3.11"}, "cache_update_time": 1740733242, "cache_updated": false, "changed": false}
2025-02-28 16:05:49,897 p=30747 u=digitd n=ansible | ok: [db.master.lan] => {"ansible_facts": {"discovered_interpreter_python": "/usr/bin/python3.11"}, "cache_update_time": 1740743388, "cache_updated": false, "changed": false}
2025-02-28 16:05:49,914 p=30747 u=digitd n=ansible | TASK [Check service] **********************************************************************************************************************************************************
2025-02-28 16:05:51,557 p=30747 u=digitd n=ansible | ok: [db.slave.lan] => {"changed": false, "enabled": false, "name": "postgresql", "state": "stopped", "status": {"ActiveEnterTimestampMonotonic": "0", "ActiveExitTimestampMonotonic": "0", "ActiveState": "inactive", "After": "postgresql@15-main.service systemd-journald.socket basic.target sysinit.target system.slice", "AllowIsolate": "no", "AssertResult": "no", "AssertTimestampMonotonic": "0", "Before": "shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "[not set]", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "no", "ConditionTimestampMonotonic": "0", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ConsistsOf": "postgresql@15-main.service", "ControlGroupId": "0", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "PostgreSQL RDBMS", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainHandoffTimestampMonotonic": "0", "ExecMainPID": "0", "ExecMainStartTimestampMonotonic": "0", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/postgresql.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "postgresql.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestampMonotonic": "0", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "624717824", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "[not set]", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "[not set]", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "[not set]", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "postgresql.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "PropagatesReloadTo": "postgresql@15-main.service", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "yes", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "no", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "no", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestampMonotonic": "0", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "oneshot", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "disabled", "UtmpMode": "init", "Wants": "postgresql@15-main.service", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "infinity"}}
2025-02-28 16:05:51,650 p=30747 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "enabled": false, "name": "postgresql", "state": "stopped", "status": {"ActiveEnterTimestampMonotonic": "0", "ActiveExitTimestampMonotonic": "0", "ActiveState": "inactive", "After": "basic.target postgresql@15-main.service sysinit.target system.slice systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "no", "AssertTimestampMonotonic": "0", "Before": "shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "[not set]", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "no", "ConditionTimestampMonotonic": "0", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ConsistsOf": "postgresql@15-main.service", "ControlGroupId": "0", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "PostgreSQL RDBMS", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainHandoffTimestampMonotonic": "0", "ExecMainPID": "0", "ExecMainStartTimestampMonotonic": "0", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/postgresql.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "postgresql.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestampMonotonic": "0", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "621166592", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "[not set]", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "[not set]", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "[not set]", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "postgresql.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "PropagatesReloadTo": "postgresql@15-main.service", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "yes", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "no", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "no", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestampMonotonic": "0", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "oneshot", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "disabled", "UtmpMode": "init", "Wants": "postgresql@15-main.service", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "infinity"}}
2025-02-28 16:05:51,661 p=30747 u=digitd n=ansible | PLAY [Configure etcd on the MASTER database machine] **************************************************************************************************************************
2025-02-28 16:05:51,669 p=30747 u=digitd n=ansible | TASK [Copy etcd file] *********************************************************************************************************************************************************
2025-02-28 16:05:52,792 p=30747 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "checksum": "e2fedb4e1237da20f4c73b66ef8b9893cbaebc0f", "dest": "/etc/default/etcd", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/default/etcd", "size": 1666, "state": "file", "uid": 0}
2025-02-28 16:05:52,795 p=30747 u=digitd n=ansible | TASK [Create data directory] **************************************************************************************************************************************************
2025-02-28 16:05:53,227 p=30747 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "gid": 111, "group": "etcd", "mode": "0770", "owner": "etcd", "path": "/var/lib/etcd", "size": 4096, "state": "directory", "uid": 103}
2025-02-28 16:05:53,229 p=30747 u=digitd n=ansible | TASK [Install etcd] ***********************************************************************************************************************************************************
2025-02-28 16:05:56,187 p=30747 u=digitd n=ansible | ok: [db.master.lan] => {"cache_update_time": 1740743388, "cache_updated": false, "changed": false}
2025-02-28 16:05:56,192 p=30747 u=digitd n=ansible | TASK [Clear old values of the cluster in base] ********************************************************************************************************************************
2025-02-28 16:05:58,790 p=30747 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "cmd": ["etcdctl", "del", "", "--prefix"], "delta": "0:00:00.280814", "end": "2025-02-28 16:05:58.879077", "msg": "", "rc": 0, "start": "2025-02-28 16:05:58.598263", "stderr": "", "stderr_lines": [], "stdout": "8", "stdout_lines": ["8"]}
2025-02-28 16:05:58,792 p=30747 u=digitd n=ansible | TASK [Restart etcd service] ***************************************************************************************************************************************************
2025-02-28 16:06:25,772 p=30747 u=digitd n=ansible | changed: [db.master.lan] => {"changed": true, "enabled": true, "name": "etcd", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 15:19:17 MSK", "ActiveEnterTimestampMonotonic": "408303998156", "ActiveExitTimestamp": "Fri 2025-02-28 15:18:16 MSK", "ActiveExitTimestampMonotonic": "408242842105", "ActiveState": "active", "After": "network.target system.slice basic.target sysinit.target systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 15:19:16 MSK", "AssertTimestampMonotonic": "408302749930", "Before": "multi-user.target etcd-discovery.service shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "30925285000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 15:19:16 MSK", "ConditionTimestampMonotonic": "408302749927", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/etcd.service", "ControlGroupId": "14235", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "etcd - highly-available key value store", "DevicePolicy": "auto", "Documentation": "https://etcd.io/docs man:etcd", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "Environment": "DAEMON_ARGS= ETCD_NAME=dbmaster ETCD_DATA_DIR=/var/lib/etcd/default", "EnvironmentFiles": "/etc/default/etcd (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainHandoffTimestamp": "Fri 2025-02-28 15:19:16 MSK", "ExecMainHandoffTimestampMonotonic": "408302781204", "ExecMainPID": "470056", "ExecMainStartTimestamp": "Fri 2025-02-28 15:19:16 MSK", "ExecMainStartTimestampMonotonic": "408302751185", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; ignore_errors=no ; start_time=[Fri 2025-02-28 15:19:16 MSK] ; stop_time=[n/a] ; pid=470056 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; flags= ; start_time=[Fri 2025-02-28 15:19:16 MSK] ; stop_time=[n/a] ; pid=470056 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/etcd.service", "FreezerState": "running", "GID": "111", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "etcd.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 15:18:17 MSK", "InactiveEnterTimestampMonotonic": "408244015155", "InactiveExitTimestamp": "Fri 2025-02-28 15:19:16 MSK", "InactiveExitTimestampMonotonic": "408302756498", "InvocationID": "56b59d7691c54a0b98f9dc36d937b962", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "65536", "LimitNOFILESoft": "65536", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "470056", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "623579136", "MemoryCurrent": "62685184", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "65126400", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "2387968", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "0", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "etcd.service etcd2.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-abnormal", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Fri 2025-02-28 15:19:17 MSK", "StateChangeTimestampMonotonic": "408303998156", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "8", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "103", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "etcd", "UtmpMode": "init", "WantedBy": "etcd-discovery.service multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:06:25,782 p=30747 u=digitd n=ansible | PLAY [Configure etcd on the SLAVE database machine] ***************************************************************************************************************************
2025-02-28 16:06:25,790 p=30747 u=digitd n=ansible | TASK [Copy etcd file] *********************************************************************************************************************************************************
2025-02-28 16:06:26,611 p=30747 u=digitd n=ansible | ok: [db.slave.lan] => {"changed": false, "checksum": "4fb16fe2a7b6f713b4a92c9446a9dc1c39660a21", "dest": "/etc/default/etcd", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/default/etcd", "size": 1584, "state": "file", "uid": 0}
2025-02-28 16:06:26,613 p=30747 u=digitd n=ansible | TASK [Install etcd] ***********************************************************************************************************************************************************
2025-02-28 16:06:28,349 p=30747 u=digitd n=ansible | ok: [db.slave.lan] => {"cache_update_time": 1740733242, "cache_updated": false, "changed": false}
2025-02-28 16:06:28,352 p=30747 u=digitd n=ansible | TASK [Clear old values of the cluster in base] ********************************************************************************************************************************
2025-02-28 16:06:28,935 p=30747 u=digitd n=ansible | ok: [db.slave.lan] => {"changed": false, "cmd": ["etcdctl", "del", "", "--prefix"], "delta": "0:00:00.089899", "end": "2025-02-28 16:06:29.038175", "msg": "", "rc": 0, "start": "2025-02-28 16:06:28.948276", "stderr": "", "stderr_lines": [], "stdout": "7", "stdout_lines": ["7"]}
2025-02-28 16:06:28,937 p=30747 u=digitd n=ansible | TASK [Restart etcd service] ***************************************************************************************************************************************************
2025-02-28 16:06:32,828 p=30747 u=digitd n=ansible | changed: [db.slave.lan] => {"changed": true, "enabled": true, "name": "etcd", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 15:19:11 MSK", "ActiveEnterTimestampMonotonic": "408238759264", "ActiveExitTimestamp": "Fri 2025-02-28 15:18:10 MSK", "ActiveExitTimestampMonotonic": "408177624430", "ActiveState": "active", "After": "basic.target network.target system.slice systemd-journald.socket sysinit.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 15:19:10 MSK", "AssertTimestampMonotonic": "408237676815", "Before": "etcd-discovery.service multi-user.target shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "33354073000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 15:19:10 MSK", "ConditionTimestampMonotonic": "408237676812", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/etcd.service", "ControlGroupId": "126052", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "etcd - highly-available key value store", "DevicePolicy": "auto", "Documentation": "https://etcd.io/docs man:etcd", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "Environment": "DAEMON_ARGS= ETCD_NAME=slavedb ETCD_DATA_DIR=/var/lib/etcd/default", "EnvironmentFiles": "/etc/default/etcd (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainHandoffTimestamp": "Fri 2025-02-28 15:19:10 MSK", "ExecMainHandoffTimestampMonotonic": "408237705027", "ExecMainPID": "432998", "ExecMainStartTimestamp": "Fri 2025-02-28 15:19:10 MSK", "ExecMainStartTimestampMonotonic": "408237677807", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; ignore_errors=no ; start_time=[Fri 2025-02-28 15:19:10 MSK] ; stop_time=[n/a] ; pid=432998 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; flags= ; start_time=[Fri 2025-02-28 15:19:10 MSK] ; stop_time=[n/a] ; pid=432998 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/etcd.service", "FreezerState": "running", "GID": "112", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "etcd.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 15:18:11 MSK", "InactiveEnterTimestampMonotonic": "408178735077", "InactiveExitTimestamp": "Fri 2025-02-28 15:19:10 MSK", "InactiveExitTimestampMonotonic": "408237682866", "InvocationID": "cc79788010954f228fdc680f8b6ea655", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "65536", "LimitNOFILESoft": "65536", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "432998", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "599838720", "MemoryCurrent": "46469120", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "48181248", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "0", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "0", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "etcd.service etcd2.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "on-abnormal", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Fri 2025-02-28 15:19:11 MSK", "StateChangeTimestampMonotonic": "408238759264", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "8", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "104", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "etcd", "UtmpMode": "init", "WantedBy": "etcd-discovery.service multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:06:32,834 p=30747 u=digitd n=ansible | PLAY [Configure etcd on the another ETCD machine] *****************************************************************************************************************************
2025-02-28 16:06:32,840 p=30747 u=digitd n=ansible | TASK [Copy etcd file] *********************************************************************************************************************************************************
2025-02-28 16:06:34,087 p=30747 u=digitd n=ansible | ok: [db.etcd.lan] => {"ansible_facts": {"discovered_interpreter_python": "/usr/bin/python3"}, "changed": false, "checksum": "60484e138bba76cd1caa22bfb1cb13542ef696b1", "dest": "/etc/default/etcd", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/default/etcd", "size": 1570, "state": "file", "uid": 0}
2025-02-28 16:06:34,089 p=30747 u=digitd n=ansible | TASK [Install etcd] ***********************************************************************************************************************************************************
2025-02-28 16:06:35,817 p=30747 u=digitd n=ansible | ok: [db.etcd.lan] => {"cache_update_time": 1740743468, "cache_updated": false, "changed": false}
2025-02-28 16:06:35,820 p=30747 u=digitd n=ansible | TASK [Clear old values of the cluster in base] ********************************************************************************************************************************
2025-02-28 16:06:36,386 p=30747 u=digitd n=ansible | ok: [db.etcd.lan] => {"changed": false, "cmd": ["etcdctl", "del", "", "--prefix"], "delta": "0:00:00.130798", "end": "2025-02-28 16:06:36.484792", "msg": "", "rc": 0, "start": "2025-02-28 16:06:36.353994", "stderr": "", "stderr_lines": [], "stdout": "7", "stdout_lines": ["7"]}
2025-02-28 16:06:36,389 p=30747 u=digitd n=ansible | TASK [Restart etcd service] ***************************************************************************************************************************************************
2025-02-28 16:06:39,284 p=30747 u=digitd n=ansible | changed: [db.etcd.lan] => {"changed": true, "enabled": true, "name": "etcd", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 15:19:11 MSK", "ActiveEnterTimestampMonotonic": "235751663156", "ActiveExitTimestamp": "Fri 2025-02-28 15:18:31 MSK", "ActiveExitTimestampMonotonic": "235712233306", "ActiveState": "active", "After": "systemd-journald.socket system.slice basic.target network.target sysinit.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 15:18:47 MSK", "AssertTimestampMonotonic": "235727765649", "Before": "multi-user.target etcd-discovery.service shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "40397526000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 15:18:47 MSK", "ConditionTimestampMonotonic": "235727765645", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/etcd.service", "ControlGroupId": "43304", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "etcd - highly-available key value store", "DevicePolicy": "auto", "Documentation": "https://etcd.io/docs man:etcd", "DynamicUser": "no", "EffectiveCPUs": "0", "EffectiveMemoryNodes": "0", "Environment": "DAEMON_ARGS= ETCD_NAME=etcd ETCD_DATA_DIR=/var/lib/etcd/default", "EnvironmentFiles": "/etc/default/etcd (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "16510", "ExecMainStartTimestamp": "Fri 2025-02-28 15:18:47 MSK", "ExecMainStartTimestampMonotonic": "235727772247", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; ignore_errors=no ; start_time=[Fri 2025-02-28 15:18:47 MSK] ; stop_time=[n/a] ; pid=16510 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; flags= ; start_time=[Fri 2025-02-28 15:18:47 MSK] ; stop_time=[n/a] ; pid=16510 ; code=(null) ; status=0/0 }", "ExitType": "main", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/etcd.service", "FreezerState": "running", "GID": "111", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "etcd.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 15:18:32 MSK", "InactiveEnterTimestampMonotonic": "235712282139", "InactiveExitTimestamp": "Fri 2025-02-28 15:18:47 MSK", "InactiveExitTimestampMonotonic": "235727774509", "InvocationID": "d9896bfc451e48aa95ac992672fd1121", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "65536", "LimitNOFILESoft": "65536", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "16510", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "62005248", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "etcd.service etcd2.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-abnormal", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Fri 2025-02-28 15:19:11 MSK", "StateChangeTimestampMonotonic": "235751663156", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "8", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "103", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "etcd", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:06:39,287 p=30747 u=digitd n=ansible | TASK [Get status of etcd] *****************************************************************************************************************************************************
2025-02-28 16:06:39,755 p=30747 u=digitd n=ansible | ok: [db.etcd.lan] => {"changed": false, "cmd": ["etcdctl", "--cluster=true", "endpoint", "status", "--write-out=table"], "delta": "0:00:00.031381", "end": "2025-02-28 16:06:39.866968", "msg": "", "rc": 0, "start": "2025-02-28 16:06:39.835587", "stderr": "", "stderr_lines": [], "stdout": "+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+\n|         ENDPOINT         |        ID        | VERSION | DB SIZE | IS LEADER | IS LEARNER | RAFT TERM | RAFT INDEX | RAFT APPLIED INDEX | ERRORS |\n+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+\n| http://192.168.2.16:2379 | 81cab37376d1dc8e |  3.5.16 |  135 kB |      true |      false |      1541 |      33490 |              33490 |        |\n| http://192.168.2.18:2379 | ac75029e92c4132b |  3.4.23 |  135 kB |     false |      false |      1541 |      33490 |              33490 |        |\n| http://192.168.2.17:2379 | c0cf9bdfef3320b4 |  3.5.16 |  135 kB |     false |      false |      1541 |      33490 |              33490 |        |\n+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+", "stdout_lines": ["+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+", "|         ENDPOINT         |        ID        | VERSION | DB SIZE | IS LEADER | IS LEARNER | RAFT TERM | RAFT INDEX | RAFT APPLIED INDEX | ERRORS |", "+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+", "| http://192.168.2.16:2379 | 81cab37376d1dc8e |  3.5.16 |  135 kB |      true |      false |      1541 |      33490 |              33490 |        |", "| http://192.168.2.18:2379 | ac75029e92c4132b |  3.4.23 |  135 kB |     false |      false |      1541 |      33490 |              33490 |        |", "| http://192.168.2.17:2379 | c0cf9bdfef3320b4 |  3.5.16 |  135 kB |     false |      false |      1541 |      33490 |              33490 |        |", "+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+"]}
2025-02-28 16:06:39,770 p=30747 u=digitd n=ansible | TASK [Print it] ***************************************************************************************************************************************************************
2025-02-28 16:06:39,787 p=30747 u=digitd n=ansible | ok: [db.etcd.lan] => {
    "msg": [
        "+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+",
        "|         ENDPOINT         |        ID        | VERSION | DB SIZE | IS LEADER | IS LEARNER | RAFT TERM | RAFT INDEX | RAFT APPLIED INDEX | ERRORS |",
        "+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+",
        "| http://192.168.2.16:2379 | 81cab37376d1dc8e |  3.5.16 |  135 kB |      true |      false |      1541 |      33490 |              33490 |        |",
        "| http://192.168.2.18:2379 | ac75029e92c4132b |  3.4.23 |  135 kB |     false |      false |      1541 |      33490 |              33490 |        |",
        "| http://192.168.2.17:2379 | c0cf9bdfef3320b4 |  3.5.16 |  135 kB |     false |      false |      1541 |      33490 |              33490 |        |",
        "+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+"
    ]
}
2025-02-28 16:06:39,790 p=30747 u=digitd n=ansible | TASK [Get etcd members] *******************************************************************************************************************************************************
2025-02-28 16:06:40,237 p=30747 u=digitd n=ansible | ok: [db.etcd.lan] => {"changed": false, "cmd": ["etcdctl", "member", "list", "--write-out=table"], "delta": "0:00:00.021365", "end": "2025-02-28 16:06:40.348979", "msg": "", "rc": 0, "start": "2025-02-28 16:06:40.327614", "stderr": "", "stderr_lines": [], "stdout": "+------------------+---------+----------+--------------------------+--------------------------+------------+\n|        ID        | STATUS  |   NAME   |        PEER ADDRS        |       CLIENT ADDRS       | IS LEARNER |\n+------------------+---------+----------+--------------------------+--------------------------+------------+\n| 81cab37376d1dc8e | started | masterpg | http://192.168.2.16:2380 | http://192.168.2.16:2379 |      false |\n| ac75029e92c4132b | started |   etcdpg | http://192.168.2.18:2380 | http://192.168.2.18:2379 |      false |\n| c0cf9bdfef3320b4 | started |  slavepg | http://192.168.2.17:2380 | http://192.168.2.17:2379 |      false |\n+------------------+---------+----------+--------------------------+--------------------------+------------+", "stdout_lines": ["+------------------+---------+----------+--------------------------+--------------------------+------------+", "|        ID        | STATUS  |   NAME   |        PEER ADDRS        |       CLIENT ADDRS       | IS LEARNER |", "+------------------+---------+----------+--------------------------+--------------------------+------------+", "| 81cab37376d1dc8e | started | masterpg | http://192.168.2.16:2380 | http://192.168.2.16:2379 |      false |", "| ac75029e92c4132b | started |   etcdpg | http://192.168.2.18:2380 | http://192.168.2.18:2379 |      false |", "| c0cf9bdfef3320b4 | started |  slavepg | http://192.168.2.17:2380 | http://192.168.2.17:2379 |      false |", "+------------------+---------+----------+--------------------------+--------------------------+------------+"]}
2025-02-28 16:06:40,240 p=30747 u=digitd n=ansible | TASK [Print it] ***************************************************************************************************************************************************************
2025-02-28 16:06:40,254 p=30747 u=digitd n=ansible | ok: [db.etcd.lan] => {
    "msg": [
        "+------------------+---------+----------+--------------------------+--------------------------+------------+",
        "|        ID        | STATUS  |   NAME   |        PEER ADDRS        |       CLIENT ADDRS       | IS LEARNER |",
        "+------------------+---------+----------+--------------------------+--------------------------+------------+",
        "| 81cab37376d1dc8e | started | masterpg | http://192.168.2.16:2380 | http://192.168.2.16:2379 |      false |",
        "| ac75029e92c4132b | started |   etcdpg | http://192.168.2.18:2380 | http://192.168.2.18:2379 |      false |",
        "| c0cf9bdfef3320b4 | started |  slavepg | http://192.168.2.17:2380 | http://192.168.2.17:2379 |      false |",
        "+------------------+---------+----------+--------------------------+--------------------------+------------+"
    ]
}
2025-02-28 16:06:40,264 p=30747 u=digitd n=ansible | PLAY [Copy patroni config (MASTER)] *******************************************************************************************************************************************
2025-02-28 16:06:40,270 p=30747 u=digitd n=ansible | TASK [Create directory] *******************************************************************************************************************************************************
2025-02-28 16:06:40,715 p=30747 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/etc/patroni", "size": 4096, "state": "directory", "uid": 0}
2025-02-28 16:06:40,718 p=30747 u=digitd n=ansible | TASK [Copy the patroni configuration file to the MASTER] **********************************************************************************************************************
2025-02-28 16:06:41,547 p=30747 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "checksum": "d539f05dee13bd527e251e234f60249b97932999", "dest": "/etc/patroni/config.yml", "gid": 110, "group": "postgres", "mode": "0750", "owner": "postgres", "path": "/etc/patroni/config.yml", "size": 3575, "state": "file", "uid": 102}
2025-02-28 16:06:41,555 p=30747 u=digitd n=ansible | PLAY [Copy patroni config (SLAVE)] ********************************************************************************************************************************************
2025-02-28 16:06:41,561 p=30747 u=digitd n=ansible | TASK [Create directory] *******************************************************************************************************************************************************
2025-02-28 16:06:42,018 p=30747 u=digitd n=ansible | ok: [db.slave.lan] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/etc/patroni", "size": 4096, "state": "directory", "uid": 0}
2025-02-28 16:06:42,021 p=30747 u=digitd n=ansible | TASK [Copy the patroni configuration file to the REPLICA] *********************************************************************************************************************
2025-02-28 16:06:42,831 p=30747 u=digitd n=ansible | ok: [db.slave.lan] => {"changed": false, "checksum": "ad9f4bcdc347e99b30b1da7dee192a0e2903636c", "dest": "/etc/patroni/config.yml", "gid": 111, "group": "postgres", "mode": "0750", "owner": "postgres", "path": "/etc/patroni/config.yml", "size": 3370, "state": "file", "uid": 103}
2025-02-28 16:06:42,839 p=30747 u=digitd n=ansible | PLAY [Configure Patroni] ******************************************************************************************************************************************************
2025-02-28 16:06:42,849 p=30747 u=digitd n=ansible | TASK [Install patroni package] ************************************************************************************************************************************************
2025-02-28 16:06:44,618 p=30747 u=digitd n=ansible | ok: [db.slave.lan] => {"cache_update_time": 1740733242, "cache_updated": false, "changed": false}
2025-02-28 16:06:48,234 p=30747 u=digitd n=ansible | ok: [db.master.lan] => {"cache_update_time": 1740743388, "cache_updated": false, "changed": false}
2025-02-28 16:06:48,245 p=30747 u=digitd n=ansible | TASK [Create unnecessary directory for certs] *********************************************************************************************************************************
2025-02-28 16:06:48,695 p=30747 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "gid": 110, "group": "postgres", "mode": "0750", "owner": "postgres", "path": "/var/lib/postgresql/15/ssl", "size": 4096, "state": "directory", "uid": 102}
2025-02-28 16:06:48,732 p=30747 u=digitd n=ansible | ok: [db.slave.lan] => {"changed": false, "gid": 111, "group": "postgres", "mode": "0750", "owner": "postgres", "path": "/var/lib/postgresql/15/ssl", "size": 4096, "state": "directory", "uid": 103}
2025-02-28 16:06:48,734 p=30747 u=digitd n=ansible | TASK [Create data directory for database] *************************************************************************************************************************************
2025-02-28 16:06:49,162 p=30747 u=digitd n=ansible | ok: [db.slave.lan] => {"changed": false, "gid": 111, "group": "postgres", "mode": "0750", "owner": "postgres", "path": "/var/lib/postgresql/15/data", "size": 4096, "state": "directory", "uid": 103}
2025-02-28 16:06:49,164 p=30747 u=digitd n=ansible | changed: [db.master.lan] => {"changed": true, "gid": 110, "group": "postgres", "mode": "0750", "owner": "postgres", "path": "/var/lib/postgresql/15/data", "size": 4096, "state": "directory", "uid": 102}
2025-02-28 16:06:49,166 p=30747 u=digitd n=ansible | TASK [Copy certificates on the machines] **************************************************************************************************************************************
2025-02-28 16:06:52,026 p=30747 u=digitd n=ansible | ok: [db.slave.lan] => {"changed": false, "dest": "/var/lib/postgresql/15/ssl/", "src": "/home/digitd/travelata_test/ansible/../certs/"}
2025-02-28 16:06:53,584 p=30747 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "dest": "/var/lib/postgresql/15/ssl/", "src": "/home/digitd/travelata_test/ansible/../certs/"}
2025-02-28 16:06:53,588 p=30747 u=digitd n=ansible | TASK [Start services] *********************************************************************************************************************************************************
2025-02-28 16:07:11,612 p=30747 u=digitd n=ansible | changed: [db.master.lan] => {"changed": true, "enabled": true, "name": "patroni", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 15:24:06 MSK", "ActiveEnterTimestampMonotonic": "408593148498", "ActiveExitTimestamp": "Fri 2025-02-28 15:23:56 MSK", "ActiveExitTimestampMonotonic": "408582792810", "ActiveState": "active", "After": "system.slice network.target systemd-journald.socket basic.target sysinit.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 15:24:06 MSK", "AssertTimestampMonotonic": "408593141708", "Before": "multi-user.target shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "18873128000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 15:24:06 MSK", "ConditionTimestampMonotonic": "408593141693", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/patroni.service", "ControlGroupId": "14352", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "Runners to orchestrate a high-availability PostgreSQL", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "EnvironmentFiles": "/etc/patroni_env.conf (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainHandoffTimestamp": "Fri 2025-02-28 15:24:06 MSK", "ExecMainHandoffTimestampMonotonic": "408593172817", "ExecMainPID": "470405", "ExecMainStartTimestamp": "Fri 2025-02-28 15:24:06 MSK", "ExecMainStartTimestampMonotonic": "408593142786", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/patroni ; argv[]=/usr/bin/patroni /etc/patroni/config.yml ; ignore_errors=no ; start_time=[Fri 2025-02-28 15:24:06 MSK] ; stop_time=[n/a] ; pid=470405 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/patroni ; argv[]=/usr/bin/patroni /etc/patroni/config.yml ; flags= ; start_time=[Fri 2025-02-28 15:24:06 MSK] ; stop_time=[n/a] ; pid=470405 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/patroni.service", "FreezerState": "running", "GID": "110", "Group": "postgres", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "patroni.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 15:23:57 MSK", "InactiveEnterTimestampMonotonic": "408583304580", "InactiveExitTimestamp": "Fri 2025-02-28 15:24:06 MSK", "InactiveExitTimestampMonotonic": "408593148498", "InvocationID": "4fb48cfd426a436e94fbec8339ebc4cc", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "process", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "470405", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "591728640", "MemoryCurrent": "212910080", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "228630528", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "3612672", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "0", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "patroni.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-failure", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Fri 2025-02-28 15:24:06 MSK", "StateChangeTimestampMonotonic": "408593148498", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "14", "TasksMax": "1098", "TimeoutAbortUSec": "30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "102", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "postgres", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:07:14,170 p=30747 u=digitd n=ansible | changed: [db.slave.lan] => {"changed": true, "enabled": true, "name": "patroni", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 15:49:52 MSK", "ActiveEnterTimestampMonotonic": "410079724489", "ActiveExitTimestamp": "Fri 2025-02-28 15:49:51 MSK", "ActiveExitTimestampMonotonic": "410078881165", "ActiveState": "active", "After": "systemd-journald.socket sysinit.target basic.target network.target system.slice", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 15:49:52 MSK", "AssertTimestampMonotonic": "410079721029", "Before": "multi-user.target shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "8098127000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 15:49:52 MSK", "ConditionTimestampMonotonic": "410079721014", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/patroni.service", "ControlGroupId": "143212", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "Runners to orchestrate a high-availability PostgreSQL", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "EnvironmentFiles": "/etc/patroni_env.conf (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainHandoffTimestamp": "Fri 2025-02-28 15:49:52 MSK", "ExecMainHandoffTimestampMonotonic": "410079748627", "ExecMainPID": "435894", "ExecMainStartTimestamp": "Fri 2025-02-28 15:49:52 MSK", "ExecMainStartTimestampMonotonic": "410079721985", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/patroni ; argv[]=/usr/bin/patroni /etc/patroni/config.yml ; ignore_errors=no ; start_time=[Fri 2025-02-28 15:49:52 MSK] ; stop_time=[n/a] ; pid=435894 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/patroni ; argv[]=/usr/bin/patroni /etc/patroni/config.yml ; flags= ; start_time=[Fri 2025-02-28 15:49:52 MSK] ; stop_time=[n/a] ; pid=435894 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/patroni.service", "FreezerState": "running", "GID": "111", "Group": "postgres", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "patroni.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 15:49:52 MSK", "InactiveEnterTimestampMonotonic": "410079710090", "InactiveExitTimestamp": "Fri 2025-02-28 15:49:52 MSK", "InactiveExitTimestampMonotonic": "410079724489", "InvocationID": "1a6ef0ecfecd4abf9b778b85e58cfb82", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "process", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "435894", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "594735104", "MemoryCurrent": "105795584", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "109711360", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "0", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "0", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "patroni.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "on-failure", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Fri 2025-02-28 15:49:52 MSK", "StateChangeTimestampMonotonic": "410079724489", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "17", "TasksMax": "1098", "TimeoutAbortUSec": "30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "103", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "postgres", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:07:14,172 p=30747 u=digitd n=ansible | TASK [Get patronictl status] **************************************************************************************************************************************************
2025-02-28 16:07:16,127 p=30747 u=digitd n=ansible | ok: [db.slave.lan] => {"changed": false, "cmd": ["patronictl", "-c", "/etc/patroni/config.yml", "list"], "delta": "0:00:01.390815", "end": "2025-02-28 16:07:16.219012", "msg": "", "rc": 0, "start": "2025-02-28 16:07:14.828197", "stderr": "", "stderr_lines": [], "stdout": "+ Cluster: clusterdb (7476444775388949912) --------+----+-----------+\n| Member   | Host              | Role    | State   | TL | Lag in MB |\n+----------+-------------------+---------+---------+----+-----------+\n| masterdb | 192.168.2.16:5050 | Replica | stopped |    |   unknown |\n| slavedb  | 192.168.2.17:5050 | Replica | stopped |    |   unknown |\n+----------+-------------------+---------+---------+----+-----------+", "stdout_lines": ["+ Cluster: clusterdb (7476444775388949912) --------+----+-----------+", "| Member   | Host              | Role    | State   | TL | Lag in MB |", "+----------+-------------------+---------+---------+----+-----------+", "| masterdb | 192.168.2.16:5050 | Replica | stopped |    |   unknown |", "| slavedb  | 192.168.2.17:5050 | Replica | stopped |    |   unknown |", "+----------+-------------------+---------+---------+----+-----------+"]}
2025-02-28 16:07:16,263 p=30747 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "cmd": ["patronictl", "-c", "/etc/patroni/config.yml", "list"], "delta": "0:00:01.590059", "end": "2025-02-28 16:07:16.349580", "msg": "", "rc": 0, "start": "2025-02-28 16:07:14.759521", "stderr": "", "stderr_lines": [], "stdout": "+ Cluster: clusterdb (7476444775388949912) --------+----+-----------+\n| Member   | Host              | Role    | State   | TL | Lag in MB |\n+----------+-------------------+---------+---------+----+-----------+\n| masterdb | 192.168.2.16:5050 | Replica | stopped |    |   unknown |\n| slavedb  | 192.168.2.17:5050 | Replica | stopped |    |   unknown |\n+----------+-------------------+---------+---------+----+-----------+", "stdout_lines": ["+ Cluster: clusterdb (7476444775388949912) --------+----+-----------+", "| Member   | Host              | Role    | State   | TL | Lag in MB |", "+----------+-------------------+---------+---------+----+-----------+", "| masterdb | 192.168.2.16:5050 | Replica | stopped |    |   unknown |", "| slavedb  | 192.168.2.17:5050 | Replica | stopped |    |   unknown |", "+----------+-------------------+---------+---------+----+-----------+"]}
2025-02-28 16:07:16,278 p=30747 u=digitd n=ansible | TASK [Get time for Pantroni initializing] *************************************************************************************************************************************
2025-02-28 16:07:16,291 p=30747 u=digitd n=ansible | Pausing for 120 seconds
2025-02-28 16:07:16,292 p=30747 u=digitd n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2025-02-28 16:07:31,725 p=30747 u=digitd n=ansible | Press 'C' to continue the play or 'A' to abort 
2025-02-28 16:07:32,232 p=30747 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "delta": 15, "echo": true, "rc": 0, "start": "2025-02-28 16:07:16.289966", "stderr": "", "stdout": "Paused for 0.27 minutes", "stop": "2025-02-28 16:07:32.230532", "user_input": ""}
2025-02-28 16:07:32,235 p=30747 u=digitd n=ansible | TASK [Print it] ***************************************************************************************************************************************************************
2025-02-28 16:07:32,248 p=30747 u=digitd n=ansible | ok: [db.master.lan] => {
    "msg": [
        "+ Cluster: clusterdb (7476444775388949912) --------+----+-----------+",
        "| Member   | Host              | Role    | State   | TL | Lag in MB |",
        "+----------+-------------------+---------+---------+----+-----------+",
        "| masterdb | 192.168.2.16:5050 | Replica | stopped |    |   unknown |",
        "| slavedb  | 192.168.2.17:5050 | Replica | stopped |    |   unknown |",
        "+----------+-------------------+---------+---------+----+-----------+"
    ]
}
2025-02-28 16:07:32,253 p=30747 u=digitd n=ansible | ok: [db.slave.lan] => {
    "msg": [
        "+ Cluster: clusterdb (7476444775388949912) --------+----+-----------+",
        "| Member   | Host              | Role    | State   | TL | Lag in MB |",
        "+----------+-------------------+---------+---------+----+-----------+",
        "| masterdb | 192.168.2.16:5050 | Replica | stopped |    |   unknown |",
        "| slavedb  | 192.168.2.17:5050 | Replica | stopped |    |   unknown |",
        "+----------+-------------------+---------+---------+----+-----------+"
    ]
}
2025-02-28 16:07:32,271 p=30747 u=digitd n=ansible | PLAY [Stop Patroni] ***********************************************************************************************************************************************************
2025-02-28 16:07:32,279 p=30747 u=digitd n=ansible | TASK [Stop service] ***********************************************************************************************************************************************************
2025-02-28 16:07:33,520 p=30747 u=digitd n=ansible | fatal: [db.slave.lan]: FAILED! => {"changed": false, "msg": "Could not find the requested service patrioni: host"}
2025-02-28 16:07:34,400 p=30747 u=digitd n=ansible | fatal: [db.master.lan]: FAILED! => {"changed": false, "msg": "Could not find the requested service patrioni: host"}
2025-02-28 16:07:34,400 p=30747 u=digitd n=ansible | PLAY RECAP ********************************************************************************************************************************************************************
2025-02-28 16:07:34,401 p=30747 u=digitd n=ansible | db.etcd.lan                : ok=8    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-28 16:07:34,401 p=30747 u=digitd n=ansible | db.master.lan              : ok=17   changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-02-28 16:07:34,401 p=30747 u=digitd n=ansible | db.slave.lan               : ok=15   changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-02-28 16:08:08,274 p=32126 u=digitd n=ansible | ansible-playbook [core 2.14.18]
  config file = /home/digitd/travelata_test/ansible/ansible.cfg
  configured module search path = ['/home/digitd/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python3/dist-packages/ansible
  ansible collection location = /home/digitd/.ansible/collections:/usr/share/ansible/collections
  executable location = /usr/bin/ansible-playbook
  python version = 3.11.2 (main, Sep 14 2024, 03:00:30) [GCC 12.2.0] (/usr/bin/python3)
  jinja version = 3.1.2
  libyaml = True
2025-02-28 16:08:08,274 p=32126 u=digitd n=ansible | Using /home/digitd/travelata_test/ansible/ansible.cfg as config file
2025-02-28 16:08:08,418 p=32126 u=digitd n=ansible | Skipping callback 'default', as we already have a stdout callback.
2025-02-28 16:08:08,418 p=32126 u=digitd n=ansible | Skipping callback 'minimal', as we already have a stdout callback.
2025-02-28 16:08:08,418 p=32126 u=digitd n=ansible | Skipping callback 'oneline', as we already have a stdout callback.
2025-02-28 16:08:08,418 p=32126 u=digitd n=ansible | PLAYBOOK: start_services.yml **************************************************************************************************************************************************
2025-02-28 16:08:08,418 p=32126 u=digitd n=ansible | 15 plays in ./start_services.yml
2025-02-28 16:08:08,419 p=32126 u=digitd n=ansible | PLAY [Install PostgreSQL and check status] ************************************************************************************************************************************
2025-02-28 16:08:08,430 p=32126 u=digitd n=ansible | TASK [Install PostgreSQL] *****************************************************************************************************************************************************
2025-02-28 16:08:10,391 p=32126 u=digitd n=ansible | ok: [db.slave.lan] => {"ansible_facts": {"discovered_interpreter_python": "/usr/bin/python3.11"}, "cache_update_time": 1740733242, "cache_updated": false, "changed": false}
2025-02-28 16:08:10,845 p=32126 u=digitd n=ansible | ok: [db.master.lan] => {"ansible_facts": {"discovered_interpreter_python": "/usr/bin/python3.11"}, "cache_update_time": 1740743388, "cache_updated": false, "changed": false}
2025-02-28 16:08:10,848 p=32126 u=digitd n=ansible | TASK [Check service] **********************************************************************************************************************************************************
2025-02-28 16:08:12,461 p=32126 u=digitd n=ansible | ok: [db.slave.lan] => {"changed": false, "enabled": false, "name": "postgresql", "state": "stopped", "status": {"ActiveEnterTimestampMonotonic": "0", "ActiveExitTimestampMonotonic": "0", "ActiveState": "inactive", "After": "systemd-journald.socket system.slice basic.target sysinit.target postgresql@15-main.service", "AllowIsolate": "no", "AssertResult": "no", "AssertTimestampMonotonic": "0", "Before": "shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "[not set]", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "no", "ConditionTimestampMonotonic": "0", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ConsistsOf": "postgresql@15-main.service", "ControlGroupId": "0", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "PostgreSQL RDBMS", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainHandoffTimestampMonotonic": "0", "ExecMainPID": "0", "ExecMainStartTimestampMonotonic": "0", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/postgresql.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "postgresql.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestampMonotonic": "0", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "616390656", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "[not set]", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "[not set]", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "[not set]", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "postgresql.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "PropagatesReloadTo": "postgresql@15-main.service", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "yes", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "no", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "no", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestampMonotonic": "0", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "oneshot", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "disabled", "UtmpMode": "init", "Wants": "postgresql@15-main.service", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "infinity"}}
2025-02-28 16:08:12,876 p=32126 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "enabled": false, "name": "postgresql", "state": "stopped", "status": {"ActiveEnterTimestampMonotonic": "0", "ActiveExitTimestampMonotonic": "0", "ActiveState": "inactive", "After": "basic.target postgresql@15-main.service sysinit.target systemd-journald.socket system.slice", "AllowIsolate": "no", "AssertResult": "no", "AssertTimestampMonotonic": "0", "Before": "shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "[not set]", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "no", "ConditionTimestampMonotonic": "0", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ConsistsOf": "postgresql@15-main.service", "ControlGroupId": "0", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "PostgreSQL RDBMS", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainHandoffTimestampMonotonic": "0", "ExecMainPID": "0", "ExecMainStartTimestampMonotonic": "0", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/postgresql.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "postgresql.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestampMonotonic": "0", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "585879552", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "[not set]", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "[not set]", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "[not set]", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "postgresql.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "PropagatesReloadTo": "postgresql@15-main.service", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "yes", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "no", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "no", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestampMonotonic": "0", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "oneshot", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "disabled", "UtmpMode": "init", "Wants": "postgresql@15-main.service", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "infinity"}}
2025-02-28 16:08:12,887 p=32126 u=digitd n=ansible | PLAY [Configure etcd on the MASTER database machine] **************************************************************************************************************************
2025-02-28 16:08:12,894 p=32126 u=digitd n=ansible | TASK [Copy etcd file] *********************************************************************************************************************************************************
2025-02-28 16:08:13,860 p=32126 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "checksum": "e2fedb4e1237da20f4c73b66ef8b9893cbaebc0f", "dest": "/etc/default/etcd", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/default/etcd", "size": 1666, "state": "file", "uid": 0}
2025-02-28 16:08:13,863 p=32126 u=digitd n=ansible | TASK [Create data directory] **************************************************************************************************************************************************
2025-02-28 16:08:14,313 p=32126 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "gid": 111, "group": "etcd", "mode": "0770", "owner": "etcd", "path": "/var/lib/etcd", "size": 4096, "state": "directory", "uid": 103}
2025-02-28 16:08:14,315 p=32126 u=digitd n=ansible | TASK [Install etcd] ***********************************************************************************************************************************************************
2025-02-28 16:08:17,379 p=32126 u=digitd n=ansible | ok: [db.master.lan] => {"cache_update_time": 1740743388, "cache_updated": false, "changed": false}
2025-02-28 16:08:17,381 p=32126 u=digitd n=ansible | TASK [Clear old values of the cluster in base] ********************************************************************************************************************************
2025-02-28 16:08:19,212 p=32126 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "cmd": ["etcdctl", "del", "", "--prefix"], "delta": "0:00:01.304358", "end": "2025-02-28 16:08:19.312016", "msg": "", "rc": 0, "start": "2025-02-28 16:08:18.007658", "stderr": "", "stderr_lines": [], "stdout": "7", "stdout_lines": ["7"]}
2025-02-28 16:08:19,214 p=32126 u=digitd n=ansible | TASK [Restart etcd service] ***************************************************************************************************************************************************
2025-02-28 16:08:42,836 p=32126 u=digitd n=ansible | changed: [db.master.lan] => {"changed": true, "enabled": true, "name": "etcd", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:06:25 MSK", "ActiveEnterTimestampMonotonic": "411132075927", "ActiveExitTimestamp": "Fri 2025-02-28 16:06:02 MSK", "ActiveExitTimestampMonotonic": "411108964983", "ActiveState": "active", "After": "network.target system.slice basic.target sysinit.target systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:06:09 MSK", "AssertTimestampMonotonic": "411116214778", "Before": "multi-user.target etcd-discovery.service shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1831265000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:06:09 MSK", "ConditionTimestampMonotonic": "411116214772", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/etcd.service", "ControlGroupId": "14496", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "etcd - highly-available key value store", "DevicePolicy": "auto", "Documentation": "https://etcd.io/docs man:etcd", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "Environment": "DAEMON_ARGS= ETCD_NAME=dbmaster ETCD_DATA_DIR=/var/lib/etcd/default", "EnvironmentFiles": "/etc/default/etcd (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainHandoffTimestamp": "Fri 2025-02-28 16:06:11 MSK", "ExecMainHandoffTimestampMonotonic": "411117713395", "ExecMainPID": "474022", "ExecMainStartTimestamp": "Fri 2025-02-28 16:06:09 MSK", "ExecMainStartTimestampMonotonic": "411116216990", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:06:09 MSK] ; stop_time=[n/a] ; pid=474022 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; flags= ; start_time=[Fri 2025-02-28 16:06:09 MSK] ; stop_time=[n/a] ; pid=474022 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/etcd.service", "FreezerState": "running", "GID": "111", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "etcd.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:06:09 MSK", "InactiveEnterTimestampMonotonic": "411116206425", "InactiveExitTimestamp": "Fri 2025-02-28 16:06:09 MSK", "InactiveExitTimestampMonotonic": "411116218482", "InvocationID": "92550e615fd64e87843f5d3be4cf313c", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "65536", "LimitNOFILESoft": "65536", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "474022", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "606367744", "MemoryCurrent": "77979648", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "78901248", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "647168", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "0", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "etcd.service etcd2.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-abnormal", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Fri 2025-02-28 16:06:25 MSK", "StateChangeTimestampMonotonic": "411132075927", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "9", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "103", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "etcd", "UtmpMode": "init", "WantedBy": "etcd-discovery.service multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:08:42,843 p=32126 u=digitd n=ansible | PLAY [Configure etcd on the SLAVE database machine] ***************************************************************************************************************************
2025-02-28 16:08:42,848 p=32126 u=digitd n=ansible | TASK [Copy etcd file] *********************************************************************************************************************************************************
2025-02-28 16:08:43,738 p=32126 u=digitd n=ansible | ok: [db.slave.lan] => {"changed": false, "checksum": "4fb16fe2a7b6f713b4a92c9446a9dc1c39660a21", "dest": "/etc/default/etcd", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/default/etcd", "size": 1584, "state": "file", "uid": 0}
2025-02-28 16:08:43,740 p=32126 u=digitd n=ansible | TASK [Install etcd] ***********************************************************************************************************************************************************
2025-02-28 16:08:45,518 p=32126 u=digitd n=ansible | ok: [db.slave.lan] => {"cache_update_time": 1740733242, "cache_updated": false, "changed": false}
2025-02-28 16:08:45,521 p=32126 u=digitd n=ansible | TASK [Clear old values of the cluster in base] ********************************************************************************************************************************
2025-02-28 16:08:46,069 p=32126 u=digitd n=ansible | ok: [db.slave.lan] => {"changed": false, "cmd": ["etcdctl", "del", "", "--prefix"], "delta": "0:00:00.093302", "end": "2025-02-28 16:08:46.159787", "msg": "", "rc": 0, "start": "2025-02-28 16:08:46.066485", "stderr": "", "stderr_lines": [], "stdout": "5", "stdout_lines": ["5"]}
2025-02-28 16:08:46,072 p=32126 u=digitd n=ansible | TASK [Restart etcd service] ***************************************************************************************************************************************************
2025-02-28 16:08:53,273 p=32126 u=digitd n=ansible | changed: [db.slave.lan] => {"changed": true, "enabled": true, "name": "etcd", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:06:32 MSK", "ActiveEnterTimestampMonotonic": "411080217153", "ActiveExitTimestamp": "Fri 2025-02-28 16:06:30 MSK", "ActiveExitTimestampMonotonic": "411077680282", "ActiveState": "active", "After": "basic.target network.target system.slice systemd-journald.socket sysinit.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:06:31 MSK", "AssertTimestampMonotonic": "411079249656", "Before": "etcd-discovery.service multi-user.target shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1849802000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:06:31 MSK", "ConditionTimestampMonotonic": "411079249651", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/etcd.service", "ControlGroupId": "152460", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "etcd - highly-available key value store", "DevicePolicy": "auto", "Documentation": "https://etcd.io/docs man:etcd", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "Environment": "DAEMON_ARGS= ETCD_NAME=slavedb ETCD_DATA_DIR=/var/lib/etcd/default", "EnvironmentFiles": "/etc/default/etcd (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainHandoffTimestamp": "Fri 2025-02-28 16:06:31 MSK", "ExecMainHandoffTimestampMonotonic": "411079277144", "ExecMainPID": "439182", "ExecMainStartTimestamp": "Fri 2025-02-28 16:06:31 MSK", "ExecMainStartTimestampMonotonic": "411079251579", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:06:31 MSK] ; stop_time=[n/a] ; pid=439182 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; flags= ; start_time=[Fri 2025-02-28 16:06:31 MSK] ; stop_time=[n/a] ; pid=439182 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/etcd.service", "FreezerState": "running", "GID": "112", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "etcd.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:06:31 MSK", "InactiveEnterTimestampMonotonic": "411079243143", "InactiveExitTimestamp": "Fri 2025-02-28 16:06:31 MSK", "InactiveExitTimestampMonotonic": "411079256786", "InvocationID": "3b03c7110c4543bc93e52994f7f256d1", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "65536", "LimitNOFILESoft": "65536", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "439182", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "600543232", "MemoryCurrent": "54194176", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "54468608", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "0", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "0", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "etcd.service etcd2.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "on-abnormal", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Fri 2025-02-28 16:06:32 MSK", "StateChangeTimestampMonotonic": "411080217153", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "8", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "104", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "etcd", "UtmpMode": "init", "WantedBy": "etcd-discovery.service multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:08:53,280 p=32126 u=digitd n=ansible | PLAY [Configure etcd on the another ETCD machine] *****************************************************************************************************************************
2025-02-28 16:08:53,287 p=32126 u=digitd n=ansible | TASK [Copy etcd file] *********************************************************************************************************************************************************
2025-02-28 16:08:54,536 p=32126 u=digitd n=ansible | ok: [db.etcd.lan] => {"ansible_facts": {"discovered_interpreter_python": "/usr/bin/python3"}, "changed": false, "checksum": "60484e138bba76cd1caa22bfb1cb13542ef696b1", "dest": "/etc/default/etcd", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/default/etcd", "size": 1570, "state": "file", "uid": 0}
2025-02-28 16:08:54,538 p=32126 u=digitd n=ansible | TASK [Install etcd] ***********************************************************************************************************************************************************
2025-02-28 16:08:56,440 p=32126 u=digitd n=ansible | ok: [db.etcd.lan] => {"cache_update_time": 1740743468, "cache_updated": false, "changed": false}
2025-02-28 16:08:56,442 p=32126 u=digitd n=ansible | TASK [Clear old values of the cluster in base] ********************************************************************************************************************************
2025-02-28 16:08:57,314 p=32126 u=digitd n=ansible | ok: [db.etcd.lan] => {"changed": false, "cmd": ["etcdctl", "del", "", "--prefix"], "delta": "0:00:00.453762", "end": "2025-02-28 16:08:57.407170", "msg": "", "rc": 0, "start": "2025-02-28 16:08:56.953408", "stderr": "", "stderr_lines": [], "stdout": "5", "stdout_lines": ["5"]}
2025-02-28 16:08:57,316 p=32126 u=digitd n=ansible | TASK [Restart etcd service] ***************************************************************************************************************************************************
2025-02-28 16:09:05,963 p=32126 u=digitd n=ansible | changed: [db.etcd.lan] => {"changed": true, "enabled": true, "name": "etcd", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:06:39 MSK", "ActiveEnterTimestampMonotonic": "238599608398", "ActiveExitTimestamp": "Fri 2025-02-28 16:06:37 MSK", "ActiveExitTimestampMonotonic": "238597881801", "ActiveState": "active", "After": "systemd-journald.socket system.slice basic.target network.target sysinit.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:06:38 MSK", "AssertTimestampMonotonic": "238598560533", "Before": "multi-user.target etcd-discovery.service shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "2040713000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:06:38 MSK", "ConditionTimestampMonotonic": "238598560529", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/etcd.service", "ControlGroupId": "57133", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "etcd - highly-available key value store", "DevicePolicy": "auto", "Documentation": "https://etcd.io/docs man:etcd", "DynamicUser": "no", "EffectiveCPUs": "0", "EffectiveMemoryNodes": "0", "Environment": "DAEMON_ARGS= ETCD_NAME=etcd ETCD_DATA_DIR=/var/lib/etcd/default", "EnvironmentFiles": "/etc/default/etcd (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "18128", "ExecMainStartTimestamp": "Fri 2025-02-28 16:06:38 MSK", "ExecMainStartTimestampMonotonic": "238598568419", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:06:38 MSK] ; stop_time=[n/a] ; pid=18128 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; flags= ; start_time=[Fri 2025-02-28 16:06:38 MSK] ; stop_time=[n/a] ; pid=18128 ; code=(null) ; status=0/0 }", "ExitType": "main", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/etcd.service", "FreezerState": "running", "GID": "111", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "etcd.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:06:38 MSK", "InactiveEnterTimestampMonotonic": "238598559020", "InactiveExitTimestamp": "Fri 2025-02-28 16:06:38 MSK", "InactiveExitTimestampMonotonic": "238598569524", "InvocationID": "a1da5a5e861e4e00b347daf65c8b613f", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "65536", "LimitNOFILESoft": "65536", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "18128", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "38907904", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "etcd.service etcd2.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-abnormal", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Fri 2025-02-28 16:06:39 MSK", "StateChangeTimestampMonotonic": "238599608398", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "8", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "103", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "etcd", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:09:05,965 p=32126 u=digitd n=ansible | TASK [Get status of etcd] *****************************************************************************************************************************************************
2025-02-28 16:09:06,441 p=32126 u=digitd n=ansible | ok: [db.etcd.lan] => {"changed": false, "cmd": ["etcdctl", "--cluster=true", "endpoint", "status", "--write-out=table"], "delta": "0:00:00.029648", "end": "2025-02-28 16:09:06.553515", "msg": "", "rc": 0, "start": "2025-02-28 16:09:06.523867", "stderr": "", "stderr_lines": [], "stdout": "+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+\n|         ENDPOINT         |        ID        | VERSION | DB SIZE | IS LEADER | IS LEARNER | RAFT TERM | RAFT INDEX | RAFT APPLIED INDEX | ERRORS |\n+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+\n| http://192.168.2.16:2379 | 81cab37376d1dc8e |  3.5.16 |  135 kB |      true |      false |      1546 |      33550 |              33550 |        |\n| http://192.168.2.18:2379 | ac75029e92c4132b |  3.4.23 |  135 kB |     false |      false |      1546 |      33550 |              33550 |        |\n| http://192.168.2.17:2379 | c0cf9bdfef3320b4 |  3.5.16 |  135 kB |     false |      false |      1546 |      33550 |              33550 |        |\n+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+", "stdout_lines": ["+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+", "|         ENDPOINT         |        ID        | VERSION | DB SIZE | IS LEADER | IS LEARNER | RAFT TERM | RAFT INDEX | RAFT APPLIED INDEX | ERRORS |", "+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+", "| http://192.168.2.16:2379 | 81cab37376d1dc8e |  3.5.16 |  135 kB |      true |      false |      1546 |      33550 |              33550 |        |", "| http://192.168.2.18:2379 | ac75029e92c4132b |  3.4.23 |  135 kB |     false |      false |      1546 |      33550 |              33550 |        |", "| http://192.168.2.17:2379 | c0cf9bdfef3320b4 |  3.5.16 |  135 kB |     false |      false |      1546 |      33550 |              33550 |        |", "+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+"]}
2025-02-28 16:09:06,444 p=32126 u=digitd n=ansible | TASK [Print it] ***************************************************************************************************************************************************************
2025-02-28 16:09:06,457 p=32126 u=digitd n=ansible | ok: [db.etcd.lan] => {
    "msg": [
        "+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+",
        "|         ENDPOINT         |        ID        | VERSION | DB SIZE | IS LEADER | IS LEARNER | RAFT TERM | RAFT INDEX | RAFT APPLIED INDEX | ERRORS |",
        "+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+",
        "| http://192.168.2.16:2379 | 81cab37376d1dc8e |  3.5.16 |  135 kB |      true |      false |      1546 |      33550 |              33550 |        |",
        "| http://192.168.2.18:2379 | ac75029e92c4132b |  3.4.23 |  135 kB |     false |      false |      1546 |      33550 |              33550 |        |",
        "| http://192.168.2.17:2379 | c0cf9bdfef3320b4 |  3.5.16 |  135 kB |     false |      false |      1546 |      33550 |              33550 |        |",
        "+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+"
    ]
}
2025-02-28 16:09:06,459 p=32126 u=digitd n=ansible | TASK [Get etcd members] *******************************************************************************************************************************************************
2025-02-28 16:09:06,918 p=32126 u=digitd n=ansible | ok: [db.etcd.lan] => {"changed": false, "cmd": ["etcdctl", "member", "list", "--write-out=table"], "delta": "0:00:00.021315", "end": "2025-02-28 16:09:07.028748", "msg": "", "rc": 0, "start": "2025-02-28 16:09:07.007433", "stderr": "", "stderr_lines": [], "stdout": "+------------------+---------+----------+--------------------------+--------------------------+------------+\n|        ID        | STATUS  |   NAME   |        PEER ADDRS        |       CLIENT ADDRS       | IS LEARNER |\n+------------------+---------+----------+--------------------------+--------------------------+------------+\n| 81cab37376d1dc8e | started | masterpg | http://192.168.2.16:2380 | http://192.168.2.16:2379 |      false |\n| ac75029e92c4132b | started |   etcdpg | http://192.168.2.18:2380 | http://192.168.2.18:2379 |      false |\n| c0cf9bdfef3320b4 | started |  slavepg | http://192.168.2.17:2380 | http://192.168.2.17:2379 |      false |\n+------------------+---------+----------+--------------------------+--------------------------+------------+", "stdout_lines": ["+------------------+---------+----------+--------------------------+--------------------------+------------+", "|        ID        | STATUS  |   NAME   |        PEER ADDRS        |       CLIENT ADDRS       | IS LEARNER |", "+------------------+---------+----------+--------------------------+--------------------------+------------+", "| 81cab37376d1dc8e | started | masterpg | http://192.168.2.16:2380 | http://192.168.2.16:2379 |      false |", "| ac75029e92c4132b | started |   etcdpg | http://192.168.2.18:2380 | http://192.168.2.18:2379 |      false |", "| c0cf9bdfef3320b4 | started |  slavepg | http://192.168.2.17:2380 | http://192.168.2.17:2379 |      false |", "+------------------+---------+----------+--------------------------+--------------------------+------------+"]}
2025-02-28 16:09:06,921 p=32126 u=digitd n=ansible | TASK [Print it] ***************************************************************************************************************************************************************
2025-02-28 16:09:06,934 p=32126 u=digitd n=ansible | ok: [db.etcd.lan] => {
    "msg": [
        "+------------------+---------+----------+--------------------------+--------------------------+------------+",
        "|        ID        | STATUS  |   NAME   |        PEER ADDRS        |       CLIENT ADDRS       | IS LEARNER |",
        "+------------------+---------+----------+--------------------------+--------------------------+------------+",
        "| 81cab37376d1dc8e | started | masterpg | http://192.168.2.16:2380 | http://192.168.2.16:2379 |      false |",
        "| ac75029e92c4132b | started |   etcdpg | http://192.168.2.18:2380 | http://192.168.2.18:2379 |      false |",
        "| c0cf9bdfef3320b4 | started |  slavepg | http://192.168.2.17:2380 | http://192.168.2.17:2379 |      false |",
        "+------------------+---------+----------+--------------------------+--------------------------+------------+"
    ]
}
2025-02-28 16:09:06,941 p=32126 u=digitd n=ansible | PLAY [Copy patroni config (MASTER)] *******************************************************************************************************************************************
2025-02-28 16:09:06,949 p=32126 u=digitd n=ansible | TASK [Create directory] *******************************************************************************************************************************************************
2025-02-28 16:09:07,395 p=32126 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/etc/patroni", "size": 4096, "state": "directory", "uid": 0}
2025-02-28 16:09:07,398 p=32126 u=digitd n=ansible | TASK [Copy the patroni configuration file to the MASTER] **********************************************************************************************************************
2025-02-28 16:09:08,143 p=32126 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "checksum": "d539f05dee13bd527e251e234f60249b97932999", "dest": "/etc/patroni/config.yml", "gid": 110, "group": "postgres", "mode": "0750", "owner": "postgres", "path": "/etc/patroni/config.yml", "size": 3575, "state": "file", "uid": 102}
2025-02-28 16:09:08,150 p=32126 u=digitd n=ansible | PLAY [Copy patroni config (SLAVE)] ********************************************************************************************************************************************
2025-02-28 16:09:08,156 p=32126 u=digitd n=ansible | TASK [Create directory] *******************************************************************************************************************************************************
2025-02-28 16:09:08,628 p=32126 u=digitd n=ansible | ok: [db.slave.lan] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/etc/patroni", "size": 4096, "state": "directory", "uid": 0}
2025-02-28 16:09:08,630 p=32126 u=digitd n=ansible | TASK [Copy the patroni configuration file to the REPLICA] *********************************************************************************************************************
2025-02-28 16:09:09,446 p=32126 u=digitd n=ansible | ok: [db.slave.lan] => {"changed": false, "checksum": "ad9f4bcdc347e99b30b1da7dee192a0e2903636c", "dest": "/etc/patroni/config.yml", "gid": 111, "group": "postgres", "mode": "0750", "owner": "postgres", "path": "/etc/patroni/config.yml", "size": 3370, "state": "file", "uid": 103}
2025-02-28 16:09:09,452 p=32126 u=digitd n=ansible | PLAY [Configure Patroni] ******************************************************************************************************************************************************
2025-02-28 16:09:09,460 p=32126 u=digitd n=ansible | TASK [Install patroni package] ************************************************************************************************************************************************
2025-02-28 16:09:11,261 p=32126 u=digitd n=ansible | ok: [db.slave.lan] => {"cache_update_time": 1740733242, "cache_updated": false, "changed": false}
2025-02-28 16:09:11,462 p=32126 u=digitd n=ansible | ok: [db.master.lan] => {"cache_update_time": 1740743388, "cache_updated": false, "changed": false}
2025-02-28 16:09:11,464 p=32126 u=digitd n=ansible | TASK [Create unnecessary directory for certs] *********************************************************************************************************************************
2025-02-28 16:09:11,852 p=32126 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "gid": 110, "group": "postgres", "mode": "0750", "owner": "postgres", "path": "/var/lib/postgresql/15/ssl", "size": 4096, "state": "directory", "uid": 102}
2025-02-28 16:09:11,900 p=32126 u=digitd n=ansible | ok: [db.slave.lan] => {"changed": false, "gid": 111, "group": "postgres", "mode": "0750", "owner": "postgres", "path": "/var/lib/postgresql/15/ssl", "size": 4096, "state": "directory", "uid": 103}
2025-02-28 16:09:11,902 p=32126 u=digitd n=ansible | TASK [Create data directory for database] *************************************************************************************************************************************
2025-02-28 16:09:12,324 p=32126 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "gid": 110, "group": "postgres", "mode": "0750", "owner": "postgres", "path": "/var/lib/postgresql/15/data", "size": 4096, "state": "directory", "uid": 102}
2025-02-28 16:09:13,042 p=32126 u=digitd n=ansible | ok: [db.slave.lan] => {"changed": false, "gid": 111, "group": "postgres", "mode": "0750", "owner": "postgres", "path": "/var/lib/postgresql/15/data", "size": 4096, "state": "directory", "uid": 103}
2025-02-28 16:09:13,045 p=32126 u=digitd n=ansible | TASK [Copy certificates on the machines] **************************************************************************************************************************************
2025-02-28 16:09:20,919 p=32126 u=digitd n=ansible | ok: [db.slave.lan] => {"changed": false, "dest": "/var/lib/postgresql/15/ssl/", "src": "/home/digitd/travelata_test/ansible/../certs/"}
2025-02-28 16:09:21,213 p=32126 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "dest": "/var/lib/postgresql/15/ssl/", "src": "/home/digitd/travelata_test/ansible/../certs/"}
2025-02-28 16:09:21,215 p=32126 u=digitd n=ansible | TASK [Start services] *********************************************************************************************************************************************************
2025-02-28 16:09:52,633 p=32126 u=digitd n=ansible | changed: [db.master.lan] => {"changed": true, "enabled": true, "name": "patroni", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:07:11 MSK", "ActiveEnterTimestampMonotonic": "411177912796", "ActiveExitTimestamp": "Fri 2025-02-28 16:06:54 MSK", "ActiveExitTimestampMonotonic": "411161231981", "ActiveState": "active", "After": "system.slice network.target systemd-journald.socket basic.target sysinit.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:07:11 MSK", "AssertTimestampMonotonic": "411177905717", "Before": "multi-user.target shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "4558909000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:07:11 MSK", "ConditionTimestampMonotonic": "411177905697", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/patroni.service", "ControlGroupId": "14535", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "Runners to orchestrate a high-availability PostgreSQL", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "EnvironmentFiles": "/etc/patroni_env.conf (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainHandoffTimestamp": "Fri 2025-02-28 16:07:11 MSK", "ExecMainHandoffTimestampMonotonic": "411177944711", "ExecMainPID": "474590", "ExecMainStartTimestamp": "Fri 2025-02-28 16:07:11 MSK", "ExecMainStartTimestampMonotonic": "411177907218", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/patroni ; argv[]=/usr/bin/patroni /etc/patroni/config.yml ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:07:11 MSK] ; stop_time=[n/a] ; pid=474590 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/patroni ; argv[]=/usr/bin/patroni /etc/patroni/config.yml ; flags= ; start_time=[Fri 2025-02-28 16:07:11 MSK] ; stop_time=[n/a] ; pid=474590 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/patroni.service", "FreezerState": "running", "GID": "110", "Group": "postgres", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "patroni.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:07:11 MSK", "InactiveEnterTimestampMonotonic": "411177896407", "InactiveExitTimestamp": "Fri 2025-02-28 16:07:11 MSK", "InactiveExitTimestampMonotonic": "411177912796", "InvocationID": "11a245d579454f9daed08d1ef5417e79", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "process", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "474590", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "627949568", "MemoryCurrent": "114249728", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "129265664", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "0", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "0", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "patroni.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-failure", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Fri 2025-02-28 16:07:11 MSK", "StateChangeTimestampMonotonic": "411177912796", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "12", "TasksMax": "1098", "TimeoutAbortUSec": "30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "102", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "postgres", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:09:52,759 p=32126 u=digitd n=ansible | changed: [db.slave.lan] => {"changed": true, "enabled": true, "name": "patroni", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:07:14 MSK", "ActiveEnterTimestampMonotonic": "411121556486", "ActiveExitTimestamp": "Fri 2025-02-28 16:06:55 MSK", "ActiveExitTimestampMonotonic": "411102606632", "ActiveState": "active", "After": "systemd-journald.socket sysinit.target basic.target network.target system.slice", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:07:14 MSK", "AssertTimestampMonotonic": "411121553014", "Before": "multi-user.target shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "4080300000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:07:14 MSK", "ConditionTimestampMonotonic": "411121553001", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/patroni.service", "ControlGroupId": "152889", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "Runners to orchestrate a high-availability PostgreSQL", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "EnvironmentFiles": "/etc/patroni_env.conf (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainHandoffTimestamp": "Fri 2025-02-28 16:07:14 MSK", "ExecMainHandoffTimestampMonotonic": "411121572802", "ExecMainPID": "439804", "ExecMainStartTimestamp": "Fri 2025-02-28 16:07:14 MSK", "ExecMainStartTimestampMonotonic": "411121553927", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/patroni ; argv[]=/usr/bin/patroni /etc/patroni/config.yml ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:07:14 MSK] ; stop_time=[n/a] ; pid=439804 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/patroni ; argv[]=/usr/bin/patroni /etc/patroni/config.yml ; flags= ; start_time=[Fri 2025-02-28 16:07:14 MSK] ; stop_time=[n/a] ; pid=439804 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/patroni.service", "FreezerState": "running", "GID": "111", "Group": "postgres", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "patroni.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:07:14 MSK", "InactiveEnterTimestampMonotonic": "411121542848", "InactiveExitTimestamp": "Fri 2025-02-28 16:07:14 MSK", "InactiveExitTimestampMonotonic": "411121556486", "InvocationID": "b9c87bc0e4b746b8b8b369d0874aca10", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "process", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "439804", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "592527360", "MemoryCurrent": "106991616", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "110903296", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "0", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "0", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "patroni.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "on-failure", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Fri 2025-02-28 16:07:14 MSK", "StateChangeTimestampMonotonic": "411121556486", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "16", "TasksMax": "1098", "TimeoutAbortUSec": "30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "103", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "postgres", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:09:52,762 p=32126 u=digitd n=ansible | TASK [Get patronictl status] **************************************************************************************************************************************************
2025-02-28 16:09:59,171 p=32126 u=digitd n=ansible | ok: [db.slave.lan] => {"changed": false, "cmd": ["patronictl", "-c", "/etc/patroni/config.yml", "list"], "delta": "0:00:05.834664", "end": "2025-02-28 16:09:59.281288", "msg": "", "rc": 0, "start": "2025-02-28 16:09:53.446624", "stderr": "", "stderr_lines": [], "stdout": "+ Cluster: clusterdb (7476444775388949912) ---------+----+-----------+\n| Member   | Host              | Role    | State    | TL | Lag in MB |\n+----------+-------------------+---------+----------+----+-----------+\n| masterdb | 192.168.2.16:5050 | Replica | starting |    |   unknown |\n| slavedb  | 192.168.2.17:5050 | Leader  | running  |  3 |           |\n+----------+-------------------+---------+----------+----+-----------+", "stdout_lines": ["+ Cluster: clusterdb (7476444775388949912) ---------+----+-----------+", "| Member   | Host              | Role    | State    | TL | Lag in MB |", "+----------+-------------------+---------+----------+----+-----------+", "| masterdb | 192.168.2.16:5050 | Replica | starting |    |   unknown |", "| slavedb  | 192.168.2.17:5050 | Leader  | running  |  3 |           |", "+----------+-------------------+---------+----------+----+-----------+"]}
2025-02-28 16:09:59,194 p=32126 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "cmd": ["patronictl", "-c", "/etc/patroni/config.yml", "list"], "delta": "0:00:05.894592", "end": "2025-02-28 16:09:59.272053", "msg": "", "rc": 0, "start": "2025-02-28 16:09:53.377461", "stderr": "", "stderr_lines": [], "stdout": "+ Cluster: clusterdb (7476444775388949912) ---------+----+-----------+\n| Member   | Host              | Role    | State    | TL | Lag in MB |\n+----------+-------------------+---------+----------+----+-----------+\n| masterdb | 192.168.2.16:5050 | Replica | starting |    |   unknown |\n| slavedb  | 192.168.2.17:5050 | Leader  | running  |  5 |           |\n+----------+-------------------+---------+----------+----+-----------+", "stdout_lines": ["+ Cluster: clusterdb (7476444775388949912) ---------+----+-----------+", "| Member   | Host              | Role    | State    | TL | Lag in MB |", "+----------+-------------------+---------+----------+----+-----------+", "| masterdb | 192.168.2.16:5050 | Replica | starting |    |   unknown |", "| slavedb  | 192.168.2.17:5050 | Leader  | running  |  5 |           |", "+----------+-------------------+---------+----------+----+-----------+"]}
2025-02-28 16:09:59,196 p=32126 u=digitd n=ansible | TASK [Get time for Pantroni initializing] *************************************************************************************************************************************
2025-02-28 16:09:59,206 p=32126 u=digitd n=ansible | Pausing for 120 seconds
2025-02-28 16:09:59,207 p=32126 u=digitd n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2025-02-28 16:10:13,486 p=32126 u=digitd n=ansible | Press 'C' to continue the play or 'A' to abort 
2025-02-28 16:10:14,086 p=32126 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "delta": 14, "echo": true, "rc": 0, "start": "2025-02-28 16:09:59.205453", "stderr": "", "stdout": "Paused for 0.25 minutes", "stop": "2025-02-28 16:10:14.084214", "user_input": ""}
2025-02-28 16:10:14,088 p=32126 u=digitd n=ansible | TASK [Print it] ***************************************************************************************************************************************************************
2025-02-28 16:10:14,105 p=32126 u=digitd n=ansible | ok: [db.master.lan] => {
    "msg": [
        "+ Cluster: clusterdb (7476444775388949912) ---------+----+-----------+",
        "| Member   | Host              | Role    | State    | TL | Lag in MB |",
        "+----------+-------------------+---------+----------+----+-----------+",
        "| masterdb | 192.168.2.16:5050 | Replica | starting |    |   unknown |",
        "| slavedb  | 192.168.2.17:5050 | Leader  | running  |  5 |           |",
        "+----------+-------------------+---------+----------+----+-----------+"
    ]
}
2025-02-28 16:10:14,112 p=32126 u=digitd n=ansible | ok: [db.slave.lan] => {
    "msg": [
        "+ Cluster: clusterdb (7476444775388949912) ---------+----+-----------+",
        "| Member   | Host              | Role    | State    | TL | Lag in MB |",
        "+----------+-------------------+---------+----------+----+-----------+",
        "| masterdb | 192.168.2.16:5050 | Replica | starting |    |   unknown |",
        "| slavedb  | 192.168.2.17:5050 | Leader  | running  |  3 |           |",
        "+----------+-------------------+---------+----------+----+-----------+"
    ]
}
2025-02-28 16:10:14,125 p=32126 u=digitd n=ansible | PLAY [Stop Patroni] ***********************************************************************************************************************************************************
2025-02-28 16:10:14,133 p=32126 u=digitd n=ansible | TASK [Stop service] ***********************************************************************************************************************************************************
2025-02-28 16:10:22,147 p=32126 u=digitd n=ansible | changed: [db.slave.lan] => {"changed": true, "name": "patroni", "state": "stopped", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:09:52 MSK", "ActiveEnterTimestampMonotonic": "411280153856", "ActiveExitTimestamp": "Fri 2025-02-28 16:09:22 MSK", "ActiveExitTimestampMonotonic": "411249895374", "ActiveState": "active", "After": "systemd-journald.socket sysinit.target basic.target network.target system.slice", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:09:52 MSK", "AssertTimestampMonotonic": "411280149463", "Before": "multi-user.target shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1380171000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:09:52 MSK", "ConditionTimestampMonotonic": "411280149440", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/patroni.service", "ControlGroupId": "152889", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "Runners to orchestrate a high-availability PostgreSQL", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "EnvironmentFiles": "/etc/patroni_env.conf (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainHandoffTimestamp": "Fri 2025-02-28 16:09:52 MSK", "ExecMainHandoffTimestampMonotonic": "411280196633", "ExecMainPID": "441615", "ExecMainStartTimestamp": "Fri 2025-02-28 16:09:52 MSK", "ExecMainStartTimestampMonotonic": "411280150899", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/patroni ; argv[]=/usr/bin/patroni /etc/patroni/config.yml ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:09:52 MSK] ; stop_time=[n/a] ; pid=441615 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/patroni ; argv[]=/usr/bin/patroni /etc/patroni/config.yml ; flags= ; start_time=[Fri 2025-02-28 16:09:52 MSK] ; stop_time=[n/a] ; pid=441615 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/patroni.service", "FreezerState": "running", "GID": "111", "Group": "postgres", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "patroni.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:09:52 MSK", "InactiveEnterTimestampMonotonic": "411280141658", "InactiveExitTimestamp": "Fri 2025-02-28 16:09:52 MSK", "InactiveExitTimestampMonotonic": "411280153856", "InvocationID": "6f03c737e4da4ce99453ac8c51571e0b", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "process", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "441615", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "631767040", "MemoryCurrent": "93233152", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "115367936", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "0", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "0", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "patroni.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "on-failure", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Fri 2025-02-28 16:09:52 MSK", "StateChangeTimestampMonotonic": "411280153856", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "6", "TasksMax": "1098", "TimeoutAbortUSec": "30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "103", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "postgres", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:10:24,892 p=32126 u=digitd n=ansible | changed: [db.master.lan] => {"changed": true, "name": "patroni", "state": "stopped", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:09:52 MSK", "ActiveEnterTimestampMonotonic": "411338945767", "ActiveExitTimestamp": "Fri 2025-02-28 16:09:22 MSK", "ActiveExitTimestampMonotonic": "411308849533", "ActiveState": "active", "After": "system.slice network.target systemd-journald.socket basic.target sysinit.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:09:52 MSK", "AssertTimestampMonotonic": "411338941307", "Before": "multi-user.target shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1869718000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:09:52 MSK", "ConditionTimestampMonotonic": "411338941286", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/patroni.service", "ControlGroupId": "14535", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "Runners to orchestrate a high-availability PostgreSQL", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "EnvironmentFiles": "/etc/patroni_env.conf (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainHandoffTimestamp": "Fri 2025-02-28 16:09:53 MSK", "ExecMainHandoffTimestampMonotonic": "411339380391", "ExecMainPID": "476256", "ExecMainStartTimestamp": "Fri 2025-02-28 16:09:52 MSK", "ExecMainStartTimestampMonotonic": "411338942711", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/patroni ; argv[]=/usr/bin/patroni /etc/patroni/config.yml ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:09:52 MSK] ; stop_time=[n/a] ; pid=476256 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/patroni ; argv[]=/usr/bin/patroni /etc/patroni/config.yml ; flags= ; start_time=[Fri 2025-02-28 16:09:52 MSK] ; stop_time=[n/a] ; pid=476256 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/patroni.service", "FreezerState": "running", "GID": "110", "Group": "postgres", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "patroni.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:09:52 MSK", "InactiveEnterTimestampMonotonic": "411338934693", "InactiveExitTimestamp": "Fri 2025-02-28 16:09:52 MSK", "InactiveExitTimestampMonotonic": "411338945767", "InvocationID": "bb16f0a4831c4764b6816de074d32d74", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "process", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "476256", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "611164160", "MemoryCurrent": "118337536", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "129265664", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "0", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "0", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "patroni.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-failure", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Fri 2025-02-28 16:09:52 MSK", "StateChangeTimestampMonotonic": "411338945767", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "13", "TasksMax": "1098", "TimeoutAbortUSec": "30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "102", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "postgres", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:10:24,909 p=32126 u=digitd n=ansible | PLAY [Clear values from WAL] **************************************************************************************************************************************************
2025-02-28 16:10:24,921 p=32126 u=digitd n=ansible | TASK [Clear old values of the cluster in base] ********************************************************************************************************************************
2025-02-28 16:10:25,702 p=32126 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "cmd": ["etcdctl", "del", "", "--prefix"], "delta": "0:00:00.327321", "end": "2025-02-28 16:10:25.803015", "msg": "", "rc": 0, "start": "2025-02-28 16:10:25.475694", "stderr": "", "stderr_lines": [], "stdout": "6", "stdout_lines": ["6"]}
2025-02-28 16:10:25,908 p=32126 u=digitd n=ansible | ok: [db.slave.lan] => {"changed": false, "cmd": ["etcdctl", "del", "", "--prefix"], "delta": "0:00:00.524271", "end": "2025-02-28 16:10:26.010539", "msg": "", "rc": 0, "start": "2025-02-28 16:10:25.486268", "stderr": "", "stderr_lines": [], "stdout": "0", "stdout_lines": ["0"]}
2025-02-28 16:10:25,971 p=32126 u=digitd n=ansible | ok: [db.etcd.lan] => {"changed": false, "cmd": ["etcdctl", "del", "", "--prefix"], "delta": "0:00:00.242611", "end": "2025-02-28 16:10:26.082991", "msg": "", "rc": 0, "start": "2025-02-28 16:10:25.840380", "stderr": "", "stderr_lines": [], "stdout": "0", "stdout_lines": ["0"]}
2025-02-28 16:10:25,973 p=32126 u=digitd n=ansible | TASK [Stop etcd service] ******************************************************************************************************************************************************
2025-02-28 16:10:27,354 p=32126 u=digitd n=ansible | changed: [db.etcd.lan] => {"changed": true, "name": "etcd", "state": "stopped", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:09:06 MSK", "ActiveEnterTimestampMonotonic": "238746290241", "ActiveExitTimestamp": "Fri 2025-02-28 16:08:58 MSK", "ActiveExitTimestampMonotonic": "238738857642", "ActiveState": "active", "After": "systemd-journald.socket system.slice basic.target network.target sysinit.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:09:01 MSK", "AssertTimestampMonotonic": "238741832820", "Before": "multi-user.target etcd-discovery.service shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "964920000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:09:01 MSK", "ConditionTimestampMonotonic": "238741832816", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/etcd.service", "ControlGroupId": "59142", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "etcd - highly-available key value store", "DevicePolicy": "auto", "Documentation": "https://etcd.io/docs man:etcd", "DynamicUser": "no", "EffectiveCPUs": "0", "EffectiveMemoryNodes": "0", "Environment": "DAEMON_ARGS= ETCD_NAME=etcd ETCD_DATA_DIR=/var/lib/etcd/default", "EnvironmentFiles": "/etc/default/etcd (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "18783", "ExecMainStartTimestamp": "Fri 2025-02-28 16:09:01 MSK", "ExecMainStartTimestampMonotonic": "238741841002", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:09:01 MSK] ; stop_time=[n/a] ; pid=18783 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; flags= ; start_time=[Fri 2025-02-28 16:09:01 MSK] ; stop_time=[n/a] ; pid=18783 ; code=(null) ; status=0/0 }", "ExitType": "main", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/etcd.service", "FreezerState": "running", "GID": "111", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "etcd.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:09:01 MSK", "InactiveEnterTimestampMonotonic": "238741831397", "InactiveExitTimestamp": "Fri 2025-02-28 16:09:01 MSK", "InactiveExitTimestampMonotonic": "238741841960", "InvocationID": "8a95bf3a7ee44f89bc11171cab94b2b5", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "65536", "LimitNOFILESoft": "65536", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "18783", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "55488512", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "etcd.service etcd2.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-abnormal", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Fri 2025-02-28 16:09:06 MSK", "StateChangeTimestampMonotonic": "238746290241", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "8", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "103", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "etcd", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:10:28,489 p=32126 u=digitd n=ansible | changed: [db.master.lan] => {"changed": true, "name": "etcd", "state": "stopped", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:08:42 MSK", "ActiveEnterTimestampMonotonic": "411269132715", "ActiveExitTimestamp": "Fri 2025-02-28 16:08:20 MSK", "ActiveExitTimestampMonotonic": "411246797599", "ActiveState": "active", "After": "network.target system.slice basic.target sysinit.target systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:08:27 MSK", "AssertTimestampMonotonic": "411253977048", "Before": "multi-user.target etcd-discovery.service shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1405082000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:08:27 MSK", "ConditionTimestampMonotonic": "411253977044", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/etcd.service", "ControlGroupId": "14574", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "etcd - highly-available key value store", "DevicePolicy": "auto", "Documentation": "https://etcd.io/docs man:etcd", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "Environment": "DAEMON_ARGS= ETCD_NAME=dbmaster ETCD_DATA_DIR=/var/lib/etcd/default", "EnvironmentFiles": "/etc/default/etcd (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainHandoffTimestamp": "Fri 2025-02-28 16:08:28 MSK", "ExecMainHandoffTimestampMonotonic": "411254797700", "ExecMainPID": "475542", "ExecMainStartTimestamp": "Fri 2025-02-28 16:08:27 MSK", "ExecMainStartTimestampMonotonic": "411253978465", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:08:27 MSK] ; stop_time=[n/a] ; pid=475542 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; flags= ; start_time=[Fri 2025-02-28 16:08:27 MSK] ; stop_time=[n/a] ; pid=475542 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/etcd.service", "FreezerState": "running", "GID": "111", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "etcd.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:08:27 MSK", "InactiveEnterTimestampMonotonic": "411253968378", "InactiveExitTimestamp": "Fri 2025-02-28 16:08:27 MSK", "InactiveExitTimestampMonotonic": "411253982506", "InvocationID": "659f2bb674e14631a7f231fe9b47e45e", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "65536", "LimitNOFILESoft": "65536", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "475542", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "682594304", "MemoryCurrent": "47116288", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "47403008", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "0", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "0", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "etcd.service etcd2.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-abnormal", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Fri 2025-02-28 16:08:42 MSK", "StateChangeTimestampMonotonic": "411269132715", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "8", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "103", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "etcd", "UtmpMode": "init", "WantedBy": "etcd-discovery.service multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:10:34,483 p=32126 u=digitd n=ansible | changed: [db.slave.lan] => {"changed": true, "name": "etcd", "state": "stopped", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:08:53 MSK", "ActiveEnterTimestampMonotonic": "411220687326", "ActiveExitTimestamp": "Fri 2025-02-28 16:08:47 MSK", "ActiveExitTimestampMonotonic": "411214706384", "ActiveState": "active", "After": "basic.target network.target system.slice systemd-journald.socket sysinit.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:08:48 MSK", "AssertTimestampMonotonic": "411216054282", "Before": "etcd-discovery.service multi-user.target shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1091805000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:08:48 MSK", "ConditionTimestampMonotonic": "411216054278", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/etcd.service", "ControlGroupId": "153786", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "etcd - highly-available key value store", "DevicePolicy": "auto", "Documentation": "https://etcd.io/docs man:etcd", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "Environment": "DAEMON_ARGS= ETCD_NAME=slavedb ETCD_DATA_DIR=/var/lib/etcd/default", "EnvironmentFiles": "/etc/default/etcd (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainHandoffTimestamp": "Fri 2025-02-28 16:08:48 MSK", "ExecMainHandoffTimestampMonotonic": "411216088626", "ExecMainPID": "440919", "ExecMainStartTimestamp": "Fri 2025-02-28 16:08:48 MSK", "ExecMainStartTimestampMonotonic": "411216055594", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:08:48 MSK] ; stop_time=[n/a] ; pid=440919 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; flags= ; start_time=[Fri 2025-02-28 16:08:48 MSK] ; stop_time=[n/a] ; pid=440919 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/etcd.service", "FreezerState": "running", "GID": "112", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "etcd.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:08:48 MSK", "InactiveEnterTimestampMonotonic": "411216043969", "InactiveExitTimestamp": "Fri 2025-02-28 16:08:48 MSK", "InactiveExitTimestampMonotonic": "411216060614", "InvocationID": "4d7a64cdd15140f289c4014668813139", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "65536", "LimitNOFILESoft": "65536", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "440919", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "673918976", "MemoryCurrent": "62558208", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "63987712", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "0", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "0", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "etcd.service etcd2.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "on-abnormal", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Fri 2025-02-28 16:08:53 MSK", "StateChangeTimestampMonotonic": "411220687326", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "8", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "104", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "etcd", "UtmpMode": "init", "WantedBy": "etcd-discovery.service multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:10:34,485 p=32126 u=digitd n=ansible | TASK [Start etcd service] *****************************************************************************************************************************************************
2025-02-28 16:10:45,439 p=32126 u=digitd n=ansible | changed: [db.master.lan] => {"changed": true, "name": "etcd", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:08:42 MSK", "ActiveEnterTimestampMonotonic": "411269132715", "ActiveExitTimestamp": "Fri 2025-02-28 16:10:27 MSK", "ActiveExitTimestampMonotonic": "411373609397", "ActiveState": "inactive", "After": "network.target system.slice basic.target sysinit.target systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:08:27 MSK", "AssertTimestampMonotonic": "411253977048", "Before": "multi-user.target etcd-discovery.service shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1418843000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:08:27 MSK", "ConditionTimestampMonotonic": "411253977044", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroupId": "14574", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "etcd - highly-available key value store", "DevicePolicy": "auto", "Documentation": "https://etcd.io/docs man:etcd", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "Environment": "DAEMON_ARGS= ETCD_NAME=dbmaster ETCD_DATA_DIR=/var/lib/etcd/default", "EnvironmentFiles": "/etc/default/etcd (ignore_errors=yes)", "ExecMainCode": "2", "ExecMainExitTimestamp": "Fri 2025-02-28 16:10:28 MSK", "ExecMainExitTimestampMonotonic": "411374803756", "ExecMainHandoffTimestamp": "Fri 2025-02-28 16:08:28 MSK", "ExecMainHandoffTimestampMonotonic": "411254797700", "ExecMainPID": "475542", "ExecMainStartTimestamp": "Fri 2025-02-28 16:08:27 MSK", "ExecMainStartTimestampMonotonic": "411253978465", "ExecMainStatus": "15", "ExecStart": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:08:27 MSK] ; stop_time=[Fri 2025-02-28 16:10:28 MSK] ; pid=475542 ; code=killed ; status=15/TERM }", "ExecStartEx": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; flags= ; start_time=[Fri 2025-02-28 16:08:27 MSK] ; stop_time=[Fri 2025-02-28 16:10:28 MSK] ; pid=475542 ; code=killed ; status=15/TERM }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/etcd.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "etcd.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:10:28 MSK", "InactiveEnterTimestampMonotonic": "411374804219", "InactiveExitTimestamp": "Fri 2025-02-28 16:08:27 MSK", "InactiveExitTimestampMonotonic": "411253982506", "InvocationID": "659f2bb674e14631a7f231fe9b47e45e", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "65536", "LimitNOFILESoft": "65536", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "729579520", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "47403008", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "[not set]", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "[not set]", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "etcd.service etcd2.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-abnormal", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Fri 2025-02-28 16:10:28 MSK", "StateChangeTimestampMonotonic": "411374804219", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "etcd", "UtmpMode": "init", "WantedBy": "etcd-discovery.service multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:10:45,440 p=32126 u=digitd n=ansible | changed: [db.slave.lan] => {"changed": true, "name": "etcd", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:08:53 MSK", "ActiveEnterTimestampMonotonic": "411220687326", "ActiveExitTimestamp": "Fri 2025-02-28 16:10:27 MSK", "ActiveExitTimestampMonotonic": "411314656794", "ActiveState": "inactive", "After": "basic.target network.target system.slice systemd-journald.socket sysinit.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:08:48 MSK", "AssertTimestampMonotonic": "411216054282", "Before": "etcd-discovery.service multi-user.target shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1261405000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:08:48 MSK", "ConditionTimestampMonotonic": "411216054278", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroupId": "153786", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "etcd - highly-available key value store", "DevicePolicy": "auto", "Documentation": "https://etcd.io/docs man:etcd", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "Environment": "DAEMON_ARGS= ETCD_NAME=slavedb ETCD_DATA_DIR=/var/lib/etcd/default", "EnvironmentFiles": "/etc/default/etcd (ignore_errors=yes)", "ExecMainCode": "2", "ExecMainExitTimestamp": "Fri 2025-02-28 16:10:34 MSK", "ExecMainExitTimestampMonotonic": "411321882528", "ExecMainHandoffTimestamp": "Fri 2025-02-28 16:08:48 MSK", "ExecMainHandoffTimestampMonotonic": "411216088626", "ExecMainPID": "440919", "ExecMainStartTimestamp": "Fri 2025-02-28 16:08:48 MSK", "ExecMainStartTimestampMonotonic": "411216055594", "ExecMainStatus": "15", "ExecStart": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:08:48 MSK] ; stop_time=[Fri 2025-02-28 16:10:34 MSK] ; pid=440919 ; code=killed ; status=15/TERM }", "ExecStartEx": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; flags= ; start_time=[Fri 2025-02-28 16:08:48 MSK] ; stop_time=[Fri 2025-02-28 16:10:34 MSK] ; pid=440919 ; code=killed ; status=15/TERM }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/etcd.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "etcd.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:10:34 MSK", "InactiveEnterTimestampMonotonic": "411321882938", "InactiveExitTimestamp": "Fri 2025-02-28 16:08:48 MSK", "InactiveExitTimestampMonotonic": "411216060614", "InvocationID": "4d7a64cdd15140f289c4014668813139", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "65536", "LimitNOFILESoft": "65536", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "735744000", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "63987712", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "[not set]", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "[not set]", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "etcd.service etcd2.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "on-abnormal", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Fri 2025-02-28 16:10:34 MSK", "StateChangeTimestampMonotonic": "411321882938", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "etcd", "UtmpMode": "init", "WantedBy": "etcd-discovery.service multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:10:45,548 p=32126 u=digitd n=ansible | changed: [db.etcd.lan] => {"changed": true, "name": "etcd", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:09:06 MSK", "ActiveEnterTimestampMonotonic": "238746290241", "ActiveExitTimestamp": "Fri 2025-02-28 16:10:27 MSK", "ActiveExitTimestampMonotonic": "238827487663", "ActiveState": "inactive", "After": "systemd-journald.socket system.slice basic.target network.target sysinit.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:09:01 MSK", "AssertTimestampMonotonic": "238741832820", "Before": "multi-user.target etcd-discovery.service shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "975226000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:09:01 MSK", "ConditionTimestampMonotonic": "238741832816", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroupId": "59142", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "etcd - highly-available key value store", "DevicePolicy": "auto", "Documentation": "https://etcd.io/docs man:etcd", "DynamicUser": "no", "Environment": "DAEMON_ARGS= ETCD_NAME=etcd ETCD_DATA_DIR=/var/lib/etcd/default", "EnvironmentFiles": "/etc/default/etcd (ignore_errors=yes)", "ExecMainCode": "2", "ExecMainExitTimestamp": "Fri 2025-02-28 16:10:27 MSK", "ExecMainExitTimestampMonotonic": "238827688866", "ExecMainPID": "18783", "ExecMainStartTimestamp": "Fri 2025-02-28 16:09:01 MSK", "ExecMainStartTimestampMonotonic": "238741841002", "ExecMainStatus": "15", "ExecStart": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:09:01 MSK] ; stop_time=[Fri 2025-02-28 16:10:27 MSK] ; pid=18783 ; code=killed ; status=15/TERM }", "ExecStartEx": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; flags= ; start_time=[Fri 2025-02-28 16:09:01 MSK] ; stop_time=[Fri 2025-02-28 16:10:27 MSK] ; pid=18783 ; code=killed ; status=15/TERM }", "ExitType": "main", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/etcd.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "etcd.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:10:27 MSK", "InactiveEnterTimestampMonotonic": "238827689271", "InactiveExitTimestamp": "Fri 2025-02-28 16:09:01 MSK", "InactiveExitTimestampMonotonic": "238741841960", "InvocationID": "8a95bf3a7ee44f89bc11171cab94b2b5", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "65536", "LimitNOFILESoft": "65536", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "etcd.service etcd2.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-abnormal", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Fri 2025-02-28 16:10:27 MSK", "StateChangeTimestampMonotonic": "238827689271", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "etcd", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:10:45,565 p=32126 u=digitd n=ansible | PLAY [Delete Patroni files] ***************************************************************************************************************************************************
2025-02-28 16:10:45,576 p=32126 u=digitd n=ansible | TASK [Remove files] ***********************************************************************************************************************************************************
2025-02-28 16:10:46,402 p=32126 u=digitd n=ansible | changed: [db.master.lan] => {"changed": true, "cmd": ["trash-put", "/var/lib/postgresql/15/data"], "delta": "0:00:00.306188", "end": "2025-02-28 16:10:46.496053", "msg": "", "rc": 0, "start": "2025-02-28 16:10:46.189865", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2025-02-28 16:10:46,449 p=32126 u=digitd n=ansible | changed: [db.slave.lan] => {"changed": true, "cmd": ["trash-put", "/var/lib/postgresql/15/data"], "delta": "0:00:00.364691", "end": "2025-02-28 16:10:46.565755", "msg": "", "rc": 0, "start": "2025-02-28 16:10:46.201064", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2025-02-28 16:10:46,464 p=32126 u=digitd n=ansible | PLAY [Stop Patroni] ***********************************************************************************************************************************************************
2025-02-28 16:10:46,473 p=32126 u=digitd n=ansible | TASK [Stop service] ***********************************************************************************************************************************************************
2025-02-28 16:10:47,670 p=32126 u=digitd n=ansible | changed: [db.master.lan] => {"changed": true, "name": "patroni", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:09:52 MSK", "ActiveEnterTimestampMonotonic": "411338945767", "ActiveExitTimestamp": "Fri 2025-02-28 16:10:15 MSK", "ActiveExitTimestampMonotonic": "411361737603", "ActiveState": "inactive", "After": "system.slice network.target systemd-journald.socket basic.target sysinit.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:09:52 MSK", "AssertTimestampMonotonic": "411338941307", "Before": "multi-user.target shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "2004146000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:09:52 MSK", "ConditionTimestampMonotonic": "411338941286", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroupId": "14535", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "Runners to orchestrate a high-availability PostgreSQL", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "EnvironmentFiles": "/etc/patroni_env.conf (ignore_errors=yes)", "ExecMainCode": "1", "ExecMainExitTimestamp": "Fri 2025-02-28 16:10:24 MSK", "ExecMainExitTimestampMonotonic": "411371225091", "ExecMainHandoffTimestamp": "Fri 2025-02-28 16:09:53 MSK", "ExecMainHandoffTimestampMonotonic": "411339380391", "ExecMainPID": "476256", "ExecMainStartTimestamp": "Fri 2025-02-28 16:09:52 MSK", "ExecMainStartTimestampMonotonic": "411338942711", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/patroni ; argv[]=/usr/bin/patroni /etc/patroni/config.yml ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:09:52 MSK] ; stop_time=[Fri 2025-02-28 16:10:24 MSK] ; pid=476256 ; code=exited ; status=0 }", "ExecStartEx": "{ path=/usr/bin/patroni ; argv[]=/usr/bin/patroni /etc/patroni/config.yml ; flags= ; start_time=[Fri 2025-02-28 16:09:52 MSK] ; stop_time=[Fri 2025-02-28 16:10:24 MSK] ; pid=476256 ; code=exited ; status=0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/patroni.service", "FreezerState": "running", "GID": "[not set]", "Group": "postgres", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "patroni.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:10:24 MSK", "InactiveEnterTimestampMonotonic": "411371225219", "InactiveExitTimestamp": "Fri 2025-02-28 16:09:52 MSK", "InactiveExitTimestampMonotonic": "411338945767", "InvocationID": "bb16f0a4831c4764b6816de074d32d74", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "process", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "676913152", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "129265664", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "[not set]", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "[not set]", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "patroni.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-failure", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Fri 2025-02-28 16:10:24 MSK", "StateChangeTimestampMonotonic": "411371225219", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "1098", "TimeoutAbortUSec": "30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "postgres", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:10:47,739 p=32126 u=digitd n=ansible | changed: [db.slave.lan] => {"changed": true, "name": "patroni", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:09:52 MSK", "ActiveEnterTimestampMonotonic": "411280153856", "ActiveExitTimestamp": "Fri 2025-02-28 16:10:15 MSK", "ActiveExitTimestampMonotonic": "411302808403", "ActiveState": "inactive", "After": "systemd-journald.socket sysinit.target basic.target network.target system.slice", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:09:52 MSK", "AssertTimestampMonotonic": "411280149463", "Before": "multi-user.target shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1492339000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:09:52 MSK", "ConditionTimestampMonotonic": "411280149440", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroupId": "152889", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "Runners to orchestrate a high-availability PostgreSQL", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "EnvironmentFiles": "/etc/patroni_env.conf (ignore_errors=yes)", "ExecMainCode": "1", "ExecMainExitTimestamp": "Fri 2025-02-28 16:10:22 MSK", "ExecMainExitTimestampMonotonic": "411309549939", "ExecMainHandoffTimestamp": "Fri 2025-02-28 16:09:52 MSK", "ExecMainHandoffTimestampMonotonic": "411280196633", "ExecMainPID": "441615", "ExecMainStartTimestamp": "Fri 2025-02-28 16:09:52 MSK", "ExecMainStartTimestampMonotonic": "411280150899", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/patroni ; argv[]=/usr/bin/patroni /etc/patroni/config.yml ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:09:52 MSK] ; stop_time=[Fri 2025-02-28 16:10:22 MSK] ; pid=441615 ; code=exited ; status=0 }", "ExecStartEx": "{ path=/usr/bin/patroni ; argv[]=/usr/bin/patroni /etc/patroni/config.yml ; flags= ; start_time=[Fri 2025-02-28 16:09:52 MSK] ; stop_time=[Fri 2025-02-28 16:10:22 MSK] ; pid=441615 ; code=exited ; status=0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/patroni.service", "FreezerState": "running", "GID": "[not set]", "Group": "postgres", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "patroni.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:10:22 MSK", "InactiveEnterTimestampMonotonic": "411309550058", "InactiveExitTimestamp": "Fri 2025-02-28 16:09:52 MSK", "InactiveExitTimestampMonotonic": "411280153856", "InvocationID": "6f03c737e4da4ce99453ac8c51571e0b", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "process", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "691437568", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "115367936", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "[not set]", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "[not set]", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "patroni.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "on-failure", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Fri 2025-02-28 16:10:22 MSK", "StateChangeTimestampMonotonic": "411309550058", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "1098", "TimeoutAbortUSec": "30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "postgres", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:10:47,753 p=32126 u=digitd n=ansible | PLAY [Install haproxy and run service] ****************************************************************************************************************************************
2025-02-28 16:10:47,761 p=32126 u=digitd n=ansible | TASK [Install HAProxy] ********************************************************************************************************************************************************
2025-02-28 16:10:49,682 p=32126 u=digitd n=ansible | ok: [db.test.lan] => {"ansible_facts": {"discovered_interpreter_python": "/usr/bin/python3"}, "cache_update_time": 1740743358, "cache_updated": false, "changed": false}
2025-02-28 16:10:49,684 p=32126 u=digitd n=ansible | TASK [Check service status] ***************************************************************************************************************************************************
2025-02-28 16:10:50,787 p=32126 u=digitd n=ansible | ok: [db.test.lan] => {"changed": false, "enabled": true, "name": "haproxy", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 15:04:55 MSK", "ActiveEnterTimestampMonotonic": "420083261935", "ActiveExitTimestamp": "Fri 2025-02-28 15:04:55 MSK", "ActiveExitTimestampMonotonic": "420083133682", "ActiveState": "active", "After": "sysinit.target systemd-journald.socket network-online.target rsyslog.service basic.target system.slice", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 15:04:55 MSK", "AssertTimestampMonotonic": "420083138965", "Before": "shutdown.target multi-user.target", "BindReadOnlyPaths": "/dev/log:/var/lib/haproxy/dev/log:rbind", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "3114578000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 15:04:55 MSK", "ConditionTimestampMonotonic": "420083138961", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/haproxy.service", "ControlGroupId": "11184", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "HAProxy Load Balancer", "DevicePolicy": "auto", "Documentation": "\"man:haproxy(1)\" file:/usr/share/doc/haproxy/configuration.txt.gz", "DynamicUser": "no", "Environment": "CONFIG=/etc/haproxy/haproxy.cfg PIDFILE=/run/haproxy.pid \"EXTRAOPTS=-S /run/haproxy-master.sock\"", "EnvironmentFiles": "/etc/sysconfig/haproxy (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "11750", "ExecMainStartTimestamp": "Fri 2025-02-28 15:04:55 MSK", "ExecMainStartTimestampMonotonic": "420083152224", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -USR2 $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -USR2 $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/sbin/haproxy ; argv[]=/usr/sbin/haproxy -Ws -f $CONFIG -p $PIDFILE $EXTRAOPTS ; ignore_errors=no ; start_time=[Fri 2025-02-28 15:04:55 MSK] ; stop_time=[n/a] ; pid=11750 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/sbin/haproxy ; argv[]=/usr/sbin/haproxy -Ws -f $CONFIG -p $PIDFILE $EXTRAOPTS ; flags= ; start_time=[Fri 2025-02-28 15:04:55 MSK] ; stop_time=[n/a] ; pid=11750 ; code=(null) ; status=0/0 }", "ExitType": "main", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/haproxy.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "haproxy.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 15:04:55 MSK", "InactiveEnterTimestampMonotonic": "420083137993", "InactiveExitTimestamp": "Fri 2025-02-28 15:04:55 MSK", "InactiveExitTimestampMonotonic": "420083152807", "InvocationID": "eea7a6022ca944a89e15fcd24138ef7f", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "mixed", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "11750", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "45875200", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "haproxy.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Fri 2025-02-28 15:04:55 MSK", "StateChangeTimestampMonotonic": "420083261935", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SuccessExitStatus": "143", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "2", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:10:50,795 p=32126 u=digitd n=ansible | PLAY [Change haproxy.cfg and start load balance to the nodes (copy file from the project directory)] **************************************************************************
2025-02-28 16:10:50,803 p=32126 u=digitd n=ansible | TASK [Edit or ensure config file for haproxy] *********************************************************************************************************************************
2025-02-28 16:10:51,595 p=32126 u=digitd n=ansible | ok: [db.test.lan] => {"changed": false, "checksum": "81dc5834c94a75fd36d7fd78e0e93a8898b82b23", "dest": "/etc/haproxy/haproxy.cfg", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/haproxy/haproxy.cfg", "size": 2381, "state": "file", "uid": 0}
2025-02-28 16:10:52,131 p=32126 u=digitd n=ansible | ok: [db.test1.lan] => {"ansible_facts": {"discovered_interpreter_python": "/usr/bin/python3"}, "changed": false, "checksum": "81dc5834c94a75fd36d7fd78e0e93a8898b82b23", "dest": "/etc/haproxy/haproxy.cfg", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/haproxy/haproxy.cfg", "size": 2381, "state": "file", "uid": 0}
2025-02-28 16:10:52,133 p=32126 u=digitd n=ansible | TASK [Restart haproxy service] ************************************************************************************************************************************************
2025-02-28 16:10:53,307 p=32126 u=digitd n=ansible | [WARNING]: Module invocation had junk after the JSON data:   Broadcast message from systemd-journald@haproxyvip (Fri 2025-02-28 16:10:53 MSK):    haproxy[10114]: backend
master_back has no server available!      Broadcast message from systemd-journald@haproxyvip (Fri 2025-02-28 16:10:53 MSK):    haproxy[10114]: backend master_back has no
server available!

2025-02-28 16:10:53,329 p=32126 u=digitd n=ansible | changed: [db.test1.lan] => {"changed": true, "enabled": true, "name": "haproxy", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 15:04:55 MSK", "ActiveEnterTimestampMonotonic": "420076600957", "ActiveExitTimestamp": "Fri 2025-02-28 15:04:55 MSK", "ActiveExitTimestampMonotonic": "420076501564", "ActiveState": "active", "After": "network-online.target rsyslog.service system.slice systemd-journald.socket sysinit.target basic.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 15:04:55 MSK", "AssertTimestampMonotonic": "420076503346", "Before": "shutdown.target multi-user.target", "BindReadOnlyPaths": "/dev/log:/var/lib/haproxy/dev/log:rbind", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "3047358000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 15:04:55 MSK", "ConditionTimestampMonotonic": "420076503345", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/haproxy.service", "ControlGroupId": "9638", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "HAProxy Load Balancer", "DevicePolicy": "auto", "Documentation": "\"man:haproxy(1)\" file:/usr/share/doc/haproxy/configuration.txt.gz", "DynamicUser": "no", "Environment": "CONFIG=/etc/haproxy/haproxy.cfg PIDFILE=/run/haproxy.pid \"EXTRAOPTS=-S /run/haproxy-master.sock\"", "EnvironmentFiles": "/etc/sysconfig/haproxy (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "9754", "ExecMainStartTimestamp": "Fri 2025-02-28 15:04:55 MSK", "ExecMainStartTimestampMonotonic": "420076516255", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -USR2 $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -USR2 $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/sbin/haproxy ; argv[]=/usr/sbin/haproxy -Ws -f $CONFIG -p $PIDFILE $EXTRAOPTS ; ignore_errors=no ; start_time=[Fri 2025-02-28 15:04:55 MSK] ; stop_time=[n/a] ; pid=9754 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/sbin/haproxy ; argv[]=/usr/sbin/haproxy -Ws -f $CONFIG -p $PIDFILE $EXTRAOPTS ; flags= ; start_time=[Fri 2025-02-28 15:04:55 MSK] ; stop_time=[n/a] ; pid=9754 ; code=(null) ; status=0/0 }", "ExitType": "main", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/haproxy.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "haproxy.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 15:04:55 MSK", "InactiveEnterTimestampMonotonic": "420076502119", "InactiveExitTimestamp": "Fri 2025-02-28 15:04:55 MSK", "InactiveExitTimestampMonotonic": "420076516571", "InvocationID": "6e63e606096f4f7295534cfaa3940113", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "mixed", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "9754", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "45850624", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "haproxy.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Fri 2025-02-28 15:04:55 MSK", "StateChangeTimestampMonotonic": "420076600957", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SuccessExitStatus": "143", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "2", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:10:55,662 p=32126 u=digitd n=ansible | changed: [db.test.lan] => {"changed": true, "enabled": true, "name": "haproxy", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 15:04:55 MSK", "ActiveEnterTimestampMonotonic": "420083261935", "ActiveExitTimestamp": "Fri 2025-02-28 15:04:55 MSK", "ActiveExitTimestampMonotonic": "420083133682", "ActiveState": "active", "After": "sysinit.target systemd-journald.socket network-online.target rsyslog.service basic.target system.slice", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 15:04:55 MSK", "AssertTimestampMonotonic": "420083138965", "Before": "shutdown.target multi-user.target", "BindReadOnlyPaths": "/dev/log:/var/lib/haproxy/dev/log:rbind", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "3116562000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 15:04:55 MSK", "ConditionTimestampMonotonic": "420083138961", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/haproxy.service", "ControlGroupId": "11184", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "HAProxy Load Balancer", "DevicePolicy": "auto", "Documentation": "\"man:haproxy(1)\" file:/usr/share/doc/haproxy/configuration.txt.gz", "DynamicUser": "no", "Environment": "CONFIG=/etc/haproxy/haproxy.cfg PIDFILE=/run/haproxy.pid \"EXTRAOPTS=-S /run/haproxy-master.sock\"", "EnvironmentFiles": "/etc/sysconfig/haproxy (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "11750", "ExecMainStartTimestamp": "Fri 2025-02-28 15:04:55 MSK", "ExecMainStartTimestampMonotonic": "420083152224", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -USR2 $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -USR2 $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/sbin/haproxy ; argv[]=/usr/sbin/haproxy -Ws -f $CONFIG -p $PIDFILE $EXTRAOPTS ; ignore_errors=no ; start_time=[Fri 2025-02-28 15:04:55 MSK] ; stop_time=[n/a] ; pid=11750 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/sbin/haproxy ; argv[]=/usr/sbin/haproxy -Ws -f $CONFIG -p $PIDFILE $EXTRAOPTS ; flags= ; start_time=[Fri 2025-02-28 15:04:55 MSK] ; stop_time=[n/a] ; pid=11750 ; code=(null) ; status=0/0 }", "ExitType": "main", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/haproxy.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "haproxy.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 15:04:55 MSK", "InactiveEnterTimestampMonotonic": "420083137993", "InactiveExitTimestamp": "Fri 2025-02-28 15:04:55 MSK", "InactiveExitTimestampMonotonic": "420083152807", "InvocationID": "eea7a6022ca944a89e15fcd24138ef7f", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "mixed", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "11750", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "45879296", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "haproxy.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Fri 2025-02-28 15:04:55 MSK", "StateChangeTimestampMonotonic": "420083261935", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SuccessExitStatus": "143", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "2", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:10:55,675 p=32126 u=digitd n=ansible | PLAY [Run keepalived services for MASTER Haproxy] *****************************************************************************************************************************
2025-02-28 16:10:55,681 p=32126 u=digitd n=ansible | TASK [Copy conf on MASTER HAProxy node] ***************************************************************************************************************************************
2025-02-28 16:10:59,012 p=32126 u=digitd n=ansible | changed: [db.test1.lan] => {"changed": true, "checksum": "677c26d3f87945325221597e7a31ef65a2c85fe4", "dest": "/etc/keepalived/keepalived.conf", "gid": 0, "group": "root", "md5sum": "01456f23cdb34829851274794461a3c4", "mode": "0644", "owner": "root", "size": 265, "src": "/root/.ansible/tmp/ansible-tmp-1740748255.7174785-1628-5018521541290/source", "state": "file", "uid": 0}
2025-02-28 16:10:59,016 p=32126 u=digitd n=ansible | TASK [Ensure or run keepalived service for Master] ****************************************************************************************************************************
2025-02-28 16:11:01,237 p=32126 u=digitd n=ansible | changed: [db.test1.lan] => {"changed": true, "enabled": true, "name": "keepalived", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 15:05:02 MSK", "ActiveEnterTimestampMonotonic": "420083285893", "ActiveExitTimestamp": "Fri 2025-02-28 15:05:01 MSK", "ActiveExitTimestampMonotonic": "420082241770", "ActiveState": "active", "After": "systemd-journald.socket network-online.target system.slice sysinit.target basic.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 15:05:02 MSK", "AssertTimestampMonotonic": "420083257667", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "454209000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 15:05:02 MSK", "ConditionTimestampMonotonic": "420083257649", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/keepalived.service", "ControlGroupId": "9716", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "Keepalive Daemon (LVS and VRRP)", "DevicePolicy": "auto", "Documentation": "\"man:keepalived(8)\" \"man:keepalived.conf(5)\" \"man:genhash(1)\" https://keepalived.org", "DynamicUser": "no", "EnvironmentFiles": "/etc/default/keepalived (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "9957", "ExecMainStartTimestamp": "Fri 2025-02-28 15:05:02 MSK", "ExecMainStartTimestampMonotonic": "420083264455", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/sbin/keepalived ; argv[]=/usr/sbin/keepalived --dont-fork $DAEMON_ARGS ; ignore_errors=no ; start_time=[Fri 2025-02-28 15:05:02 MSK] ; stop_time=[n/a] ; pid=9957 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/sbin/keepalived ; argv[]=/usr/sbin/keepalived --dont-fork $DAEMON_ARGS ; flags= ; start_time=[Fri 2025-02-28 15:05:02 MSK] ; stop_time=[n/a] ; pid=9957 ; code=(null) ; status=0/0 }", "ExitType": "main", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/keepalived.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "keepalived.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 15:05:02 MSK", "InactiveEnterTimestampMonotonic": "420083256429", "InactiveExitTimestamp": "Fri 2025-02-28 15:05:02 MSK", "InactiveExitTimestampMonotonic": "420083268319", "InvocationID": "3e3392046e2546e88c2b4396edaa3ed1", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "9957", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "2048000", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "keepalived.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "no", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Fri 2025-02-28 15:05:02 MSK", "StateChangeTimestampMonotonic": "420083285893", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "2", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:11:01,243 p=32126 u=digitd n=ansible | PLAY [Run keepalived services for BACKUP Haproxy] *****************************************************************************************************************************
2025-02-28 16:11:01,249 p=32126 u=digitd n=ansible | TASK [Copy conf on BACKUP HAProxy node] ***************************************************************************************************************************************
2025-02-28 16:11:02,130 p=32126 u=digitd n=ansible | changed: [db.test1.lan] => {"changed": true, "checksum": "525508afcada704b949ed1aaa9e0840d11bd6a64", "dest": "/etc/keepalived/keepalived.conf", "gid": 0, "group": "root", "md5sum": "fa6638d71b40284902d93f9d508df66a", "mode": "0644", "owner": "root", "size": 264, "src": "/root/.ansible/tmp/ansible-tmp-1740748261.28355-1715-184481652511560/source", "state": "file", "uid": 0}
2025-02-28 16:11:02,132 p=32126 u=digitd n=ansible | TASK [Ensure or run keepalived service for BACKUP] ****************************************************************************************************************************
2025-02-28 16:11:04,180 p=32126 u=digitd n=ansible | changed: [db.test1.lan] => {"changed": true, "enabled": true, "name": "keepalived", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:11:01 MSK", "ActiveEnterTimestampMonotonic": "424042086612", "ActiveExitTimestamp": "Fri 2025-02-28 16:11:00 MSK", "ActiveExitTimestampMonotonic": "424041044237", "ActiveState": "active", "After": "systemd-journald.socket network-online.target system.slice sysinit.target basic.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:11:01 MSK", "AssertTimestampMonotonic": "424042057723", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "17947000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:11:01 MSK", "ConditionTimestampMonotonic": "424042057685", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/keepalived.service", "ControlGroupId": "10186", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "Keepalive Daemon (LVS and VRRP)", "DevicePolicy": "auto", "Documentation": "\"man:keepalived(8)\" \"man:keepalived.conf(5)\" \"man:genhash(1)\" https://keepalived.org", "DynamicUser": "no", "EnvironmentFiles": "/etc/default/keepalived (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "10213", "ExecMainStartTimestamp": "Fri 2025-02-28 16:11:01 MSK", "ExecMainStartTimestampMonotonic": "424042064426", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/sbin/keepalived ; argv[]=/usr/sbin/keepalived --dont-fork $DAEMON_ARGS ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:11:01 MSK] ; stop_time=[n/a] ; pid=10213 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/sbin/keepalived ; argv[]=/usr/sbin/keepalived --dont-fork $DAEMON_ARGS ; flags= ; start_time=[Fri 2025-02-28 16:11:01 MSK] ; stop_time=[n/a] ; pid=10213 ; code=(null) ; status=0/0 }", "ExitType": "main", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/keepalived.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "keepalived.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:11:01 MSK", "InactiveEnterTimestampMonotonic": "424042056609", "InactiveExitTimestamp": "Fri 2025-02-28 16:11:01 MSK", "InactiveExitTimestampMonotonic": "424042068396", "InvocationID": "2a43af77bf904512ba05f654a23e07aa", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "10213", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "2076672", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "keepalived.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "no", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Fri 2025-02-28 16:11:01 MSK", "StateChangeTimestampMonotonic": "424042086612", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "2", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:11:04,186 p=32126 u=digitd n=ansible | PLAY RECAP ********************************************************************************************************************************************************************
2025-02-28 16:11:04,186 p=32126 u=digitd n=ansible | db.etcd.lan                : ok=11   changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-28 16:11:04,186 p=32126 u=digitd n=ansible | db.master.lan              : ok=23   changed=7    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-28 16:11:04,186 p=32126 u=digitd n=ansible | db.slave.lan               : ok=21   changed=7    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-28 16:11:04,186 p=32126 u=digitd n=ansible | db.test.lan                : ok=4    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-28 16:11:04,187 p=32126 u=digitd n=ansible | db.test1.lan               : ok=6    changed=5    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-28 16:13:57,586 p=2891 u=digitd n=ansible | PLAY [Install PostgreSQL and check status] ************************************************************************************************************************************
2025-02-28 16:13:57,599 p=2891 u=digitd n=ansible | TASK [Install PostgreSQL] *****************************************************************************************************************************************************
2025-02-28 16:13:59,948 p=2891 u=digitd n=ansible |  [ERROR]: User interrupted execution

2025-02-28 16:14:03,353 p=2989 u=digitd n=ansible | ansible-playbook [core 2.14.18]
  config file = /home/digitd/travelata_test/ansible/ansible.cfg
  configured module search path = ['/home/digitd/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python3/dist-packages/ansible
  ansible collection location = /home/digitd/.ansible/collections:/usr/share/ansible/collections
  executable location = /usr/bin/ansible-playbook
  python version = 3.11.2 (main, Sep 14 2024, 03:00:30) [GCC 12.2.0] (/usr/bin/python3)
  jinja version = 3.1.2
  libyaml = True
2025-02-28 16:14:03,353 p=2989 u=digitd n=ansible | Using /home/digitd/travelata_test/ansible/ansible.cfg as config file
2025-02-28 16:14:03,489 p=2989 u=digitd n=ansible | Skipping callback 'default', as we already have a stdout callback.
2025-02-28 16:14:03,489 p=2989 u=digitd n=ansible | Skipping callback 'minimal', as we already have a stdout callback.
2025-02-28 16:14:03,489 p=2989 u=digitd n=ansible | Skipping callback 'oneline', as we already have a stdout callback.
2025-02-28 16:14:03,489 p=2989 u=digitd n=ansible | PLAYBOOK: start_services.yml **************************************************************************************************************************************************
2025-02-28 16:14:03,489 p=2989 u=digitd n=ansible | 15 plays in ./start_services.yml
2025-02-28 16:14:03,490 p=2989 u=digitd n=ansible | PLAY [Install PostgreSQL and check status] ************************************************************************************************************************************
2025-02-28 16:14:03,502 p=2989 u=digitd n=ansible | TASK [Install PostgreSQL] *****************************************************************************************************************************************************
2025-02-28 16:14:06,107 p=2989 u=digitd n=ansible | ok: [db.slave.lan] => {"ansible_facts": {"discovered_interpreter_python": "/usr/bin/python3.11"}, "cache_update_time": 1740733242, "cache_updated": false, "changed": false}
2025-02-28 16:14:06,243 p=2989 u=digitd n=ansible | ok: [db.master.lan] => {"ansible_facts": {"discovered_interpreter_python": "/usr/bin/python3.11"}, "cache_update_time": 1740743388, "cache_updated": false, "changed": false}
2025-02-28 16:14:06,247 p=2989 u=digitd n=ansible | TASK [Check service] **********************************************************************************************************************************************************
2025-02-28 16:14:09,489 p=2989 u=digitd n=ansible | ok: [db.slave.lan] => {"changed": false, "enabled": false, "name": "postgresql", "state": "stopped", "status": {"ActiveEnterTimestampMonotonic": "0", "ActiveExitTimestampMonotonic": "0", "ActiveState": "inactive", "After": "basic.target postgresql@15-main.service systemd-journald.socket system.slice sysinit.target", "AllowIsolate": "no", "AssertResult": "no", "AssertTimestampMonotonic": "0", "Before": "shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "[not set]", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "no", "ConditionTimestampMonotonic": "0", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ConsistsOf": "postgresql@15-main.service", "ControlGroupId": "0", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "PostgreSQL RDBMS", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainHandoffTimestampMonotonic": "0", "ExecMainPID": "0", "ExecMainStartTimestampMonotonic": "0", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/postgresql.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "postgresql.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestampMonotonic": "0", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "591593472", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "[not set]", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "[not set]", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "[not set]", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "postgresql.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "PropagatesReloadTo": "postgresql@15-main.service", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "yes", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "no", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "no", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestampMonotonic": "0", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "oneshot", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "disabled", "UtmpMode": "init", "Wants": "postgresql@15-main.service", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "infinity"}}
2025-02-28 16:14:09,505 p=2989 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "enabled": false, "name": "postgresql", "state": "stopped", "status": {"ActiveEnterTimestampMonotonic": "0", "ActiveExitTimestampMonotonic": "0", "ActiveState": "inactive", "After": "postgresql@15-main.service systemd-journald.socket system.slice sysinit.target basic.target", "AllowIsolate": "no", "AssertResult": "no", "AssertTimestampMonotonic": "0", "Before": "shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "[not set]", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "no", "ConditionTimestampMonotonic": "0", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ConsistsOf": "postgresql@15-main.service", "ControlGroupId": "0", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "PostgreSQL RDBMS", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainHandoffTimestampMonotonic": "0", "ExecMainPID": "0", "ExecMainStartTimestampMonotonic": "0", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/bin/true ; argv[]=/bin/true ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/bin/true ; argv[]=/bin/true ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/postgresql.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "postgresql.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestampMonotonic": "0", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "616595456", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "[not set]", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "[not set]", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "[not set]", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "postgresql.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "PropagatesReloadTo": "postgresql@15-main.service", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "yes", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "no", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "no", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestampMonotonic": "0", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "oneshot", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "disabled", "UtmpMode": "init", "Wants": "postgresql@15-main.service", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "infinity"}}
2025-02-28 16:14:09,523 p=2989 u=digitd n=ansible | PLAY [Configure etcd on the MASTER database machine] **************************************************************************************************************************
2025-02-28 16:14:09,528 p=2989 u=digitd n=ansible | TASK [Copy etcd file] *********************************************************************************************************************************************************
2025-02-28 16:14:10,502 p=2989 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "checksum": "e2fedb4e1237da20f4c73b66ef8b9893cbaebc0f", "dest": "/etc/default/etcd", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/default/etcd", "size": 1666, "state": "file", "uid": 0}
2025-02-28 16:14:10,505 p=2989 u=digitd n=ansible | TASK [Create data directory] **************************************************************************************************************************************************
2025-02-28 16:14:10,965 p=2989 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "gid": 111, "group": "etcd", "mode": "0770", "owner": "etcd", "path": "/var/lib/etcd", "size": 4096, "state": "directory", "uid": 103}
2025-02-28 16:14:10,968 p=2989 u=digitd n=ansible | TASK [Install etcd] ***********************************************************************************************************************************************************
2025-02-28 16:14:12,660 p=2989 u=digitd n=ansible | ok: [db.master.lan] => {"cache_update_time": 1740743388, "cache_updated": false, "changed": false}
2025-02-28 16:14:12,662 p=2989 u=digitd n=ansible | TASK [Clear old values of the cluster in base] ********************************************************************************************************************************
2025-02-28 16:14:13,758 p=2989 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "cmd": ["etcdctl", "del", "", "--prefix"], "delta": "0:00:00.428578", "end": "2025-02-28 16:14:13.851045", "msg": "", "rc": 0, "start": "2025-02-28 16:14:13.422467", "stderr": "", "stderr_lines": [], "stdout": "6", "stdout_lines": ["6"]}
2025-02-28 16:14:13,761 p=2989 u=digitd n=ansible | TASK [Restart etcd service] ***************************************************************************************************************************************************
2025-02-28 16:14:37,107 p=2989 u=digitd n=ansible | changed: [db.master.lan] => {"changed": true, "enabled": true, "name": "etcd", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:10:45 MSK", "ActiveEnterTimestampMonotonic": "411391770116", "ActiveExitTimestamp": "Fri 2025-02-28 16:10:27 MSK", "ActiveExitTimestampMonotonic": "411373609397", "ActiveState": "active", "After": "network.target system.slice basic.target sysinit.target systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:10:35 MSK", "AssertTimestampMonotonic": "411382096570", "Before": "multi-user.target etcd-discovery.service shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "2415923000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:10:35 MSK", "ConditionTimestampMonotonic": "411382096567", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/etcd.service", "ControlGroupId": "14613", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "etcd - highly-available key value store", "DevicePolicy": "auto", "Documentation": "https://etcd.io/docs man:etcd", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "Environment": "DAEMON_ARGS= ETCD_NAME=dbmaster ETCD_DATA_DIR=/var/lib/etcd/default", "EnvironmentFiles": "/etc/default/etcd (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainHandoffTimestamp": "Fri 2025-02-28 16:10:35 MSK", "ExecMainHandoffTimestampMonotonic": "411382116734", "ExecMainPID": "476567", "ExecMainStartTimestamp": "Fri 2025-02-28 16:10:35 MSK", "ExecMainStartTimestampMonotonic": "411382097414", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:10:35 MSK] ; stop_time=[n/a] ; pid=476567 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; flags= ; start_time=[Fri 2025-02-28 16:10:35 MSK] ; stop_time=[n/a] ; pid=476567 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/etcd.service", "FreezerState": "running", "GID": "111", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "etcd.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:10:28 MSK", "InactiveEnterTimestampMonotonic": "411374804219", "InactiveExitTimestamp": "Fri 2025-02-28 16:10:35 MSK", "InactiveExitTimestampMonotonic": "411382108089", "InvocationID": "b1d0778060934a199d731cfc89c8c9ca", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "65536", "LimitNOFILESoft": "65536", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "476567", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "586711040", "MemoryCurrent": "61730816", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "63451136", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "2166784", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "0", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "etcd.service etcd2.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-abnormal", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Fri 2025-02-28 16:10:45 MSK", "StateChangeTimestampMonotonic": "411391770116", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "9", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "103", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "etcd", "UtmpMode": "init", "WantedBy": "etcd-discovery.service multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:14:37,114 p=2989 u=digitd n=ansible | PLAY [Configure etcd on the SLAVE database machine] ***************************************************************************************************************************
2025-02-28 16:14:37,120 p=2989 u=digitd n=ansible | TASK [Copy etcd file] *********************************************************************************************************************************************************
2025-02-28 16:14:37,973 p=2989 u=digitd n=ansible | ok: [db.slave.lan] => {"changed": false, "checksum": "4fb16fe2a7b6f713b4a92c9446a9dc1c39660a21", "dest": "/etc/default/etcd", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/default/etcd", "size": 1584, "state": "file", "uid": 0}
2025-02-28 16:14:37,975 p=2989 u=digitd n=ansible | TASK [Install etcd] ***********************************************************************************************************************************************************
2025-02-28 16:14:39,832 p=2989 u=digitd n=ansible | ok: [db.slave.lan] => {"cache_update_time": 1740733242, "cache_updated": false, "changed": false}
2025-02-28 16:14:39,834 p=2989 u=digitd n=ansible | TASK [Clear old values of the cluster in base] ********************************************************************************************************************************
2025-02-28 16:14:40,613 p=2989 u=digitd n=ansible | ok: [db.slave.lan] => {"changed": false, "cmd": ["etcdctl", "del", "", "--prefix"], "delta": "0:00:00.288979", "end": "2025-02-28 16:14:40.711822", "msg": "", "rc": 0, "start": "2025-02-28 16:14:40.422843", "stderr": "", "stderr_lines": [], "stdout": "6", "stdout_lines": ["6"]}
2025-02-28 16:14:40,616 p=2989 u=digitd n=ansible | TASK [Restart etcd service] ***************************************************************************************************************************************************
2025-02-28 16:14:45,203 p=2989 u=digitd n=ansible | changed: [db.slave.lan] => {"changed": true, "enabled": true, "name": "etcd", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:10:45 MSK", "ActiveEnterTimestampMonotonic": "411332852552", "ActiveExitTimestamp": "Fri 2025-02-28 16:10:27 MSK", "ActiveExitTimestampMonotonic": "411314656794", "ActiveState": "active", "After": "basic.target network.target system.slice systemd-journald.socket sysinit.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:10:35 MSK", "AssertTimestampMonotonic": "411323173179", "Before": "etcd-discovery.service multi-user.target shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "2919937000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:10:35 MSK", "ConditionTimestampMonotonic": "411323173177", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/etcd.service", "ControlGroupId": "154839", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "etcd - highly-available key value store", "DevicePolicy": "auto", "Documentation": "https://etcd.io/docs man:etcd", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "Environment": "DAEMON_ARGS= ETCD_NAME=slavedb ETCD_DATA_DIR=/var/lib/etcd/default", "EnvironmentFiles": "/etc/default/etcd (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainHandoffTimestamp": "Fri 2025-02-28 16:10:35 MSK", "ExecMainHandoffTimestampMonotonic": "411323196663", "ExecMainPID": "441979", "ExecMainStartTimestamp": "Fri 2025-02-28 16:10:35 MSK", "ExecMainStartTimestampMonotonic": "411323174018", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:10:35 MSK] ; stop_time=[n/a] ; pid=441979 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; flags= ; start_time=[Fri 2025-02-28 16:10:35 MSK] ; stop_time=[n/a] ; pid=441979 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/etcd.service", "FreezerState": "running", "GID": "112", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "etcd.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:10:34 MSK", "InactiveEnterTimestampMonotonic": "411321882938", "InactiveExitTimestamp": "Fri 2025-02-28 16:10:35 MSK", "InactiveExitTimestampMonotonic": "411323184359", "InvocationID": "882243227af843d2a048406eac177ef5", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "65536", "LimitNOFILESoft": "65536", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "441979", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "608780288", "MemoryCurrent": "52842496", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "53112832", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "0", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "0", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "etcd.service etcd2.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "on-abnormal", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Fri 2025-02-28 16:10:45 MSK", "StateChangeTimestampMonotonic": "411332852552", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "8", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "104", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "etcd", "UtmpMode": "init", "WantedBy": "etcd-discovery.service multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:14:45,211 p=2989 u=digitd n=ansible | PLAY [Configure etcd on the another ETCD machine] *****************************************************************************************************************************
2025-02-28 16:14:45,218 p=2989 u=digitd n=ansible | TASK [Copy etcd file] *********************************************************************************************************************************************************
2025-02-28 16:14:46,449 p=2989 u=digitd n=ansible | ok: [db.etcd.lan] => {"ansible_facts": {"discovered_interpreter_python": "/usr/bin/python3"}, "changed": false, "checksum": "60484e138bba76cd1caa22bfb1cb13542ef696b1", "dest": "/etc/default/etcd", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/default/etcd", "size": 1570, "state": "file", "uid": 0}
2025-02-28 16:14:46,452 p=2989 u=digitd n=ansible | TASK [Install etcd] ***********************************************************************************************************************************************************
2025-02-28 16:14:48,328 p=2989 u=digitd n=ansible | ok: [db.etcd.lan] => {"cache_update_time": 1740743468, "cache_updated": false, "changed": false}
2025-02-28 16:14:48,330 p=2989 u=digitd n=ansible | TASK [Clear old values of the cluster in base] ********************************************************************************************************************************
2025-02-28 16:14:48,942 p=2989 u=digitd n=ansible | ok: [db.etcd.lan] => {"changed": false, "cmd": ["etcdctl", "del", "", "--prefix"], "delta": "0:00:00.164649", "end": "2025-02-28 16:14:49.036415", "msg": "", "rc": 0, "start": "2025-02-28 16:14:48.871766", "stderr": "", "stderr_lines": [], "stdout": "3", "stdout_lines": ["3"]}
2025-02-28 16:14:48,944 p=2989 u=digitd n=ansible | TASK [Restart etcd service] ***************************************************************************************************************************************************
2025-02-28 16:14:55,093 p=2989 u=digitd n=ansible | changed: [db.etcd.lan] => {"changed": true, "enabled": true, "name": "etcd", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:10:45 MSK", "ActiveEnterTimestampMonotonic": "238845872482", "ActiveExitTimestamp": "Fri 2025-02-28 16:10:27 MSK", "ActiveExitTimestampMonotonic": "238827487663", "ActiveState": "active", "After": "systemd-journald.socket system.slice basic.target network.target sysinit.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:10:35 MSK", "AssertTimestampMonotonic": "238836088476", "Before": "multi-user.target etcd-discovery.service shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "3670520000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:10:35 MSK", "ConditionTimestampMonotonic": "238836088473", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/etcd.service", "ControlGroupId": "60281", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "etcd - highly-available key value store", "DevicePolicy": "auto", "Documentation": "https://etcd.io/docs man:etcd", "DynamicUser": "no", "EffectiveCPUs": "0", "EffectiveMemoryNodes": "0", "Environment": "DAEMON_ARGS= ETCD_NAME=etcd ETCD_DATA_DIR=/var/lib/etcd/default", "EnvironmentFiles": "/etc/default/etcd (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "19092", "ExecMainStartTimestamp": "Fri 2025-02-28 16:10:35 MSK", "ExecMainStartTimestampMonotonic": "238836096187", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:10:35 MSK] ; stop_time=[n/a] ; pid=19092 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; flags= ; start_time=[Fri 2025-02-28 16:10:35 MSK] ; stop_time=[n/a] ; pid=19092 ; code=(null) ; status=0/0 }", "ExitType": "main", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/etcd.service", "FreezerState": "running", "GID": "111", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "etcd.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:10:27 MSK", "InactiveEnterTimestampMonotonic": "238827689271", "InactiveExitTimestamp": "Fri 2025-02-28 16:10:35 MSK", "InactiveExitTimestampMonotonic": "238836096468", "InvocationID": "25728ad235c040b2ab3b88d4139a8b40", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "65536", "LimitNOFILESoft": "65536", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "19092", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "56221696", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "etcd.service etcd2.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-abnormal", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Fri 2025-02-28 16:10:45 MSK", "StateChangeTimestampMonotonic": "238845872482", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "9", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "103", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "etcd", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:14:55,095 p=2989 u=digitd n=ansible | TASK [Get status of etcd] *****************************************************************************************************************************************************
2025-02-28 16:15:00,211 p=2989 u=digitd n=ansible | ok: [db.etcd.lan] => {"changed": false, "cmd": ["etcdctl", "--cluster=true", "endpoint", "status", "--write-out=table"], "delta": "0:00:04.670055", "end": "2025-02-28 16:15:00.319675", "msg": "", "rc": 0, "start": "2025-02-28 16:14:55.649620", "stderr": "", "stderr_lines": [], "stdout": "+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+\n|         ENDPOINT         |        ID        | VERSION | DB SIZE | IS LEADER | IS LEARNER | RAFT TERM | RAFT INDEX | RAFT APPLIED INDEX | ERRORS |\n+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+\n| http://192.168.2.16:2379 | 81cab37376d1dc8e |  3.5.16 |  135 kB |      true |      false |      1568 |      33631 |              33631 |        |\n| http://192.168.2.18:2379 | ac75029e92c4132b |  3.4.23 |  135 kB |     false |      false |      1568 |      33631 |              33631 |        |\n| http://192.168.2.17:2379 | c0cf9bdfef3320b4 |  3.5.16 |  135 kB |     false |      false |      1568 |      33631 |              33631 |        |\n+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+", "stdout_lines": ["+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+", "|         ENDPOINT         |        ID        | VERSION | DB SIZE | IS LEADER | IS LEARNER | RAFT TERM | RAFT INDEX | RAFT APPLIED INDEX | ERRORS |", "+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+", "| http://192.168.2.16:2379 | 81cab37376d1dc8e |  3.5.16 |  135 kB |      true |      false |      1568 |      33631 |              33631 |        |", "| http://192.168.2.18:2379 | ac75029e92c4132b |  3.4.23 |  135 kB |     false |      false |      1568 |      33631 |              33631 |        |", "| http://192.168.2.17:2379 | c0cf9bdfef3320b4 |  3.5.16 |  135 kB |     false |      false |      1568 |      33631 |              33631 |        |", "+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+"]}
2025-02-28 16:15:00,213 p=2989 u=digitd n=ansible | TASK [Print it] ***************************************************************************************************************************************************************
2025-02-28 16:15:00,228 p=2989 u=digitd n=ansible | ok: [db.etcd.lan] => {
    "msg": [
        "+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+",
        "|         ENDPOINT         |        ID        | VERSION | DB SIZE | IS LEADER | IS LEARNER | RAFT TERM | RAFT INDEX | RAFT APPLIED INDEX | ERRORS |",
        "+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+",
        "| http://192.168.2.16:2379 | 81cab37376d1dc8e |  3.5.16 |  135 kB |      true |      false |      1568 |      33631 |              33631 |        |",
        "| http://192.168.2.18:2379 | ac75029e92c4132b |  3.4.23 |  135 kB |     false |      false |      1568 |      33631 |              33631 |        |",
        "| http://192.168.2.17:2379 | c0cf9bdfef3320b4 |  3.5.16 |  135 kB |     false |      false |      1568 |      33631 |              33631 |        |",
        "+--------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+"
    ]
}
2025-02-28 16:15:00,232 p=2989 u=digitd n=ansible | TASK [Get etcd members] *******************************************************************************************************************************************************
2025-02-28 16:15:00,693 p=2989 u=digitd n=ansible | ok: [db.etcd.lan] => {"changed": false, "cmd": ["etcdctl", "member", "list", "--write-out=table"], "delta": "0:00:00.021352", "end": "2025-02-28 16:15:00.812342", "msg": "", "rc": 0, "start": "2025-02-28 16:15:00.790990", "stderr": "", "stderr_lines": [], "stdout": "+------------------+---------+----------+--------------------------+--------------------------+------------+\n|        ID        | STATUS  |   NAME   |        PEER ADDRS        |       CLIENT ADDRS       | IS LEARNER |\n+------------------+---------+----------+--------------------------+--------------------------+------------+\n| 81cab37376d1dc8e | started | masterpg | http://192.168.2.16:2380 | http://192.168.2.16:2379 |      false |\n| ac75029e92c4132b | started |   etcdpg | http://192.168.2.18:2380 | http://192.168.2.18:2379 |      false |\n| c0cf9bdfef3320b4 | started |  slavepg | http://192.168.2.17:2380 | http://192.168.2.17:2379 |      false |\n+------------------+---------+----------+--------------------------+--------------------------+------------+", "stdout_lines": ["+------------------+---------+----------+--------------------------+--------------------------+------------+", "|        ID        | STATUS  |   NAME   |        PEER ADDRS        |       CLIENT ADDRS       | IS LEARNER |", "+------------------+---------+----------+--------------------------+--------------------------+------------+", "| 81cab37376d1dc8e | started | masterpg | http://192.168.2.16:2380 | http://192.168.2.16:2379 |      false |", "| ac75029e92c4132b | started |   etcdpg | http://192.168.2.18:2380 | http://192.168.2.18:2379 |      false |", "| c0cf9bdfef3320b4 | started |  slavepg | http://192.168.2.17:2380 | http://192.168.2.17:2379 |      false |", "+------------------+---------+----------+--------------------------+--------------------------+------------+"]}
2025-02-28 16:15:00,695 p=2989 u=digitd n=ansible | TASK [Print it] ***************************************************************************************************************************************************************
2025-02-28 16:15:00,709 p=2989 u=digitd n=ansible | ok: [db.etcd.lan] => {
    "msg": [
        "+------------------+---------+----------+--------------------------+--------------------------+------------+",
        "|        ID        | STATUS  |   NAME   |        PEER ADDRS        |       CLIENT ADDRS       | IS LEARNER |",
        "+------------------+---------+----------+--------------------------+--------------------------+------------+",
        "| 81cab37376d1dc8e | started | masterpg | http://192.168.2.16:2380 | http://192.168.2.16:2379 |      false |",
        "| ac75029e92c4132b | started |   etcdpg | http://192.168.2.18:2380 | http://192.168.2.18:2379 |      false |",
        "| c0cf9bdfef3320b4 | started |  slavepg | http://192.168.2.17:2380 | http://192.168.2.17:2379 |      false |",
        "+------------------+---------+----------+--------------------------+--------------------------+------------+"
    ]
}
2025-02-28 16:15:00,721 p=2989 u=digitd n=ansible | PLAY [Copy patroni config (MASTER)] *******************************************************************************************************************************************
2025-02-28 16:15:00,728 p=2989 u=digitd n=ansible | TASK [Create directory] *******************************************************************************************************************************************************
2025-02-28 16:15:01,184 p=2989 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/etc/patroni", "size": 4096, "state": "directory", "uid": 0}
2025-02-28 16:15:01,186 p=2989 u=digitd n=ansible | TASK [Copy the patroni configuration file to the MASTER] **********************************************************************************************************************
2025-02-28 16:15:01,972 p=2989 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "checksum": "d539f05dee13bd527e251e234f60249b97932999", "dest": "/etc/patroni/config.yml", "gid": 110, "group": "postgres", "mode": "0750", "owner": "postgres", "path": "/etc/patroni/config.yml", "size": 3575, "state": "file", "uid": 102}
2025-02-28 16:15:01,979 p=2989 u=digitd n=ansible | PLAY [Copy patroni config (SLAVE)] ********************************************************************************************************************************************
2025-02-28 16:15:01,989 p=2989 u=digitd n=ansible | TASK [Create directory] *******************************************************************************************************************************************************
2025-02-28 16:15:02,454 p=2989 u=digitd n=ansible | ok: [db.slave.lan] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/etc/patroni", "size": 4096, "state": "directory", "uid": 0}
2025-02-28 16:15:02,456 p=2989 u=digitd n=ansible | TASK [Copy the patroni configuration file to the REPLICA] *********************************************************************************************************************
2025-02-28 16:15:03,257 p=2989 u=digitd n=ansible | ok: [db.slave.lan] => {"changed": false, "checksum": "ad9f4bcdc347e99b30b1da7dee192a0e2903636c", "dest": "/etc/patroni/config.yml", "gid": 111, "group": "postgres", "mode": "0750", "owner": "postgres", "path": "/etc/patroni/config.yml", "size": 3370, "state": "file", "uid": 103}
2025-02-28 16:15:03,264 p=2989 u=digitd n=ansible | PLAY [Configure Patroni] ******************************************************************************************************************************************************
2025-02-28 16:15:03,273 p=2989 u=digitd n=ansible | TASK [Install patroni package] ************************************************************************************************************************************************
2025-02-28 16:15:05,097 p=2989 u=digitd n=ansible | ok: [db.master.lan] => {"cache_update_time": 1740743388, "cache_updated": false, "changed": false}
2025-02-28 16:15:05,251 p=2989 u=digitd n=ansible | ok: [db.slave.lan] => {"cache_update_time": 1740733242, "cache_updated": false, "changed": false}
2025-02-28 16:15:05,254 p=2989 u=digitd n=ansible | TASK [Create unnecessary directory for certs] *********************************************************************************************************************************
2025-02-28 16:15:05,644 p=2989 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "gid": 110, "group": "postgres", "mode": "0750", "owner": "postgres", "path": "/var/lib/postgresql/15/ssl", "size": 4096, "state": "directory", "uid": 102}
2025-02-28 16:15:06,529 p=2989 u=digitd n=ansible | ok: [db.slave.lan] => {"changed": false, "gid": 111, "group": "postgres", "mode": "0750", "owner": "postgres", "path": "/var/lib/postgresql/15/ssl", "size": 4096, "state": "directory", "uid": 103}
2025-02-28 16:15:06,531 p=2989 u=digitd n=ansible | TASK [Create data directory for database] *************************************************************************************************************************************
2025-02-28 16:15:06,969 p=2989 u=digitd n=ansible | changed: [db.master.lan] => {"changed": true, "gid": 110, "group": "postgres", "mode": "0750", "owner": "postgres", "path": "/var/lib/postgresql/15/data", "size": 4096, "state": "directory", "uid": 102}
2025-02-28 16:15:07,801 p=2989 u=digitd n=ansible | changed: [db.slave.lan] => {"changed": true, "gid": 111, "group": "postgres", "mode": "0750", "owner": "postgres", "path": "/var/lib/postgresql/15/data", "size": 4096, "state": "directory", "uid": 103}
2025-02-28 16:15:07,803 p=2989 u=digitd n=ansible | TASK [Copy certificates on the machines] **************************************************************************************************************************************
2025-02-28 16:15:13,245 p=2989 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "dest": "/var/lib/postgresql/15/ssl/", "src": "/home/digitd/travelata_test/ansible/../certs/"}
2025-02-28 16:15:17,472 p=2989 u=digitd n=ansible | ok: [db.slave.lan] => {"changed": false, "dest": "/var/lib/postgresql/15/ssl/", "src": "/home/digitd/travelata_test/ansible/../certs/"}
2025-02-28 16:15:17,475 p=2989 u=digitd n=ansible | TASK [Start services] *********************************************************************************************************************************************************
2025-02-28 16:15:42,713 p=2989 u=digitd n=ansible | changed: [db.master.lan] => {"changed": true, "enabled": true, "name": "patroni", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:10:47 MSK", "ActiveEnterTimestampMonotonic": "411393992325", "ActiveExitTimestamp": "Fri 2025-02-28 16:10:15 MSK", "ActiveExitTimestampMonotonic": "411361737603", "ActiveState": "active", "After": "system.slice network.target systemd-journald.socket basic.target sysinit.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:10:47 MSK", "AssertTimestampMonotonic": "411393985918", "Before": "multi-user.target shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "3474350000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:10:47 MSK", "ConditionTimestampMonotonic": "411393985905", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/patroni.service", "ControlGroupId": "14652", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "Runners to orchestrate a high-availability PostgreSQL", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "EnvironmentFiles": "/etc/patroni_env.conf (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainHandoffTimestamp": "Fri 2025-02-28 16:10:47 MSK", "ExecMainHandoffTimestampMonotonic": "411394008815", "ExecMainPID": "476658", "ExecMainStartTimestamp": "Fri 2025-02-28 16:10:47 MSK", "ExecMainStartTimestampMonotonic": "411393986577", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/patroni ; argv[]=/usr/bin/patroni /etc/patroni/config.yml ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:10:47 MSK] ; stop_time=[n/a] ; pid=476658 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/patroni ; argv[]=/usr/bin/patroni /etc/patroni/config.yml ; flags= ; start_time=[Fri 2025-02-28 16:10:47 MSK] ; stop_time=[n/a] ; pid=476658 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/patroni.service", "FreezerState": "running", "GID": "110", "Group": "postgres", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "patroni.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:10:24 MSK", "InactiveEnterTimestampMonotonic": "411371225219", "InactiveExitTimestamp": "Fri 2025-02-28 16:10:47 MSK", "InactiveExitTimestampMonotonic": "411393992325", "InvocationID": "6b96d476c27f4a8495af5f6b2002b936", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "process", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "476658", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "590442496", "MemoryCurrent": "123396096", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "134959104", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "0", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "0", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "patroni.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-failure", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Fri 2025-02-28 16:10:47 MSK", "StateChangeTimestampMonotonic": "411393992325", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "14", "TasksMax": "1098", "TimeoutAbortUSec": "30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "102", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "postgres", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:15:48,380 p=2989 u=digitd n=ansible | changed: [db.slave.lan] => {"changed": true, "enabled": true, "name": "patroni", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:10:47 MSK", "ActiveEnterTimestampMonotonic": "411335152352", "ActiveExitTimestamp": "Fri 2025-02-28 16:10:15 MSK", "ActiveExitTimestampMonotonic": "411302808403", "ActiveState": "active", "After": "systemd-journald.socket sysinit.target basic.target network.target system.slice", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:10:47 MSK", "AssertTimestampMonotonic": "411335143237", "Before": "multi-user.target shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "5068895000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:10:47 MSK", "ConditionTimestampMonotonic": "411335143226", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/patroni.service", "ControlGroupId": "154995", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "Runners to orchestrate a high-availability PostgreSQL", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "EnvironmentFiles": "/etc/patroni_env.conf (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainHandoffTimestamp": "Fri 2025-02-28 16:10:47 MSK", "ExecMainHandoffTimestampMonotonic": "411335168718", "ExecMainPID": "442087", "ExecMainStartTimestamp": "Fri 2025-02-28 16:10:47 MSK", "ExecMainStartTimestampMonotonic": "411335144013", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/patroni ; argv[]=/usr/bin/patroni /etc/patroni/config.yml ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:10:47 MSK] ; stop_time=[n/a] ; pid=442087 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/patroni ; argv[]=/usr/bin/patroni /etc/patroni/config.yml ; flags= ; start_time=[Fri 2025-02-28 16:10:47 MSK] ; stop_time=[n/a] ; pid=442087 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/patroni.service", "FreezerState": "running", "GID": "111", "Group": "postgres", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "patroni.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:10:22 MSK", "InactiveEnterTimestampMonotonic": "411309550058", "InactiveExitTimestamp": "Fri 2025-02-28 16:10:47 MSK", "InactiveExitTimestampMonotonic": "411335152352", "InvocationID": "cd2132b1786f4f348da2ee55db05a868", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "process", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "442087", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "611811328", "MemoryCurrent": "155750400", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "162566144", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "0", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "0", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "patroni.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "on-failure", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Fri 2025-02-28 16:10:47 MSK", "StateChangeTimestampMonotonic": "411335152352", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "16", "TasksMax": "1098", "TimeoutAbortUSec": "30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "103", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "postgres", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:15:48,383 p=2989 u=digitd n=ansible | TASK [Get patronictl status] **************************************************************************************************************************************************
2025-02-28 16:15:49,643 p=2989 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "cmd": ["patronictl", "-c", "/etc/patroni/config.yml", "list"], "delta": "0:00:00.796389", "end": "2025-02-28 16:15:49.758765", "msg": "", "rc": 0, "start": "2025-02-28 16:15:48.962376", "stderr": "", "stderr_lines": [], "stdout": "+ Cluster: clusterdb (7476456845372776214) --------+----+-----------+\n| Member   | Host              | Role    | State   | TL | Lag in MB |\n+----------+-------------------+---------+---------+----+-----------+\n| masterdb | 192.168.2.16:5050 | Replica | stopped |    |   unknown |\n| slavedb  | 192.168.2.17:5050 | Leader  | stopped |    |           |\n+----------+-------------------+---------+---------+----+-----------+", "stdout_lines": ["+ Cluster: clusterdb (7476456845372776214) --------+----+-----------+", "| Member   | Host              | Role    | State   | TL | Lag in MB |", "+----------+-------------------+---------+---------+----+-----------+", "| masterdb | 192.168.2.16:5050 | Replica | stopped |    |   unknown |", "| slavedb  | 192.168.2.17:5050 | Leader  | stopped |    |           |", "+----------+-------------------+---------+---------+----+-----------+"]}
2025-02-28 16:15:51,309 p=2989 u=digitd n=ansible | ok: [db.slave.lan] => {"changed": false, "cmd": ["patronictl", "-c", "/etc/patroni/config.yml", "list"], "delta": "0:00:02.541703", "end": "2025-02-28 16:15:51.431594", "msg": "", "rc": 0, "start": "2025-02-28 16:15:48.889891", "stderr": "", "stderr_lines": [], "stdout": "+ Cluster: clusterdb (7476456845372776214) --------+----+-----------+\n| Member   | Host              | Role    | State   | TL | Lag in MB |\n+----------+-------------------+---------+---------+----+-----------+\n| masterdb | 192.168.2.16:5050 | Replica | stopped |    |   unknown |\n| slavedb  | 192.168.2.17:5050 | Leader  | stopped |    |           |\n+----------+-------------------+---------+---------+----+-----------+", "stdout_lines": ["+ Cluster: clusterdb (7476456845372776214) --------+----+-----------+", "| Member   | Host              | Role    | State   | TL | Lag in MB |", "+----------+-------------------+---------+---------+----+-----------+", "| masterdb | 192.168.2.16:5050 | Replica | stopped |    |   unknown |", "| slavedb  | 192.168.2.17:5050 | Leader  | stopped |    |           |", "+----------+-------------------+---------+---------+----+-----------+"]}
2025-02-28 16:15:51,311 p=2989 u=digitd n=ansible | TASK [Get time for Pantroni initializing] *************************************************************************************************************************************
2025-02-28 16:15:51,325 p=2989 u=digitd n=ansible | Pausing for 120 seconds
2025-02-28 16:15:51,326 p=2989 u=digitd n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2025-02-28 16:16:16,717 p=2989 u=digitd n=ansible | Press 'C' to continue the play or 'A' to abort 
2025-02-28 16:16:22,848 p=2989 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "delta": 31, "echo": true, "rc": 0, "start": "2025-02-28 16:15:51.323939", "stderr": "", "stdout": "Paused for 0.53 minutes", "stop": "2025-02-28 16:16:22.846228", "user_input": ""}
2025-02-28 16:16:22,850 p=2989 u=digitd n=ansible | TASK [Print it] ***************************************************************************************************************************************************************
2025-02-28 16:16:22,865 p=2989 u=digitd n=ansible | ok: [db.master.lan] => {
    "msg": [
        "+ Cluster: clusterdb (7476456845372776214) --------+----+-----------+",
        "| Member   | Host              | Role    | State   | TL | Lag in MB |",
        "+----------+-------------------+---------+---------+----+-----------+",
        "| masterdb | 192.168.2.16:5050 | Replica | stopped |    |   unknown |",
        "| slavedb  | 192.168.2.17:5050 | Leader  | stopped |    |           |",
        "+----------+-------------------+---------+---------+----+-----------+"
    ]
}
2025-02-28 16:16:22,874 p=2989 u=digitd n=ansible | ok: [db.slave.lan] => {
    "msg": [
        "+ Cluster: clusterdb (7476456845372776214) --------+----+-----------+",
        "| Member   | Host              | Role    | State   | TL | Lag in MB |",
        "+----------+-------------------+---------+---------+----+-----------+",
        "| masterdb | 192.168.2.16:5050 | Replica | stopped |    |   unknown |",
        "| slavedb  | 192.168.2.17:5050 | Leader  | stopped |    |           |",
        "+----------+-------------------+---------+---------+----+-----------+"
    ]
}
2025-02-28 16:16:22,885 p=2989 u=digitd n=ansible | PLAY [Stop Patroni] ***********************************************************************************************************************************************************
2025-02-28 16:16:22,892 p=2989 u=digitd n=ansible | TASK [Stop service] ***********************************************************************************************************************************************************
2025-02-28 16:16:32,179 p=2989 u=digitd n=ansible | changed: [db.master.lan] => {"changed": true, "name": "patroni", "state": "stopped", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:15:41 MSK", "ActiveEnterTimestampMonotonic": "411688171532", "ActiveExitTimestamp": "Fri 2025-02-28 16:15:23 MSK", "ActiveExitTimestampMonotonic": "411669594040", "ActiveState": "active", "After": "system.slice network.target systemd-journald.socket basic.target sysinit.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:15:41 MSK", "AssertTimestampMonotonic": "411688167188", "Before": "multi-user.target shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "2451984000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:15:41 MSK", "ConditionTimestampMonotonic": "411688167165", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/patroni.service", "ControlGroupId": "14835", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "Runners to orchestrate a high-availability PostgreSQL", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "EnvironmentFiles": "/etc/patroni_env.conf (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainHandoffTimestamp": "Fri 2025-02-28 16:15:43 MSK", "ExecMainHandoffTimestampMonotonic": "411689269472", "ExecMainPID": "478302", "ExecMainStartTimestamp": "Fri 2025-02-28 16:15:41 MSK", "ExecMainStartTimestampMonotonic": "411688169163", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/patroni ; argv[]=/usr/bin/patroni /etc/patroni/config.yml ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:15:41 MSK] ; stop_time=[n/a] ; pid=478302 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/patroni ; argv[]=/usr/bin/patroni /etc/patroni/config.yml ; flags= ; start_time=[Fri 2025-02-28 16:15:41 MSK] ; stop_time=[n/a] ; pid=478302 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/patroni.service", "FreezerState": "running", "GID": "110", "Group": "postgres", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "patroni.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:15:41 MSK", "InactiveEnterTimestampMonotonic": "411688030720", "InactiveExitTimestamp": "Fri 2025-02-28 16:15:41 MSK", "InactiveExitTimestampMonotonic": "411688171532", "InvocationID": "ca1d08c29cc5491bb97ea10f3a83eee3", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "process", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "478302", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "621694976", "MemoryCurrent": "104808448", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "108494848", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "0", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "0", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "patroni.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-failure", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Fri 2025-02-28 16:15:41 MSK", "StateChangeTimestampMonotonic": "411688171532", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "14", "TasksMax": "1098", "TimeoutAbortUSec": "30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "102", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "postgres", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:16:48,732 p=2989 u=digitd n=ansible | changed: [db.slave.lan] => {"changed": true, "name": "patroni", "state": "stopped", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:15:48 MSK", "ActiveEnterTimestampMonotonic": "411635796604", "ActiveExitTimestamp": "Fri 2025-02-28 16:15:19 MSK", "ActiveExitTimestampMonotonic": "411606605180", "ActiveState": "active", "After": "systemd-journald.socket sysinit.target basic.target network.target system.slice", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:15:48 MSK", "AssertTimestampMonotonic": "411635793195", "Before": "multi-user.target shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "2278863000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:15:48 MSK", "ConditionTimestampMonotonic": "411635793178", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/patroni.service", "ControlGroupId": "157891", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "Runners to orchestrate a high-availability PostgreSQL", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "EnvironmentFiles": "/etc/patroni_env.conf (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainHandoffTimestamp": "Fri 2025-02-28 16:15:48 MSK", "ExecMainHandoffTimestampMonotonic": "411635824622", "ExecMainPID": "444196", "ExecMainStartTimestamp": "Fri 2025-02-28 16:15:48 MSK", "ExecMainStartTimestampMonotonic": "411635794121", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/patroni ; argv[]=/usr/bin/patroni /etc/patroni/config.yml ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:15:48 MSK] ; stop_time=[n/a] ; pid=444196 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/patroni ; argv[]=/usr/bin/patroni /etc/patroni/config.yml ; flags= ; start_time=[Fri 2025-02-28 16:15:48 MSK] ; stop_time=[n/a] ; pid=444196 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/patroni.service", "FreezerState": "running", "GID": "111", "Group": "postgres", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "patroni.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:15:48 MSK", "InactiveEnterTimestampMonotonic": "411635784222", "InactiveExitTimestamp": "Fri 2025-02-28 16:15:48 MSK", "InactiveExitTimestampMonotonic": "411635796604", "InvocationID": "22de219a1b124dbb92a268e2057d2ff1", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "process", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "444196", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "617615360", "MemoryCurrent": "88240128", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "93102080", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "0", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "0", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "patroni.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "on-failure", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Fri 2025-02-28 16:15:48 MSK", "StateChangeTimestampMonotonic": "411635796604", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "17", "TasksMax": "1098", "TimeoutAbortUSec": "30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "103", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "postgres", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:16:48,743 p=2989 u=digitd n=ansible | PLAY [Clear values from WAL] **************************************************************************************************************************************************
2025-02-28 16:16:48,757 p=2989 u=digitd n=ansible | TASK [Clear old values of the cluster in base] ********************************************************************************************************************************
2025-02-28 16:16:49,426 p=2989 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "cmd": ["etcdctl", "del", "", "--prefix"], "delta": "0:00:00.225208", "end": "2025-02-28 16:16:49.536513", "msg": "", "rc": 0, "start": "2025-02-28 16:16:49.311305", "stderr": "", "stderr_lines": [], "stdout": "6", "stdout_lines": ["6"]}
2025-02-28 16:16:52,096 p=2989 u=digitd n=ansible | ok: [db.etcd.lan] => {"changed": false, "cmd": ["etcdctl", "del", "", "--prefix"], "delta": "0:00:02.568659", "end": "2025-02-28 16:16:52.202994", "msg": "", "rc": 0, "start": "2025-02-28 16:16:49.634335", "stderr": "", "stderr_lines": [], "stdout": "0", "stdout_lines": ["0"]}
2025-02-28 16:16:53,518 p=2989 u=digitd n=ansible | ok: [db.slave.lan] => {"changed": false, "cmd": ["etcdctl", "del", "", "--prefix"], "delta": "0:00:04.215867", "end": "2025-02-28 16:16:53.615668", "msg": "", "rc": 0, "start": "2025-02-28 16:16:49.399801", "stderr": "", "stderr_lines": [], "stdout": "0", "stdout_lines": ["0"]}
2025-02-28 16:16:53,521 p=2989 u=digitd n=ansible | TASK [Stop etcd service] ******************************************************************************************************************************************************
2025-02-28 16:16:56,326 p=2989 u=digitd n=ansible | changed: [db.slave.lan] => {"changed": true, "name": "etcd", "state": "stopped", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:14:45 MSK", "ActiveEnterTimestampMonotonic": "411572584941", "ActiveExitTimestamp": "Fri 2025-02-28 16:14:41 MSK", "ActiveExitTimestampMonotonic": "411569324356", "ActiveState": "active", "After": "basic.target network.target system.slice systemd-journald.socket sysinit.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:14:43 MSK", "AssertTimestampMonotonic": "411570629721", "Before": "etcd-discovery.service multi-user.target shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1669483000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:14:43 MSK", "ConditionTimestampMonotonic": "411570629716", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/etcd.service", "ControlGroupId": "157267", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "etcd - highly-available key value store", "DevicePolicy": "auto", "Documentation": "https://etcd.io/docs man:etcd", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "Environment": "DAEMON_ARGS= ETCD_NAME=slavedb ETCD_DATA_DIR=/var/lib/etcd/default", "EnvironmentFiles": "/etc/default/etcd (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainHandoffTimestamp": "Fri 2025-02-28 16:14:43 MSK", "ExecMainHandoffTimestampMonotonic": "411570657138", "ExecMainPID": "443528", "ExecMainStartTimestamp": "Fri 2025-02-28 16:14:43 MSK", "ExecMainStartTimestampMonotonic": "411570631520", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:14:43 MSK] ; stop_time=[n/a] ; pid=443528 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; flags= ; start_time=[Fri 2025-02-28 16:14:43 MSK] ; stop_time=[n/a] ; pid=443528 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/etcd.service", "FreezerState": "running", "GID": "112", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "etcd.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:14:43 MSK", "InactiveEnterTimestampMonotonic": "411570619930", "InactiveExitTimestamp": "Fri 2025-02-28 16:14:43 MSK", "InactiveExitTimestampMonotonic": "411570637023", "InvocationID": "2811e0ea5f974972a38c0581b944dfed", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "65536", "LimitNOFILESoft": "65536", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "443528", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "680206336", "MemoryCurrent": "45527040", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "49983488", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "0", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "0", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "etcd.service etcd2.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "on-abnormal", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Fri 2025-02-28 16:14:45 MSK", "StateChangeTimestampMonotonic": "411572584941", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "8", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "104", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "etcd", "UtmpMode": "init", "WantedBy": "etcd-discovery.service multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:16:56,446 p=2989 u=digitd n=ansible | changed: [db.master.lan] => {"changed": true, "name": "etcd", "state": "stopped", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:14:37 MSK", "ActiveEnterTimestampMonotonic": "411623437959", "ActiveExitTimestamp": "Fri 2025-02-28 16:14:15 MSK", "ActiveExitTimestampMonotonic": "411601428889", "ActiveState": "active", "After": "network.target system.slice basic.target sysinit.target systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:14:25 MSK", "AssertTimestampMonotonic": "411611637630", "Before": "multi-user.target etcd-discovery.service shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "2036056000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:14:25 MSK", "ConditionTimestampMonotonic": "411611637625", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/etcd.service", "ControlGroupId": "14796", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "etcd - highly-available key value store", "DevicePolicy": "auto", "Documentation": "https://etcd.io/docs man:etcd", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "Environment": "DAEMON_ARGS= ETCD_NAME=dbmaster ETCD_DATA_DIR=/var/lib/etcd/default", "EnvironmentFiles": "/etc/default/etcd (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainHandoffTimestamp": "Fri 2025-02-28 16:14:26 MSK", "ExecMainHandoffTimestampMonotonic": "411612609578", "ExecMainPID": "477717", "ExecMainStartTimestamp": "Fri 2025-02-28 16:14:25 MSK", "ExecMainStartTimestampMonotonic": "411611639286", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:14:25 MSK] ; stop_time=[n/a] ; pid=477717 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; flags= ; start_time=[Fri 2025-02-28 16:14:25 MSK] ; stop_time=[n/a] ; pid=477717 ; code=(null) ; status=0/0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/etcd.service", "FreezerState": "running", "GID": "111", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "etcd.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:14:25 MSK", "InactiveEnterTimestampMonotonic": "411611630707", "InactiveExitTimestamp": "Fri 2025-02-28 16:14:25 MSK", "InactiveExitTimestampMonotonic": "411611641718", "InvocationID": "9febbffa302942138f19988afa81fde8", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "65536", "LimitNOFILESoft": "65536", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "477717", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "678744064", "MemoryCurrent": "73654272", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "73916416", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "0", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "0", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "etcd.service etcd2.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-abnormal", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Fri 2025-02-28 16:14:37 MSK", "StateChangeTimestampMonotonic": "411623437959", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "8", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "103", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "etcd", "UtmpMode": "init", "WantedBy": "etcd-discovery.service multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:17:01,985 p=2989 u=digitd n=ansible | changed: [db.etcd.lan] => {"changed": true, "name": "etcd", "state": "stopped", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:14:55 MSK", "ActiveEnterTimestampMonotonic": "239095426388", "ActiveExitTimestamp": "Fri 2025-02-28 16:14:50 MSK", "ActiveExitTimestampMonotonic": "239090511750", "ActiveState": "active", "After": "systemd-journald.socket system.slice basic.target network.target sysinit.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:14:51 MSK", "AssertTimestampMonotonic": "239091446211", "Before": "multi-user.target etcd-discovery.service shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1723165000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:14:51 MSK", "ConditionTimestampMonotonic": "239091446207", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/etcd.service", "ControlGroupId": "61943", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "etcd - highly-available key value store", "DevicePolicy": "auto", "Documentation": "https://etcd.io/docs man:etcd", "DynamicUser": "no", "EffectiveCPUs": "0", "EffectiveMemoryNodes": "0", "Environment": "DAEMON_ARGS= ETCD_NAME=etcd ETCD_DATA_DIR=/var/lib/etcd/default", "EnvironmentFiles": "/etc/default/etcd (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "19678", "ExecMainStartTimestamp": "Fri 2025-02-28 16:14:51 MSK", "ExecMainStartTimestampMonotonic": "239091456471", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:14:51 MSK] ; stop_time=[n/a] ; pid=19678 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; flags= ; start_time=[Fri 2025-02-28 16:14:51 MSK] ; stop_time=[n/a] ; pid=19678 ; code=(null) ; status=0/0 }", "ExitType": "main", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/etcd.service", "FreezerState": "running", "GID": "111", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "etcd.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:14:51 MSK", "InactiveEnterTimestampMonotonic": "239091444740", "InactiveExitTimestamp": "Fri 2025-02-28 16:14:51 MSK", "InactiveExitTimestampMonotonic": "239091457415", "InvocationID": "5b8d19f0269644baa31c9fbe89258892", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "65536", "LimitNOFILESoft": "65536", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "19678", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "58232832", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "etcd.service etcd2.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-abnormal", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Fri 2025-02-28 16:14:55 MSK", "StateChangeTimestampMonotonic": "239095426388", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "8", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "103", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "etcd", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:17:01,988 p=2989 u=digitd n=ansible | TASK [Start etcd service] *****************************************************************************************************************************************************
2025-02-28 16:17:16,901 p=2989 u=digitd n=ansible | changed: [db.etcd.lan] => {"changed": true, "name": "etcd", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:14:55 MSK", "ActiveEnterTimestampMonotonic": "239095426388", "ActiveExitTimestamp": "Fri 2025-02-28 16:16:54 MSK", "ActiveExitTimestampMonotonic": "239215141690", "ActiveState": "inactive", "After": "systemd-journald.socket system.slice basic.target network.target sysinit.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:14:51 MSK", "AssertTimestampMonotonic": "239091446211", "Before": "multi-user.target etcd-discovery.service shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1887393000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:14:51 MSK", "ConditionTimestampMonotonic": "239091446207", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroupId": "61943", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "etcd - highly-available key value store", "DevicePolicy": "auto", "Documentation": "https://etcd.io/docs man:etcd", "DynamicUser": "no", "Environment": "DAEMON_ARGS= ETCD_NAME=etcd ETCD_DATA_DIR=/var/lib/etcd/default", "EnvironmentFiles": "/etc/default/etcd (ignore_errors=yes)", "ExecMainCode": "2", "ExecMainExitTimestamp": "Fri 2025-02-28 16:17:02 MSK", "ExecMainExitTimestampMonotonic": "239222307061", "ExecMainPID": "19678", "ExecMainStartTimestamp": "Fri 2025-02-28 16:14:51 MSK", "ExecMainStartTimestampMonotonic": "239091456471", "ExecMainStatus": "15", "ExecStart": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:14:51 MSK] ; stop_time=[Fri 2025-02-28 16:17:02 MSK] ; pid=19678 ; code=killed ; status=15/TERM }", "ExecStartEx": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; flags= ; start_time=[Fri 2025-02-28 16:14:51 MSK] ; stop_time=[Fri 2025-02-28 16:17:02 MSK] ; pid=19678 ; code=killed ; status=15/TERM }", "ExitType": "main", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/etcd.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "etcd.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:17:02 MSK", "InactiveEnterTimestampMonotonic": "239222307419", "InactiveExitTimestamp": "Fri 2025-02-28 16:14:51 MSK", "InactiveExitTimestampMonotonic": "239091457415", "InvocationID": "5b8d19f0269644baa31c9fbe89258892", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "65536", "LimitNOFILESoft": "65536", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "etcd.service etcd2.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-abnormal", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Fri 2025-02-28 16:17:02 MSK", "StateChangeTimestampMonotonic": "239222307419", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "etcd", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:17:16,902 p=2989 u=digitd n=ansible | changed: [db.master.lan] => {"changed": true, "name": "etcd", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:14:37 MSK", "ActiveEnterTimestampMonotonic": "411623437959", "ActiveExitTimestamp": "Fri 2025-02-28 16:16:54 MSK", "ActiveExitTimestampMonotonic": "411761055059", "ActiveState": "inactive", "After": "network.target system.slice basic.target sysinit.target systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:14:25 MSK", "AssertTimestampMonotonic": "411611637630", "Before": "multi-user.target etcd-discovery.service shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "2060536000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:14:25 MSK", "ConditionTimestampMonotonic": "411611637625", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroupId": "14796", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "etcd - highly-available key value store", "DevicePolicy": "auto", "Documentation": "https://etcd.io/docs man:etcd", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "Environment": "DAEMON_ARGS= ETCD_NAME=dbmaster ETCD_DATA_DIR=/var/lib/etcd/default", "EnvironmentFiles": "/etc/default/etcd (ignore_errors=yes)", "ExecMainCode": "2", "ExecMainExitTimestamp": "Fri 2025-02-28 16:16:56 MSK", "ExecMainExitTimestampMonotonic": "411762764434", "ExecMainHandoffTimestamp": "Fri 2025-02-28 16:14:26 MSK", "ExecMainHandoffTimestampMonotonic": "411612609578", "ExecMainPID": "477717", "ExecMainStartTimestamp": "Fri 2025-02-28 16:14:25 MSK", "ExecMainStartTimestampMonotonic": "411611639286", "ExecMainStatus": "15", "ExecStart": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:14:25 MSK] ; stop_time=[Fri 2025-02-28 16:16:56 MSK] ; pid=477717 ; code=killed ; status=15/TERM }", "ExecStartEx": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; flags= ; start_time=[Fri 2025-02-28 16:14:25 MSK] ; stop_time=[Fri 2025-02-28 16:16:56 MSK] ; pid=477717 ; code=killed ; status=15/TERM }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/etcd.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "etcd.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:16:56 MSK", "InactiveEnterTimestampMonotonic": "411762764867", "InactiveExitTimestamp": "Fri 2025-02-28 16:14:25 MSK", "InactiveExitTimestampMonotonic": "411611641718", "InvocationID": "9febbffa302942138f19988afa81fde8", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "65536", "LimitNOFILESoft": "65536", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "727506944", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "74141696", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "[not set]", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "[not set]", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "etcd.service etcd2.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-abnormal", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Fri 2025-02-28 16:16:56 MSK", "StateChangeTimestampMonotonic": "411762764867", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "etcd", "UtmpMode": "init", "WantedBy": "etcd-discovery.service multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:17:35,589 p=2989 u=digitd n=ansible | changed: [db.slave.lan] => {"changed": true, "name": "etcd", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:14:45 MSK", "ActiveEnterTimestampMonotonic": "411572584941", "ActiveExitTimestamp": "Fri 2025-02-28 16:16:55 MSK", "ActiveExitTimestampMonotonic": "411702372716", "ActiveState": "inactive", "After": "basic.target network.target system.slice systemd-journald.socket sysinit.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:14:43 MSK", "AssertTimestampMonotonic": "411570629721", "Before": "etcd-discovery.service multi-user.target shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1685944000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:14:43 MSK", "ConditionTimestampMonotonic": "411570629716", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroupId": "157267", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "etcd - highly-available key value store", "DevicePolicy": "auto", "Documentation": "https://etcd.io/docs man:etcd", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "Environment": "DAEMON_ARGS= ETCD_NAME=slavedb ETCD_DATA_DIR=/var/lib/etcd/default", "EnvironmentFiles": "/etc/default/etcd (ignore_errors=yes)", "ExecMainCode": "2", "ExecMainExitTimestamp": "Fri 2025-02-28 16:16:56 MSK", "ExecMainExitTimestampMonotonic": "411703724062", "ExecMainHandoffTimestamp": "Fri 2025-02-28 16:14:43 MSK", "ExecMainHandoffTimestampMonotonic": "411570657138", "ExecMainPID": "443528", "ExecMainStartTimestamp": "Fri 2025-02-28 16:14:43 MSK", "ExecMainStartTimestampMonotonic": "411570631520", "ExecMainStatus": "15", "ExecStart": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:14:43 MSK] ; stop_time=[Fri 2025-02-28 16:16:56 MSK] ; pid=443528 ; code=killed ; status=15/TERM }", "ExecStartEx": "{ path=/usr/bin/etcd ; argv[]=/usr/bin/etcd $DAEMON_ARGS ; flags= ; start_time=[Fri 2025-02-28 16:14:43 MSK] ; stop_time=[Fri 2025-02-28 16:16:56 MSK] ; pid=443528 ; code=killed ; status=15/TERM }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/etcd.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "etcd.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:16:56 MSK", "InactiveEnterTimestampMonotonic": "411703724428", "InactiveExitTimestamp": "Fri 2025-02-28 16:14:43 MSK", "InactiveExitTimestampMonotonic": "411570637023", "InvocationID": "2811e0ea5f974972a38c0581b944dfed", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "65536", "LimitNOFILESoft": "65536", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "727805952", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "49983488", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "[not set]", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "[not set]", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "etcd.service etcd2.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "on-abnormal", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Fri 2025-02-28 16:16:56 MSK", "StateChangeTimestampMonotonic": "411703724428", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "etcd", "UtmpMode": "init", "WantedBy": "etcd-discovery.service multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:17:35,609 p=2989 u=digitd n=ansible | PLAY [Delete Patroni files] ***************************************************************************************************************************************************
2025-02-28 16:17:35,616 p=2989 u=digitd n=ansible | TASK [Remove files] ***********************************************************************************************************************************************************
2025-02-28 16:17:36,330 p=2989 u=digitd n=ansible | changed: [db.master.lan] => {"changed": true, "cmd": ["trash-put", "/var/lib/postgresql/15/data"], "delta": "0:00:00.237716", "end": "2025-02-28 16:17:36.431121", "msg": "", "rc": 0, "start": "2025-02-28 16:17:36.193405", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2025-02-28 16:17:36,503 p=2989 u=digitd n=ansible | changed: [db.slave.lan] => {"changed": true, "cmd": ["trash-put", "/var/lib/postgresql/15/data"], "delta": "0:00:00.364308", "end": "2025-02-28 16:17:36.615484", "msg": "", "rc": 0, "start": "2025-02-28 16:17:36.251176", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2025-02-28 16:17:36,515 p=2989 u=digitd n=ansible | PLAY [Stop Patroni] ***********************************************************************************************************************************************************
2025-02-28 16:17:36,526 p=2989 u=digitd n=ansible | TASK [Stop service] ***********************************************************************************************************************************************************
2025-02-28 16:17:37,822 p=2989 u=digitd n=ansible | changed: [db.slave.lan] => {"changed": true, "name": "patroni", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:15:48 MSK", "ActiveEnterTimestampMonotonic": "411635796604", "ActiveExitTimestamp": "Fri 2025-02-28 16:16:26 MSK", "ActiveExitTimestampMonotonic": "411674181283", "ActiveState": "inactive", "After": "systemd-journald.socket sysinit.target basic.target network.target system.slice", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:15:48 MSK", "AssertTimestampMonotonic": "411635793195", "Before": "multi-user.target shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "2842089000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:15:48 MSK", "ConditionTimestampMonotonic": "411635793178", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroupId": "157891", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "Runners to orchestrate a high-availability PostgreSQL", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "EnvironmentFiles": "/etc/patroni_env.conf (ignore_errors=yes)", "ExecMainCode": "1", "ExecMainExitTimestamp": "Fri 2025-02-28 16:16:48 MSK", "ExecMainExitTimestampMonotonic": "411696048070", "ExecMainHandoffTimestamp": "Fri 2025-02-28 16:15:48 MSK", "ExecMainHandoffTimestampMonotonic": "411635824622", "ExecMainPID": "444196", "ExecMainStartTimestamp": "Fri 2025-02-28 16:15:48 MSK", "ExecMainStartTimestampMonotonic": "411635794121", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/patroni ; argv[]=/usr/bin/patroni /etc/patroni/config.yml ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:15:48 MSK] ; stop_time=[Fri 2025-02-28 16:16:48 MSK] ; pid=444196 ; code=exited ; status=0 }", "ExecStartEx": "{ path=/usr/bin/patroni ; argv[]=/usr/bin/patroni /etc/patroni/config.yml ; flags= ; start_time=[Fri 2025-02-28 16:15:48 MSK] ; stop_time=[Fri 2025-02-28 16:16:48 MSK] ; pid=444196 ; code=exited ; status=0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/patroni.service", "FreezerState": "running", "GID": "[not set]", "Group": "postgres", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "patroni.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:16:48 MSK", "InactiveEnterTimestampMonotonic": "411696048283", "InactiveExitTimestamp": "Fri 2025-02-28 16:15:48 MSK", "InactiveExitTimestampMonotonic": "411635796604", "InvocationID": "22de219a1b124dbb92a268e2057d2ff1", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "process", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "673689600", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "104497152", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "[not set]", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "[not set]", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "patroni.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "on-failure", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Fri 2025-02-28 16:16:48 MSK", "StateChangeTimestampMonotonic": "411696048283", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "1098", "TimeoutAbortUSec": "30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "postgres", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:17:37,855 p=2989 u=digitd n=ansible | changed: [db.master.lan] => {"changed": true, "name": "patroni", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:15:41 MSK", "ActiveEnterTimestampMonotonic": "411688171532", "ActiveExitTimestamp": "Fri 2025-02-28 16:16:25 MSK", "ActiveExitTimestampMonotonic": "411731881598", "ActiveState": "inactive", "After": "system.slice network.target systemd-journald.socket basic.target sysinit.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:15:41 MSK", "AssertTimestampMonotonic": "411688167188", "Before": "multi-user.target shutdown.target", "BindLogSockets": "no", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "2585889000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanLiveMount": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:15:41 MSK", "ConditionTimestampMonotonic": "411688167165", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroupId": "14835", "ControlPID": "0", "CoredumpFilter": "0x33", "CoredumpReceive": "no", "DebugInvocation": "no", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "DefaultStartupMemoryLow": "0", "Delegate": "no", "Description": "Runners to orchestrate a high-availability PostgreSQL", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveMemoryHigh": "1007325184", "EffectiveMemoryMax": "1007325184", "EffectiveTasksMax": "1098", "EnvironmentFiles": "/etc/patroni_env.conf (ignore_errors=yes)", "ExecMainCode": "1", "ExecMainExitTimestamp": "Fri 2025-02-28 16:16:32 MSK", "ExecMainExitTimestampMonotonic": "411738498700", "ExecMainHandoffTimestamp": "Fri 2025-02-28 16:15:43 MSK", "ExecMainHandoffTimestampMonotonic": "411689269472", "ExecMainPID": "478302", "ExecMainStartTimestamp": "Fri 2025-02-28 16:15:41 MSK", "ExecMainStartTimestampMonotonic": "411688169163", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/patroni ; argv[]=/usr/bin/patroni /etc/patroni/config.yml ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:15:41 MSK] ; stop_time=[Fri 2025-02-28 16:16:32 MSK] ; pid=478302 ; code=exited ; status=0 }", "ExecStartEx": "{ path=/usr/bin/patroni ; argv[]=/usr/bin/patroni /etc/patroni/config.yml ; flags= ; start_time=[Fri 2025-02-28 16:15:41 MSK] ; stop_time=[Fri 2025-02-28 16:16:32 MSK] ; pid=478302 ; code=exited ; status=0 }", "ExitType": "main", "ExtensionImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FileDescriptorStorePreserve": "restart", "FinalKillSignal": "9", "FragmentPath": "/usr/lib/systemd/system/patroni.service", "FreezerState": "running", "GID": "[not set]", "Group": "postgres", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "[not set]", "IOReadOperations": "[not set]", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "[not set]", "IOWriteOperations": "[not set]", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "patroni.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:16:32 MSK", "InactiveEnterTimestampMonotonic": "411738498858", "InactiveExitTimestamp": "Fri 2025-02-28 16:15:41 MSK", "InactiveExitTimestampMonotonic": "411688171532", "InvocationID": "ca1d08c29cc5491bb97ea10f3a83eee3", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "process", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LiveMountResult": "success", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureDurationUSec": "[not set]", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "682987520", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryKSM": "no", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemoryPeak": "108494848", "MemoryPressureThresholdUSec": "200ms", "MemoryPressureWatch": "auto", "MemorySwapCurrent": "[not set]", "MemorySwapMax": "infinity", "MemorySwapPeak": "[not set]", "MemoryZSwapCurrent": "[not set]", "MemoryZSwapMax": "infinity", "MemoryZSwapWriteback": "yes", "MountAPIVFS": "no", "MountImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "patroni.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivatePIDs": "no", "PrivateTmp": "no", "PrivateTmpEx": "no", "PrivateUsers": "no", "PrivateUsersEx": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectControlGroupsEx": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "ReloadSignal": "1", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-failure", "RestartKillSignal": "15", "RestartMaxDelayUSec": "infinity", "RestartMode": "normal", "RestartSteps": "0", "RestartUSec": "100ms", "RestartUSecNext": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RootEphemeral": "no", "RootImagePolicy": "root=verity+signed+encrypted+unprotected+absent:usr=verity+signed+encrypted+unprotected+absent:home=encrypted+unprotected+absent:srv=encrypted+unprotected+absent:tmp=encrypted+unprotected+absent:var=encrypted+unprotected+absent", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "SetLoginEnvironment": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StartupMemoryHigh": "infinity", "StartupMemoryLow": "0", "StartupMemoryMax": "infinity", "StartupMemorySwapMax": "infinity", "StartupMemoryZSwapMax": "infinity", "StateChangeTimestamp": "Fri 2025-02-28 16:16:32 MSK", "StateChangeTimestampMonotonic": "411738498858", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SuccessAction": "none", "SurviveFinalKillSignal": "no", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "1098", "TimeoutAbortUSec": "30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "postgres", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:17:37,857 p=2989 u=digitd n=ansible | TASK [Get patronictl status] **************************************************************************************************************************************************
2025-02-28 16:17:39,548 p=2989 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "cmd": ["patronictl", "-c", "/etc/patroni/config.yml", "list"], "delta": "0:00:01.150806", "end": "2025-02-28 16:17:39.658188", "msg": "", "rc": 0, "start": "2025-02-28 16:17:38.507382", "stderr": "", "stderr_lines": [], "stdout": "+ Cluster: clusterdb (uninitialized) ----+---------+----+-----------+\n| Member   | Host              | Role    | State   | TL | Lag in MB |\n+----------+-------------------+---------+---------+----+-----------+\n| masterdb | 192.168.2.16:5050 | Replica | stopped |    |   unknown |\n+----------+-------------------+---------+---------+----+-----------+", "stdout_lines": ["+ Cluster: clusterdb (uninitialized) ----+---------+----+-----------+", "| Member   | Host              | Role    | State   | TL | Lag in MB |", "+----------+-------------------+---------+---------+----+-----------+", "| masterdb | 192.168.2.16:5050 | Replica | stopped |    |   unknown |", "+----------+-------------------+---------+---------+----+-----------+"]}
2025-02-28 16:17:58,878 p=2989 u=digitd n=ansible | ok: [db.slave.lan] => {"changed": false, "cmd": ["patronictl", "-c", "/etc/patroni/config.yml", "list"], "delta": "0:00:19.833844", "end": "2025-02-28 16:17:58.236978", "msg": "", "rc": 0, "start": "2025-02-28 16:17:38.403134", "stderr": "", "stderr_lines": [], "stdout": "+ Cluster: clusterdb (initializing) -----+--------------------------+----+-----------+\n| Member   | Host              | Role    | State                    | TL | Lag in MB |\n+----------+-------------------+---------+--------------------------+----+-----------+\n| masterdb | 192.168.2.16:5050 | Replica | initializing new cluster |    |   unknown |\n+----------+-------------------+---------+--------------------------+----+-----------+", "stdout_lines": ["+ Cluster: clusterdb (initializing) -----+--------------------------+----+-----------+", "| Member   | Host              | Role    | State                    | TL | Lag in MB |", "+----------+-------------------+---------+--------------------------+----+-----------+", "| masterdb | 192.168.2.16:5050 | Replica | initializing new cluster |    |   unknown |", "+----------+-------------------+---------+--------------------------+----+-----------+"]}
2025-02-28 16:17:58,881 p=2989 u=digitd n=ansible | TASK [Get time for Pantroni initializing] *************************************************************************************************************************************
2025-02-28 16:17:58,891 p=2989 u=digitd n=ansible | Pausing for 120 seconds
2025-02-28 16:17:58,892 p=2989 u=digitd n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2025-02-28 16:19:58,893 p=2989 u=digitd n=ansible | ok: [db.master.lan] => {"changed": false, "delta": 120, "echo": true, "rc": 0, "start": "2025-02-28 16:17:58.890213", "stderr": "", "stdout": "Paused for 2.0 minutes", "stop": "2025-02-28 16:19:58.890736", "user_input": ""}
2025-02-28 16:19:58,897 p=2989 u=digitd n=ansible | TASK [Print it] ***************************************************************************************************************************************************************
2025-02-28 16:19:58,913 p=2989 u=digitd n=ansible | ok: [db.master.lan] => {
    "msg": [
        "+ Cluster: clusterdb (uninitialized) ----+---------+----+-----------+",
        "| Member   | Host              | Role    | State   | TL | Lag in MB |",
        "+----------+-------------------+---------+---------+----+-----------+",
        "| masterdb | 192.168.2.16:5050 | Replica | stopped |    |   unknown |",
        "+----------+-------------------+---------+---------+----+-----------+"
    ]
}
2025-02-28 16:19:58,920 p=2989 u=digitd n=ansible | ok: [db.slave.lan] => {
    "msg": [
        "+ Cluster: clusterdb (initializing) -----+--------------------------+----+-----------+",
        "| Member   | Host              | Role    | State                    | TL | Lag in MB |",
        "+----------+-------------------+---------+--------------------------+----+-----------+",
        "| masterdb | 192.168.2.16:5050 | Replica | initializing new cluster |    |   unknown |",
        "+----------+-------------------+---------+--------------------------+----+-----------+"
    ]
}
2025-02-28 16:19:58,936 p=2989 u=digitd n=ansible | PLAY [Install haproxy and run service] ****************************************************************************************************************************************
2025-02-28 16:19:58,942 p=2989 u=digitd n=ansible | TASK [Install HAProxy] ********************************************************************************************************************************************************
2025-02-28 16:20:00,791 p=2989 u=digitd n=ansible | ok: [db.test.lan] => {"ansible_facts": {"discovered_interpreter_python": "/usr/bin/python3"}, "cache_update_time": 1740743358, "cache_updated": false, "changed": false}
2025-02-28 16:20:00,793 p=2989 u=digitd n=ansible | TASK [Check service status] ***************************************************************************************************************************************************
2025-02-28 16:20:01,860 p=2989 u=digitd n=ansible | ok: [db.test.lan] => {"changed": false, "enabled": true, "name": "haproxy", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:10:53 MSK", "ActiveEnterTimestampMonotonic": "424041261970", "ActiveExitTimestamp": "Fri 2025-02-28 16:10:53 MSK", "ActiveExitTimestampMonotonic": "424041144974", "ActiveState": "active", "After": "sysinit.target systemd-journald.socket network-online.target rsyslog.service basic.target system.slice", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:10:53 MSK", "AssertTimestampMonotonic": "424041148534", "Before": "shutdown.target multi-user.target", "BindReadOnlyPaths": "/dev/log:/var/lib/haproxy/dev/log:rbind", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "539979000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:10:53 MSK", "ConditionTimestampMonotonic": "424041148532", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/haproxy.service", "ControlGroupId": "11267", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "HAProxy Load Balancer", "DevicePolicy": "auto", "Documentation": "\"man:haproxy(1)\" file:/usr/share/doc/haproxy/configuration.txt.gz", "DynamicUser": "no", "Environment": "CONFIG=/etc/haproxy/haproxy.cfg PIDFILE=/run/haproxy.pid \"EXTRAOPTS=-S /run/haproxy-master.sock\"", "EnvironmentFiles": "/etc/sysconfig/haproxy (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "12219", "ExecMainStartTimestamp": "Fri 2025-02-28 16:10:53 MSK", "ExecMainStartTimestampMonotonic": "424041156175", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -USR2 $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -USR2 $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/sbin/haproxy ; argv[]=/usr/sbin/haproxy -Ws -f $CONFIG -p $PIDFILE $EXTRAOPTS ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:10:53 MSK] ; stop_time=[n/a] ; pid=12219 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/sbin/haproxy ; argv[]=/usr/sbin/haproxy -Ws -f $CONFIG -p $PIDFILE $EXTRAOPTS ; flags= ; start_time=[Fri 2025-02-28 16:10:53 MSK] ; stop_time=[n/a] ; pid=12219 ; code=(null) ; status=0/0 }", "ExitType": "main", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/haproxy.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "haproxy.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:10:53 MSK", "InactiveEnterTimestampMonotonic": "424041145755", "InactiveExitTimestamp": "Fri 2025-02-28 16:10:53 MSK", "InactiveExitTimestampMonotonic": "424041156597", "InvocationID": "7c035cd2ac124b3ba811ed4cc7f5dc86", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "mixed", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "12219", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "46288896", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "haproxy.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Fri 2025-02-28 16:10:53 MSK", "StateChangeTimestampMonotonic": "424041261970", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SuccessExitStatus": "143", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "2", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:20:01,867 p=2989 u=digitd n=ansible | PLAY [Change haproxy.cfg and start load balance to the nodes (copy file from the project directory)] **************************************************************************
2025-02-28 16:20:01,876 p=2989 u=digitd n=ansible | TASK [Edit or ensure config file for haproxy] *********************************************************************************************************************************
2025-02-28 16:20:02,543 p=2989 u=digitd n=ansible | ok: [db.test.lan] => {"changed": false, "checksum": "81dc5834c94a75fd36d7fd78e0e93a8898b82b23", "dest": "/etc/haproxy/haproxy.cfg", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/haproxy/haproxy.cfg", "size": 2381, "state": "file", "uid": 0}
2025-02-28 16:20:03,067 p=2989 u=digitd n=ansible | ok: [db.test1.lan] => {"ansible_facts": {"discovered_interpreter_python": "/usr/bin/python3"}, "changed": false, "checksum": "81dc5834c94a75fd36d7fd78e0e93a8898b82b23", "dest": "/etc/haproxy/haproxy.cfg", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/haproxy/haproxy.cfg", "size": 2381, "state": "file", "uid": 0}
2025-02-28 16:20:03,069 p=2989 u=digitd n=ansible | TASK [Restart haproxy service] ************************************************************************************************************************************************
2025-02-28 16:20:04,354 p=2989 u=digitd n=ansible | changed: [db.test1.lan] => {"changed": true, "enabled": true, "name": "haproxy", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:10:53 MSK", "ActiveEnterTimestampMonotonic": "424034192687", "ActiveExitTimestamp": "Fri 2025-02-28 16:10:53 MSK", "ActiveExitTimestampMonotonic": "424034090443", "ActiveState": "active", "After": "network-online.target rsyslog.service system.slice systemd-journald.socket sysinit.target basic.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:10:53 MSK", "AssertTimestampMonotonic": "424034092359", "Before": "shutdown.target multi-user.target", "BindReadOnlyPaths": "/dev/log:/var/lib/haproxy/dev/log:rbind", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "515914000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:10:53 MSK", "ConditionTimestampMonotonic": "424034092357", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/haproxy.service", "ControlGroupId": "10147", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "HAProxy Load Balancer", "DevicePolicy": "auto", "Documentation": "\"man:haproxy(1)\" file:/usr/share/doc/haproxy/configuration.txt.gz", "DynamicUser": "no", "Environment": "CONFIG=/etc/haproxy/haproxy.cfg PIDFILE=/run/haproxy.pid \"EXTRAOPTS=-S /run/haproxy-master.sock\"", "EnvironmentFiles": "/etc/sysconfig/haproxy (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "10112", "ExecMainStartTimestamp": "Fri 2025-02-28 16:10:53 MSK", "ExecMainStartTimestampMonotonic": "424034104288", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -USR2 $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -USR2 $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/sbin/haproxy ; argv[]=/usr/sbin/haproxy -Ws -f $CONFIG -p $PIDFILE $EXTRAOPTS ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:10:53 MSK] ; stop_time=[n/a] ; pid=10112 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/sbin/haproxy ; argv[]=/usr/sbin/haproxy -Ws -f $CONFIG -p $PIDFILE $EXTRAOPTS ; flags= ; start_time=[Fri 2025-02-28 16:10:53 MSK] ; stop_time=[n/a] ; pid=10112 ; code=(null) ; status=0/0 }", "ExitType": "main", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/haproxy.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "haproxy.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:10:53 MSK", "InactiveEnterTimestampMonotonic": "424034091003", "InactiveExitTimestamp": "Fri 2025-02-28 16:10:53 MSK", "InactiveExitTimestampMonotonic": "424034104651", "InvocationID": "62fd86984e994b82bff29fa1c5e83ddb", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "mixed", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "10112", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "45891584", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "haproxy.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Fri 2025-02-28 16:10:53 MSK", "StateChangeTimestampMonotonic": "424034192687", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SuccessExitStatus": "143", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "2", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:20:04,388 p=2989 u=digitd n=ansible | changed: [db.test.lan] => {"changed": true, "enabled": true, "name": "haproxy", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:10:53 MSK", "ActiveEnterTimestampMonotonic": "424041261970", "ActiveExitTimestamp": "Fri 2025-02-28 16:10:53 MSK", "ActiveExitTimestampMonotonic": "424041144974", "ActiveState": "active", "After": "sysinit.target systemd-journald.socket network-online.target rsyslog.service basic.target system.slice", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:10:53 MSK", "AssertTimestampMonotonic": "424041148534", "Before": "shutdown.target multi-user.target", "BindReadOnlyPaths": "/dev/log:/var/lib/haproxy/dev/log:rbind", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "541434000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:10:53 MSK", "ConditionTimestampMonotonic": "424041148532", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/haproxy.service", "ControlGroupId": "11267", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "HAProxy Load Balancer", "DevicePolicy": "auto", "Documentation": "\"man:haproxy(1)\" file:/usr/share/doc/haproxy/configuration.txt.gz", "DynamicUser": "no", "Environment": "CONFIG=/etc/haproxy/haproxy.cfg PIDFILE=/run/haproxy.pid \"EXTRAOPTS=-S /run/haproxy-master.sock\"", "EnvironmentFiles": "/etc/sysconfig/haproxy (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "12219", "ExecMainStartTimestamp": "Fri 2025-02-28 16:10:53 MSK", "ExecMainStartTimestampMonotonic": "424041156175", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -USR2 $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -USR2 $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/sbin/haproxy ; argv[]=/usr/sbin/haproxy -Ws -f $CONFIG -p $PIDFILE $EXTRAOPTS ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:10:53 MSK] ; stop_time=[n/a] ; pid=12219 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/sbin/haproxy ; argv[]=/usr/sbin/haproxy -Ws -f $CONFIG -p $PIDFILE $EXTRAOPTS ; flags= ; start_time=[Fri 2025-02-28 16:10:53 MSK] ; stop_time=[n/a] ; pid=12219 ; code=(null) ; status=0/0 }", "ExitType": "main", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/haproxy.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "haproxy.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:10:53 MSK", "InactiveEnterTimestampMonotonic": "424041145755", "InactiveExitTimestamp": "Fri 2025-02-28 16:10:53 MSK", "InactiveExitTimestampMonotonic": "424041156597", "InvocationID": "7c035cd2ac124b3ba811ed4cc7f5dc86", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "mixed", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "12219", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "46288896", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "haproxy.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Fri 2025-02-28 16:10:53 MSK", "StateChangeTimestampMonotonic": "424041261970", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SuccessExitStatus": "143", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "2", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:20:04,400 p=2989 u=digitd n=ansible | PLAY [Run keepalived services for MASTER Haproxy] *****************************************************************************************************************************
2025-02-28 16:20:04,410 p=2989 u=digitd n=ansible | TASK [Copy conf on MASTER HAProxy node] ***************************************************************************************************************************************
2025-02-28 16:20:05,408 p=2989 u=digitd n=ansible | changed: [db.test1.lan] => {"changed": true, "checksum": "677c26d3f87945325221597e7a31ef65a2c85fe4", "dest": "/etc/keepalived/keepalived.conf", "gid": 0, "group": "root", "md5sum": "01456f23cdb34829851274794461a3c4", "mode": "0644", "owner": "root", "size": 265, "src": "/root/.ansible/tmp/ansible-tmp-1740748804.4428034-5770-99596334851431/source", "state": "file", "uid": 0}
2025-02-28 16:20:05,412 p=2989 u=digitd n=ansible | TASK [Ensure or run keepalived service for Master] ****************************************************************************************************************************
2025-02-28 16:20:07,599 p=2989 u=digitd n=ansible | changed: [db.test1.lan] => {"changed": true, "enabled": true, "name": "keepalived", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:11:04 MSK", "ActiveEnterTimestampMonotonic": "424045038116", "ActiveExitTimestamp": "Fri 2025-02-28 16:11:03 MSK", "ActiveExitTimestampMonotonic": "424043993568", "ActiveState": "active", "After": "systemd-journald.socket network-online.target system.slice sysinit.target basic.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:11:04 MSK", "AssertTimestampMonotonic": "424045009623", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "78396000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:11:04 MSK", "ConditionTimestampMonotonic": "424045009606", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/keepalived.service", "ControlGroupId": "10225", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "Keepalive Daemon (LVS and VRRP)", "DevicePolicy": "auto", "Documentation": "\"man:keepalived(8)\" \"man:keepalived.conf(5)\" \"man:genhash(1)\" https://keepalived.org", "DynamicUser": "no", "EnvironmentFiles": "/etc/default/keepalived (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "10312", "ExecMainStartTimestamp": "Fri 2025-02-28 16:11:04 MSK", "ExecMainStartTimestampMonotonic": "424045016463", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/sbin/keepalived ; argv[]=/usr/sbin/keepalived --dont-fork $DAEMON_ARGS ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:11:04 MSK] ; stop_time=[n/a] ; pid=10312 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/sbin/keepalived ; argv[]=/usr/sbin/keepalived --dont-fork $DAEMON_ARGS ; flags= ; start_time=[Fri 2025-02-28 16:11:04 MSK] ; stop_time=[n/a] ; pid=10312 ; code=(null) ; status=0/0 }", "ExitType": "main", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/keepalived.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "keepalived.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:11:04 MSK", "InactiveEnterTimestampMonotonic": "424045008483", "InactiveExitTimestamp": "Fri 2025-02-28 16:11:04 MSK", "InactiveExitTimestampMonotonic": "424045020403", "InvocationID": "133bcf20076e4bd28688f2105d93dbb5", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "10312", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "2060288", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "keepalived.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "no", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Fri 2025-02-28 16:11:04 MSK", "StateChangeTimestampMonotonic": "424045038116", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "2", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:20:07,605 p=2989 u=digitd n=ansible | PLAY [Run keepalived services for BACKUP Haproxy] *****************************************************************************************************************************
2025-02-28 16:20:07,610 p=2989 u=digitd n=ansible | TASK [Copy conf on BACKUP HAProxy node] ***************************************************************************************************************************************
2025-02-28 16:20:08,471 p=2989 u=digitd n=ansible | changed: [db.test1.lan] => {"changed": true, "checksum": "525508afcada704b949ed1aaa9e0840d11bd6a64", "dest": "/etc/keepalived/keepalived.conf", "gid": 0, "group": "root", "md5sum": "fa6638d71b40284902d93f9d508df66a", "mode": "0644", "owner": "root", "size": 264, "src": "/root/.ansible/tmp/ansible-tmp-1740748807.6441069-5837-91327907403236/source", "state": "file", "uid": 0}
2025-02-28 16:20:08,473 p=2989 u=digitd n=ansible | TASK [Ensure or run keepalived service for BACKUP] ****************************************************************************************************************************
2025-02-28 16:20:10,624 p=2989 u=digitd n=ansible | changed: [db.test1.lan] => {"changed": true, "enabled": true, "name": "keepalived", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-28 16:20:07 MSK", "ActiveEnterTimestampMonotonic": "424588458384", "ActiveExitTimestamp": "Fri 2025-02-28 16:20:06 MSK", "ActiveExitTimestampMonotonic": "424587414978", "ActiveState": "active", "After": "systemd-journald.socket network-online.target system.slice sysinit.target basic.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-28 16:20:07 MSK", "AssertTimestampMonotonic": "424588429477", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "17011000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-28 16:20:07 MSK", "ConditionTimestampMonotonic": "424588429459", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/keepalived.service", "ControlGroupId": "10734", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "Keepalive Daemon (LVS and VRRP)", "DevicePolicy": "auto", "Documentation": "\"man:keepalived(8)\" \"man:keepalived.conf(5)\" \"man:genhash(1)\" https://keepalived.org", "DynamicUser": "no", "EnvironmentFiles": "/etc/default/keepalived (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "10585", "ExecMainStartTimestamp": "Fri 2025-02-28 16:20:07 MSK", "ExecMainStartTimestampMonotonic": "424588436475", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/sbin/keepalived ; argv[]=/usr/sbin/keepalived --dont-fork $DAEMON_ARGS ; ignore_errors=no ; start_time=[Fri 2025-02-28 16:20:07 MSK] ; stop_time=[n/a] ; pid=10585 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/sbin/keepalived ; argv[]=/usr/sbin/keepalived --dont-fork $DAEMON_ARGS ; flags= ; start_time=[Fri 2025-02-28 16:20:07 MSK] ; stop_time=[n/a] ; pid=10585 ; code=(null) ; status=0/0 }", "ExitType": "main", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/keepalived.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "keepalived.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-28 16:20:07 MSK", "InactiveEnterTimestampMonotonic": "424588428407", "InactiveExitTimestamp": "Fri 2025-02-28 16:20:07 MSK", "InactiveExitTimestampMonotonic": "424588440285", "InvocationID": "b8278aeb9982448f9723b967c65c320d", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "3661", "LimitNPROCSoft": "3661", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "3661", "LimitSIGPENDINGSoft": "3661", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "10585", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "2056192", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "keepalived.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "no", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "RuntimeRandomizedExtraUSec": "0", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Fri 2025-02-28 16:20:07 MSK", "StateChangeTimestampMonotonic": "424588458384", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "2", "TasksMax": "1098", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target", "WatchdogSignal": "6", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-28 16:20:10,629 p=2989 u=digitd n=ansible | PLAY RECAP ********************************************************************************************************************************************************************
2025-02-28 16:20:10,630 p=2989 u=digitd n=ansible | db.etcd.lan                : ok=11   changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-28 16:20:10,630 p=2989 u=digitd n=ansible | db.master.lan              : ok=26   changed=8    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-28 16:20:10,630 p=2989 u=digitd n=ansible | db.slave.lan               : ok=23   changed=8    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-28 16:20:10,630 p=2989 u=digitd n=ansible | db.test.lan                : ok=4    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-28 16:20:10,630 p=2989 u=digitd n=ansible | db.test1.lan               : ok=6    changed=5    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
